<div class="article-intro" id="content">
<h1>Kotlin 使用命令行编译</h1>
<p>Kotlin 命令行编译工具下载地址：<a href="https://github.com/JetBrains/kotlin/releases/tag/v1.1.2-2" target="_blank">https://github.com/JetBrains/kotlin/releases/tag/v1.1.2-2</a>，目前最新为 1.1.2-2。
</p>
<p>你可以选择一个最新的稳定版下载。</p>
<p>下载完成后，解压到指定目录，然后将 <span class="marked">bin</span> 目录添加到系统环境变量。bin 目录包含编译和运行 Kotlin 所需的脚本。</p>
<hr/>
<h2>SDKMAN!</h2>
<p>在 OS X、Linux、Cygwin、FreeBSD 和 Solaris 系统上也可以使用更简单的安装方法，命令如下：</p>
<pre>
$ curl -s https://get.sdkman.io | bash

$ sdk install kotlin
</pre>
<h3>Homebrew
</h3><p>
在 OS X 下，你可以使用 Homebrew 安装：</p>
<pre>
$ brew update
$ brew install kotlin
</pre>
<h3>MacPorts</h3>
<p>如果你是 MacPorts 用户，可以使用以下命令安装：</p>
<pre>$ sudo port install kotlin</pre>
<hr/>
<h2>创建和运行第一个程序</h2>
<p>创建一个名为 hello.kt 文件，代码如下：</p>
<div class="example">
<h2 class="example">hello.kt</h2>
<div class="example_code">
<div class="hl-main"><span class="hl-identifier">fun</span><span class="hl-code"> </span><span class="hl-identifier">main</span><span class="hl-brackets">(</span><span class="hl-identifier">args</span><span class="hl-code">: </span><span class="hl-identifier">Array</span><span class="hl-code">&lt;</span><span class="hl-identifier">String</span><span class="hl-code">&gt;</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
</span><span class="hl-identifier">println</span><span class="hl-brackets">(</span><span class="hl-quotes">"</span><span class="hl-string">Hello, World!</span><span class="hl-quotes">"</span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-brackets">}</span></div>
</div>
</div>
<p>使用 Kotlin 编译器编译应用:</p>
<pre>
$ kotlinc hello.kt -include-runtime -d hello.jar
</pre>
<p><ul><li><b>
-d</b>: 用来设置编译输出的名称，可以是 class  或 .jar 文件，也可以是目录。</li><li><b>
-include-runtime</b> : 让 .jar 文件包含 Kotlin 运行库，从而可以直接运行。</li></ul><p>
如果你想看所有的可用选项，运行:
</p>
<pre>
$ kotlinc -help
</pre>
<p>运行应用</p>
<pre>
$ java -jar hello.jar
Hello, World!
</pre>
<h3>编译成库
</h3><p>
若需要将生成的 jar 包供其他 Kotlin 程序使用，可无需包含 Kotlin 的运行库：

</p>
<pre>$ kotlinc hello.kt -d hello.jar</pre>
<p>由于这样生成的 .jar 文件不包含 Kotlin 运行库，所以你应该确保当它被使用时，运行时在你的 classpath 上。
</p><p>
你也可以使用 kotlin 命令来运行 Kotlin 编译器生成的 .jar 文件</p><pre>
$ kotlin -classpath hello.jar HelloKt
</pre><p>HelloKt 为编译器为 hello.kt 文件生成的默认类名。</p>
<hr/><h2>运行 REPL（交互式解释器）</h2>
<p>我们可以运行如下命令得到一个可交互的 shell，然后输入任何有效的 Kotlin 代码，并立即看到结果</p>
<p><img src="//www.runoob.com/wp-content/uploads/2017/05/1495788947-5293-kotlin-shell.png"/></p>
<hr/><h2>使用命令行执行脚本</h2>
<p>Kotlin 也可以作为一个脚本语言使用，文件后缀名为 .kts 。 </p><p>
例如我们创建一个名为 list_folders.kts，代码如下：</p>
<pre>
import java.io.File

val folders = File(args[0]).listFiles { file -&gt; file.isDirectory() }
folders?.forEach { folder -&gt; println(folder) }
</pre>
<p>执行时通过 -script 选项设置相应的脚本文件。</p>
<pre>$ kotlinc -script list_folders.kts &lt;path_to_folder&gt;</pre>
$ kotlinc -script list_folders.kts <path_to_folder>
</path_to_folder></p></div>