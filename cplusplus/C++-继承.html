<div class="article-intro" id="content">
<h1>C++ <span class="color_h1">继承</span></h1>
<div class="tutintro">
<p>面向对象程序设计中最重要的一个概念是继承。继承允许我们依据另一个类来定义一个类，这使得创建和维护一个应用程序变得更容易。这样做，也达到了重用代码功能和提高执行时间的效果。</p>
<p>当创建一个类时，您不需要重新编写新的数据成员和成员函数，只需指定新建的类继承了一个已有的类的成员即可。这个已有的类称为<b>基类</b>，新建的类称为<b>派生类</b>。</p>
<p>继承代表了 <b>is a</b> 关系。例如，哺乳动物是动物，狗是哺乳动物，因此，狗是动物，等等。</p>
</div>
<h2 class="tutheader">基类 &amp; 派生类</h2>
<p>一个类可以派生自多个类，这意味着，它可以从多个基类继承数据和函数。定义一个派生类，我们使用一个类派生列表来指定基类。类派生列表以一个或多个基类命名，形式如下：</p>
<pre>
class derived-class: access-specifier base-class
</pre>
<p>其中，访问修饰符 access-specifier 是 <b>public、protected</b> 或 <b>private</b> 其中的一个，base-class 是之前定义过的某个类的名称。如果未使用访问修饰符 access-specifier，则默认为 private。</p>
<p>假设有一个基类 <b>Shape</b>，<b>Rectangle</b> 是它的派生类，如下所示：</p>
<div class="example">
<h2 class="example">实例</h2>
<div class="example_code">
<div class="hl-main"><span class="hl-prepro">#include</span><span class="hl-prepro"> </span><span class="hl-quotes">&lt;</span><span class="hl-string">iostream</span><span class="hl-quotes">&gt;</span><span class="hl-prepro"></span><span class="hl-code">
</span><span class="hl-reserved">using</span><span class="hl-code"> </span><span class="hl-types">namespace</span><span class="hl-code"> </span><span class="hl-identifier">std</span><span class="hl-code">;
 
</span><span class="hl-comment">// 基类</span><span class="hl-comment"></span><span class="hl-code">
</span><span class="hl-types">class</span><span class="hl-code"> </span><span class="hl-identifier">Shape</span><span class="hl-code">
</span><span class="hl-brackets">{</span><span class="hl-code">
</span><span class="hl-reserved">public</span><span class="hl-code">:
      </span><span class="hl-types">void</span><span class="hl-code"> </span><span class="hl-identifier">setWidth</span><span class="hl-brackets">(</span><span class="hl-types">int</span><span class="hl-code"> </span><span class="hl-identifier">w</span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-brackets">{</span><span class="hl-code">
</span><span class="hl-identifier">width</span><span class="hl-code"> = </span><span class="hl-identifier">w</span><span class="hl-code">;
      </span><span class="hl-brackets">}</span><span class="hl-code">
</span><span class="hl-types">void</span><span class="hl-code"> </span><span class="hl-identifier">setHeight</span><span class="hl-brackets">(</span><span class="hl-types">int</span><span class="hl-code"> </span><span class="hl-identifier">h</span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-brackets">{</span><span class="hl-code">
</span><span class="hl-identifier">height</span><span class="hl-code"> = </span><span class="hl-identifier">h</span><span class="hl-code">;
      </span><span class="hl-brackets">}</span><span class="hl-code">
</span><span class="hl-reserved">protected</span><span class="hl-code">:
      </span><span class="hl-types">int</span><span class="hl-code"> </span><span class="hl-identifier">width</span><span class="hl-code">;
      </span><span class="hl-types">int</span><span class="hl-code"> </span><span class="hl-identifier">height</span><span class="hl-code">;
</span><span class="hl-brackets">}</span><span class="hl-code">;
 
</span><span class="hl-comment">// 派生类</span><span class="hl-comment"></span><span class="hl-code">
</span><span class="hl-types">class</span><span class="hl-code"> </span><span class="hl-identifier">Rectangle</span><span class="hl-code">: </span><span class="hl-reserved">public</span><span class="hl-code"> </span><span class="hl-identifier">Shape</span><span class="hl-code">
</span><span class="hl-brackets">{</span><span class="hl-code">
</span><span class="hl-reserved">public</span><span class="hl-code">:
      </span><span class="hl-types">int</span><span class="hl-code"> </span><span class="hl-identifier">getArea</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-brackets">{</span><span class="hl-code">
</span><span class="hl-reserved">return</span><span class="hl-code"> </span><span class="hl-brackets">(</span><span class="hl-identifier">width</span><span class="hl-code"> * </span><span class="hl-identifier">height</span><span class="hl-brackets">)</span><span class="hl-code">; 
      </span><span class="hl-brackets">}</span><span class="hl-code">
</span><span class="hl-brackets">}</span><span class="hl-code">;
 
</span><span class="hl-types">int</span><span class="hl-code"> </span><span class="hl-identifier">main</span><span class="hl-brackets">(</span><span class="hl-types">void</span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-brackets">{</span><span class="hl-code">
</span><span class="hl-identifier">Rectangle</span><span class="hl-code"> </span><span class="hl-identifier">Rect</span><span class="hl-code">;
 
   </span><span class="hl-identifier">Rect</span><span class="hl-code">.</span><span class="hl-identifier">setWidth</span><span class="hl-brackets">(</span><span class="hl-number">5</span><span class="hl-brackets">)</span><span class="hl-code">;
   </span><span class="hl-identifier">Rect</span><span class="hl-code">.</span><span class="hl-identifier">setHeight</span><span class="hl-brackets">(</span><span class="hl-number">7</span><span class="hl-brackets">)</span><span class="hl-code">;
 
   </span><span class="hl-comment">// 输出对象的面积</span><span class="hl-comment"></span><span class="hl-code">
</span><span class="hl-identifier">cout</span><span class="hl-code"> &lt;&lt; </span><span class="hl-quotes">"</span><span class="hl-string">Total area: </span><span class="hl-quotes">"</span><span class="hl-code"> &lt;&lt; </span><span class="hl-identifier">Rect</span><span class="hl-code">.</span><span class="hl-identifier">getArea</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code"> &lt;&lt; </span><span class="hl-identifier">endl</span><span class="hl-code">;
 
   </span><span class="hl-reserved">return</span><span class="hl-code"> </span><span class="hl-number">0</span><span class="hl-code">;
</span><span class="hl-brackets">}</span></div>
</div>
</div>
<p>当上面的代码被编译和执行时，它会产生下列结果：</p>
<pre>
Total area: 35
</pre>
<h2 class="tutheader">访问控制和继承</h2>
<p>派生类可以访问基类中所有的非私有成员。因此基类成员如果不想被派生类的成员函数访问，则应在基类中声明为 private。</p>
<p>我们可以根据访问权限总结出不同的访问类型，如下所示：</p>
<table class="reference notranslate">
<tr><th width="25%">访问</th><th width="25%">public</th><th width="25%">protected</th><th width="25%">private</th></tr>
<tr><td>同一个类</td><td>yes</td><td>yes</td><td>yes</td></tr>
<tr><td>派生类</td><td>yes</td><td>yes</td><td>no</td></tr>
<tr><td>外部的类</td><td>yes</td><td>no</td><td>no</td></tr>
</table>
<p>一个派生类继承了所有的基类方法，但下列情况除外：</p>
<ul class="list">
<li>基类的构造函数、析构函数和拷贝构造函数。</li>
<li>基类的重载运算符。</li>
<li>基类的友元函数。</li>
</ul>
<h2 class="tutheader">继承类型</h2>
<p>当一个类派生自基类，该基类可以被继承为 <b>public、protected</b> 或 <b> private</b> 几种类型。继承类型是通过上面讲解的访问修饰符 access-specifier 来指定的。</p>
<p>我们几乎不使用 <b>protected</b> 或 <b> private</b> 继承，通常使用 <b>public</b> 继承。当使用不同类型的继承时，遵循以下几个规则：</p>
<ul class="list">
<li><b>公有继承（public）：</b>当一个类派生自<b>公有</b>基类时，基类的<b>公有</b>成员也是派生类的<b>公有</b>成员，基类的<b>保护</b>成员也是派生类的<b>保护</b>成员，基类的<b>私有</b>成员不能直接被派生类访问，但是可以通过调用基类的<b>公有</b>和<b>保护</b>成员来访问。</li>
<li><b>保护继承（protected）：</b> 当一个类派生自<b>保护</b>基类时，基类的<b>公有</b>和<b>保护</b>成员将成为派生类的<b>保护</b>成员。</li>
<li><b>私有继承（private）：</b>当一个类派生自<b>私有</b>基类时，基类的<b>公有</b>和<b>保护</b>成员将成为派生类的<b>私有</b>成员。</li>
</ul>
<h2 class="tutheader">多继承</h2>
<p>多继承即一个子类可以有多个父类，它继承了多个父类的特性。</p>
<p>C++ 类可以从多个类继承成员，语法如下：</p>
<pre>
class &lt;派生类名&gt;:&lt;继承方式1&gt;&lt;基类名1&gt;,&lt;继承方式2&gt;&lt;基类名2&gt;,…
{
&lt;派生类类体&gt;
};

</pre>
<p>其中，访问修饰符继承方式是 <b>public、protected</b> 或 <b>private</b> 其中的一个，用来修饰每个基类，各个基类之间用逗号分隔，如上所示。现在让我们一起看看下面的实例：</p>
<div class="example">
<h2 class="example">实例</h2>
<div class="example_code">
<div class="hl-main"><span class="hl-prepro">#include</span><span class="hl-prepro"> </span><span class="hl-quotes">&lt;</span><span class="hl-string">iostream</span><span class="hl-quotes">&gt;</span><span class="hl-prepro"></span><span class="hl-code">
</span><span class="hl-reserved">using</span><span class="hl-code"> </span><span class="hl-types">namespace</span><span class="hl-code"> </span><span class="hl-identifier">std</span><span class="hl-code">;
 
</span><span class="hl-comment">// 基类 Shape</span><span class="hl-comment"></span><span class="hl-code">
</span><span class="hl-types">class</span><span class="hl-code"> </span><span class="hl-identifier">Shape</span><span class="hl-code">
</span><span class="hl-brackets">{</span><span class="hl-code">
</span><span class="hl-reserved">public</span><span class="hl-code">:
      </span><span class="hl-types">void</span><span class="hl-code"> </span><span class="hl-identifier">setWidth</span><span class="hl-brackets">(</span><span class="hl-types">int</span><span class="hl-code"> </span><span class="hl-identifier">w</span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-brackets">{</span><span class="hl-code">
</span><span class="hl-identifier">width</span><span class="hl-code"> = </span><span class="hl-identifier">w</span><span class="hl-code">;
      </span><span class="hl-brackets">}</span><span class="hl-code">
</span><span class="hl-types">void</span><span class="hl-code"> </span><span class="hl-identifier">setHeight</span><span class="hl-brackets">(</span><span class="hl-types">int</span><span class="hl-code"> </span><span class="hl-identifier">h</span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-brackets">{</span><span class="hl-code">
</span><span class="hl-identifier">height</span><span class="hl-code"> = </span><span class="hl-identifier">h</span><span class="hl-code">;
      </span><span class="hl-brackets">}</span><span class="hl-code">
</span><span class="hl-reserved">protected</span><span class="hl-code">:
      </span><span class="hl-types">int</span><span class="hl-code"> </span><span class="hl-identifier">width</span><span class="hl-code">;
      </span><span class="hl-types">int</span><span class="hl-code"> </span><span class="hl-identifier">height</span><span class="hl-code">;
</span><span class="hl-brackets">}</span><span class="hl-code">;
 
</span><span class="hl-comment">// 基类 PaintCost</span><span class="hl-comment"></span><span class="hl-code">
</span><span class="hl-types">class</span><span class="hl-code"> </span><span class="hl-identifier">PaintCost</span><span class="hl-code">
</span><span class="hl-brackets">{</span><span class="hl-code">
</span><span class="hl-reserved">public</span><span class="hl-code">:
      </span><span class="hl-types">int</span><span class="hl-code"> </span><span class="hl-identifier">getCost</span><span class="hl-brackets">(</span><span class="hl-types">int</span><span class="hl-code"> </span><span class="hl-identifier">area</span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-brackets">{</span><span class="hl-code">
</span><span class="hl-reserved">return</span><span class="hl-code"> </span><span class="hl-identifier">area</span><span class="hl-code"> * </span><span class="hl-number">70</span><span class="hl-code">;
      </span><span class="hl-brackets">}</span><span class="hl-code">
</span><span class="hl-brackets">}</span><span class="hl-code">;
 
</span><span class="hl-comment">// 派生类</span><span class="hl-comment"></span><span class="hl-code">
</span><span class="hl-types">class</span><span class="hl-code"> </span><span class="hl-identifier">Rectangle</span><span class="hl-code">: </span><span class="hl-reserved">public</span><span class="hl-code"> </span><span class="hl-identifier">Shape</span><span class="hl-code">, </span><span class="hl-reserved">public</span><span class="hl-code"> </span><span class="hl-identifier">PaintCost</span><span class="hl-code">
</span><span class="hl-brackets">{</span><span class="hl-code">
</span><span class="hl-reserved">public</span><span class="hl-code">:
      </span><span class="hl-types">int</span><span class="hl-code"> </span><span class="hl-identifier">getArea</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-brackets">{</span><span class="hl-code">
</span><span class="hl-reserved">return</span><span class="hl-code"> </span><span class="hl-brackets">(</span><span class="hl-identifier">width</span><span class="hl-code"> * </span><span class="hl-identifier">height</span><span class="hl-brackets">)</span><span class="hl-code">; 
      </span><span class="hl-brackets">}</span><span class="hl-code">
</span><span class="hl-brackets">}</span><span class="hl-code">;
 
</span><span class="hl-types">int</span><span class="hl-code"> </span><span class="hl-identifier">main</span><span class="hl-brackets">(</span><span class="hl-types">void</span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-brackets">{</span><span class="hl-code">
</span><span class="hl-identifier">Rectangle</span><span class="hl-code"> </span><span class="hl-identifier">Rect</span><span class="hl-code">;
   </span><span class="hl-types">int</span><span class="hl-code"> </span><span class="hl-identifier">area</span><span class="hl-code">;
 
   </span><span class="hl-identifier">Rect</span><span class="hl-code">.</span><span class="hl-identifier">setWidth</span><span class="hl-brackets">(</span><span class="hl-number">5</span><span class="hl-brackets">)</span><span class="hl-code">;
   </span><span class="hl-identifier">Rect</span><span class="hl-code">.</span><span class="hl-identifier">setHeight</span><span class="hl-brackets">(</span><span class="hl-number">7</span><span class="hl-brackets">)</span><span class="hl-code">;
 
   </span><span class="hl-identifier">area</span><span class="hl-code"> = </span><span class="hl-identifier">Rect</span><span class="hl-code">.</span><span class="hl-identifier">getArea</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">;
   
   </span><span class="hl-comment">// 输出对象的面积</span><span class="hl-comment"></span><span class="hl-code">
</span><span class="hl-identifier">cout</span><span class="hl-code"> &lt;&lt; </span><span class="hl-quotes">"</span><span class="hl-string">Total area: </span><span class="hl-quotes">"</span><span class="hl-code"> &lt;&lt; </span><span class="hl-identifier">Rect</span><span class="hl-code">.</span><span class="hl-identifier">getArea</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code"> &lt;&lt; </span><span class="hl-identifier">endl</span><span class="hl-code">;
 
   </span><span class="hl-comment">// 输出总花费</span><span class="hl-comment"></span><span class="hl-code">
</span><span class="hl-identifier">cout</span><span class="hl-code"> &lt;&lt; </span><span class="hl-quotes">"</span><span class="hl-string">Total paint cost: $</span><span class="hl-quotes">"</span><span class="hl-code"> &lt;&lt; </span><span class="hl-identifier">Rect</span><span class="hl-code">.</span><span class="hl-identifier">getCost</span><span class="hl-brackets">(</span><span class="hl-identifier">area</span><span class="hl-brackets">)</span><span class="hl-code"> &lt;&lt; </span><span class="hl-identifier">endl</span><span class="hl-code">;
 
   </span><span class="hl-reserved">return</span><span class="hl-code"> </span><span class="hl-number">0</span><span class="hl-code">;
</span><span class="hl-brackets">}</span></div>
</div>
</div>
<p>当上面的代码被编译和执行时，它会产生下列结果：</p>
<pre>
Total area: 35
Total paint cost: $2450
</pre>
</div>