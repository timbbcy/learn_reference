<div class="article-intro" id="content">
<h1>XPath、XQuery 以及 XSLT <span class="color_h1">函数</span>函数参考手册</h1>
<hr/>
<p class="intro">下面的参考手册定义了XPath 2.0，XQuery 1.0和XSLT 2.0中的函数。</p>
<hr/>
<h1>函数参考手册</h1>
<table border="0"><tr>
<td>
<ul>
<li><a href="#accessor">存取</a></li>
<li><a href="#error">错误和跟踪</a></li>
<li><a href="#numeric">数值</a></li>
<li><a href="#string">字符串</a></li>
</ul>
</td>
<td>
<ul>
<li><a href="#anyuri">AnyURI</a></li>
<li><a href="#boolean">逻辑</a></li>
<li><a href="#datetime">持续时间/日期/时间</a></li>
<li><a href="#qname">QName</a></li>
</ul>
</td>
<td>
<ul>
<li><a href="#node">节点</a></li>
<li><a href="#sequence">序列</a></li>
<li><a href="#context">Context</a></li>
</ul>
</td>
</tr></table>
<p><img alt="Note" src="/images/lamp.gif"/> 函数命名空间的默认前缀为 fn:</p>
<p><img alt="Note" src="/images/lamp.gif"/> 函数命名空间的 URI为 : http://www.w3.org/2005/xpath-functions</p>
<h3><a id="accessor">存取函数</a></h3>
<table class="reference">
<tr>
<th style="width:40%">名称</th>
<th style="width:60%">说明</th>
</tr>
<tr>
<td>fn:node-name(node)</td>
<td>返回参数节点的节点名称。</td>
</tr>
<tr>
<td>fn:nilled(node)</td>
<td>返回是否拒绝参数节点的布尔值。</td>
</tr>
<tr>
<td>fn:data(item.item,...)</td>
<td>接受项目序列，并返回原子值序列。</td>
</tr>
<tr>
<td>
<ul><li>fn:base-uri()</li>
<li>fn:base-uri(node)</li></ul></td>
<td>返回当前节点或指定节点的 base-uri 属性的值。</td>
</tr>
<tr>
<td>fn:document-uri(node)</td>
<td>返回指定节点的 document-uri 属性的值。</td>
</tr>
</table>
<h3><a id="error">错误和跟踪函数</a></h3>
<table class="reference">
<tr>
<th style="width:40%">名称</th>
<th style="width:60%">说明</th>
</tr>
<tr>
<td>
<ul>
<li>fn:error()</li>
<li>fn:error(error)</li>
<li>fn:error(error,description)</li>
<li>fn:error(error,description,error-object)</li>
</ul>
</td>
<td>
<p>例子：error(fn:QName('http://example.com/test', 'err:toohigh'), 'Error: Price is too high')</p>
<p>结果：向外部处理环境返回 http://example.com/test#toohigh 以及字符串 "Error: Price is too high"。</p>
</td>
</tr>
<tr>
<td>fn:trace(value,label)</td>
<td>用于对查询进行 debug。</td>
</tr>
</table>
<h3><a id="numeric">有关数值的函数</a></h3>
<table class="reference">
<tr>
<th style="width:40%">名称</th>
<th style="width:60%">说明</th>
</tr>
<tr>
<td>fn:number(arg)</td>
<td>
<p>返回参数的数值。参数可以是布尔值、字符串或节点集。</p>
<p>例子：number('100')</p>
<p>结果：100</p>
</td>
</tr>
<tr>
<td>fn:abs(num)</td>
<td>
<p>返回参数的绝对值。</p>
<p>例子：abs(3.14)</p>
<p>结果：3.14</p>
<p>例子：abs(-3.14)</p>
<p>结果：3.14</p>
</td>
</tr>
<tr>
<td>fn:ceiling(num)</td>
<td>
<p>返回大于 num 参数的最小整数。</p>
<p>例子：ceiling(3.14)</p>
<p>结果：4</p>
</td>
</tr>
<tr>
<td>fn:floor(num)</td>
<td>
<p>返回不大于 num 参数的最大整数。</p>
<p>例子：floor(3.14)</p>
<p>结果：3</p>
</td>
</tr>
<tr>
<td>fn:round(num)</td>
<td>
<p>把 num 参数舍入为最接近的整数。</p>
<p>例子：round(3.14)</p>
<p>结果：3</p>
</td>
</tr>
<tr>
<td>fn:round-half-to-even()</td>
<td>
<p>例子：round-half-to-even(0.5)</p>
<p>结果：0 </p>
<p>例子：round-half-to-even(1.5)</p>
<p>结果：2</p>
<p>例子：round-half-to-even(2.5)</p>
<p>结果：2</p>
</td>
</tr>
</table>
<h3><a id="string">有关字符串的函数</a></h3>
<table class="reference">
<tr>
<th style="width:40%">名称</th>
<th style="width:60%">说明</th>
</tr>
<tr>
<td>fn:string(arg)</td>
<td>
<p>返回参数的字符串值。参数可以是数字、逻辑值或节点集。</p>
<p>例子：string(314)</p>
<p>结果："314"</p>
</td>
</tr>
<tr>
<td>fn:codepoints-to-string(int,int,...)</td>
<td>
<p>根据代码点序列返回字符串。</p>
<p>例子：codepoints-to-string(84, 104, 233, 114, 232, 115, 101)</p>
<p>结果：'Thérèse'</p>
</td>
</tr>
<tr>
<td>fn:string-to-codepoints(string)</td>
<td>
<p>根据字符串返回代码点序列。</p>
<p>例子：string-to-codepoints("Thérèse")</p>
<p>结果：84, 104, 233, 114, 232, 115, 101</p>
</td>
</tr>
<tr>
<td>fn:codepoint-equal(comp1,comp2)</td>
<td>根据 Unicode 代码点对照，如果 comp1 的值等于 comp2 的值，则返回 true。(http://www.w3.org/2005/02/xpath-functions/collation/codepoint)，否则返回 false。</td>
</tr>
<tr>
<td>
<ul>
<li>fn:compare(comp1,comp2)</li>
<li>fn:compare(comp1,comp2,collation)</li>
</ul>
</td>
<td>
<p>如果 comp1 小于 comp2，则返回 -1。如果 comp1 等于 comp2，则返回 0。如果 comp1 大于 comp2，则返回 1。（根据所用的对照规则）。</p>
<p>例子：compare('ghi', 'ghi')</p>
<p>结果：0</p>
</td>
</tr>
<tr>
<td>fn:concat(string,string,...)</td>
<td>
<p>返回字符串的拼接。</p>
<p>例子：concat('XPath ','is ','FUN!')</p>
<p>结果：'XPath is FUN!'</p>
</td>
</tr>
<tr>
<td>fn:string-join((string,string,...),sep)</td>
<td>
<p>使用 sep 参数作为分隔符，来返回 string 参数拼接后的字符串。</p>
<p>例子：string-join(('We', 'are', 'having', 'fun!'), ' ')</p>
<p>结果：' We are having fun! '</p>
<p>例子：string-join(('We', 'are', 'having', 'fun!'))</p>
<p>结果：'Wearehavingfun!'</p>
<p>例子：string-join((), 'sep')</p>
<p>结果：''</p>
</td>
</tr>
<tr>
<td>
<ul>
<li>fn:substring(string,start,len)</li>
<li>fn:substring(string,start)</li>
</ul>
</td>
<td>
<p>返回从 start 位置开始的指定长度的子字符串。第一个字符的下标是 1。如果省略 len 参数，则返回从位置 start 到字符串末尾的子字符串。</p>
<p>例子：substring('Beatles',1,4)</p>
<p>结果：'Beat'</p>
<p>例子：substring('Beatles',2)</p>
<p>结果：'eatles'</p>
</td>
</tr>
<tr>
<td>
<ul>
<li>fn:string-length(string)</li>
<li>fn:string-length()</li>
</ul>
</td>
<td>
<p>返回指定字符串的长度。如果没有 string 参数，则返回当前节点的字符串值的长度。</p>
<p>例子：string-length('Beatles')</p>
<p>结果：7</p>
</td>
</tr>
<tr>
<td>
<ul>
<li>fn:normalize-space(string)</li>
<li>fn:normalize-space()</li>
</ul>
</td>
<td>
<p>删除指定字符串的开头和结尾的空白，并把内部的所有空白序列替换为一个，然后返回结果。如果没有 string 参数，则处理当前节点。</p>
<p>例子：normalize-space(' The   XML ')</p>
<p>结果：'The XML'</p>
</td>
</tr>
<tr>
<td>fn:normalize-unicode()</td>
<td>执行 Unicode 规格化。</td>
</tr>
<tr>
<td>fn:upper-case(string)</td>
<td>
<p>把 string 参数转换为大写。</p>
<p>例子：upper-case('The XML')</p>
<p>结果：'THE XML'</p>
</td>
</tr>
<tr>
<td>fn:lower-case(string)</td>
<td>
<p>把 string 参数转换为小写。</p>
<p>例子：lower-case('The XML')</p>
<p>结果：'the xml'</p>
</td>
</tr>
<tr>
<td>fn:translate(string1,string2,string3)</td>
<td>
<p>把 string1 中的 string2 替换为 string3。</p>
<p>例子：translate('12:30','30','45')</p>
<p>结果：'12:45'</p>
<p>例子：translate('12:30','03','54')</p>
<p>结果：'12:45'</p>
<p>例子：translate('12:30','0123','abcd')</p>
<p>结果：'bc:da'</p>
</td>
</tr>
<tr>
<td>fn:escape-uri(stringURI,esc-res)</td>
<td>
<p>例子：escape-uri("http://example.com/test#car", true())</p>
<p>结果："http%3A%2F%2Fexample.com%2Ftest#car"</p>
<p>例子：escape-uri("http://example.com/test#car", false())</p>
<p>结果："http://example.com/test#car"</p>
<p>例子：escape-uri ("http://example.com/~bébé", false())</p>
<p>结果："http://example.com/~b%C3%A9b%C3%A9"</p>
</td>
</tr>
<tr>
<td>fn:contains(string1,string2)</td>
<td>
<p>如果 string1 包含 string2，则返回 true，否则返回 false。</p>
<p>例子：contains('XML','XM')</p>
<p>结果：true</p>
</td>
</tr>
<tr>
<td>fn:starts-with(string1,string2)</td>
<td>
<p>如果 string1 以 string2 开始，则返回 true，否则返回 false。</p>
<p>例子：starts-with('XML','X')</p>
<p>结果：true</p>
</td>
</tr>
<tr>
<td>fn:ends-with(string1,string2)</td>
<td>
<p>如果 string1 以 string2 结尾，则返回 true，否则返回 false。</p>
<p>例子：ends-with('XML','X')</p>
<p>结果：false</p>
</td>
</tr>
<tr>
<td>fn:substring-before(string1,string2)</td>
<td>
<p>返回 string2 在 string1 中出现之前的子字符串。</p>
<p>例子：substring-before('12/10','/')</p>
<p>结果：'12'</p>
</td>
</tr>
<tr>
<td>fn:substring-after(string1,string2)</td>
<td>
<p>返回 string2 在 string1 中出现之后的子字符串。</p>
<p>例子：substring-after('12/10','/')</p>
<p>结果：'10'</p>
</td>
</tr>
<tr>
<td>fn:matches(string,pattern)</td>
<td>
<p>如果 string 参数匹配指定的模式，则返回 true，否则返回 false。</p>
<p>例子：matches("Merano", "ran")</p>
<p>结果：true</p>
</td>
</tr>
<tr>
<td>fn:replace(string,pattern,replace)</td>
<td>
<p>把指定的模式替换为 replace 参数，并返回结果。</p>
<p>例子：replace("Bella Italia", "l", "*")</p>
<p>结果：'Be**a Ita*ia'</p>
<p>例子：replace("Bella Italia", "l", "")</p>
<p>结果：'Bea Itaia'</p>
</td>
</tr>
<tr>
<td>fn:tokenize(string,pattern)</td>
<td>
<p>例子：tokenize("XPath is fun", "\s+")</p>
<p>结果：("XPath", "is", "fun")</p>
</td>
</tr>
</table>
<h3><a id="anyuri">针对 anyURI 的函数</a></h3>
<table class="reference">
<tr>
<th style="width:40%">名称</th>
<th style="width:60%">说明</th>
</tr>
<tr>
<td>fn:resolve-uri(relative,base)</td>
<td> </td>
</tr>
</table>
<h3><a id="boolean">关于布尔值的函数</a></h3>
<table class="reference">
<tr>
<th style="width:40%">名称</th>
<th style="width:60%">说明</th>
</tr>
<tr>
<td>fn:boolean(arg)</td>
<td>返回数字、字符串或节点集的布尔值。</td>
</tr>
<tr>
<td>fn:not(arg)</td>
<td>
<p>首先通过 boolean() 函数把参数还原为一个布尔值。如果该布尔值为 false，则返回 true，否则返回 true。</p>
<p>例子：not(true())</p>
<p>结果：false</p>
</td>
</tr>
<tr>
<td>fn:true()</td>
<td>
<p>返回布尔值 true。</p>
<p>例子：true()</p>
<p>结果：true</p>
</td>
</tr>
<tr>
<td>fn:false()</td>
<td>
<p>返回布尔值 false。</p>
<p>例子：false()</p>
<p>结果：false</p>
</td>
</tr>
</table>
<h3><a id="datetime">有关持续时间、日期和时间的函数</a></h3>
<p>日期、时间、持续时间的组件提取函数</p>
<table class="reference">
<tr>
<th style="width:40%">名称</th>
<th style="width:60%">说明</th>
</tr>
<tr>
<td>fn:dateTime(date,time)</td>
<td>把参数转换为日期和时间。</td>
</tr>
<tr>
<td>fn:years-from-duration(datetimedur)</td>
<td>返回参数值的年份部分的整数，以标准词汇表示法来表示。</td>
</tr>
<tr>
<td>fn:months-from-duration(datetimedur)</td>
<td>返回参数值的月份部分的整数，以标准词汇表示法来表示。</td>
</tr>
<tr>
<td>fn:days-from-duration(datetimedur)</td>
<td>返回参数值的天部分的整数，以标准词汇表示法来表示。</td>
</tr>
<tr>
<td>fn:hours-from-duration(datetimedur)</td>
<td>返回参数值的小时部分的整数，以标准词汇表示法来表示。</td>
</tr>
<tr>
<td>fn:minutes-from-duration(datetimedur)</td>
<td>返回参数值的分钟部分的整数，以标准词汇表示法来表示。</td>
</tr>
<tr>
<td>fn:seconds-from-duration(datetimedur)</td>
<td>返回参数值的分钟部分的十进制数，以标准词汇表示法来表示。</td>
</tr>
<tr>
<td>fn:year-from-dateTime(datetime)</td>
<td>
<p>返回参数本地值的年部分的整数。</p>
<p>例子：year-from-dateTime(xs:dateTime("2005-01-10T12:30-04:10"))</p>
<p>结果：2005</p>
</td>
</tr>
<tr>
<td>fn:month-from-dateTime(datetime)</td>
<td>
<p>返回参数本地值的月部分的整数。</p>
<p>例子：month-from-dateTime(xs:dateTime("2005-01-10T12:30-04:10"))</p>
<p>结果：01</p>
</td>
</tr>
<tr>
<td>fn:day-from-dateTime(datetime)</td>
<td>
<p>返回参数本地值的天部分的整数。</p>
<p>例子：day-from-dateTime(xs:dateTime("2005-01-10T12:30-04:10"))</p>
<p>结果：10</p>
</td>
</tr>
<tr>
<td>fn:hours-from-dateTime(datetime)</td>
<td>
<p>返回参数本地值的小时部分的整数。</p>
<p>例子：hours-from-dateTime(xs:dateTime("2005-01-10T12:30-04:10"))</p>
<p>结果：12</p>
</td>
</tr>
<tr>
<td>fn:minutes-from-dateTime(datetime)</td>
<td>
<p>返回参数本地值的分钟部分的整数。</p>
<p>例子：minutes-from-dateTime(xs:dateTime("2005-01-10T12:30-04:10"))</p>
<p>结果：30</p>
</td>
</tr>
<tr>
<td>fn:seconds-from-dateTime(datetime)</td>
<td>
<p>返回参数本地值的秒部分的十进制数。</p>
<p>例子：seconds-from-dateTime(xs:dateTime("2005-01-10T12:30:00-04:10"))</p>
<p>结果：0</p>
</td>
</tr>
<tr>
<td>fn:timezone-from-dateTime(datetime)</td>
<td>返回参数的时区部分，如果存在。</td>
</tr>
<tr>
<td>fn:year-from-date(date)</td>
<td>
<p>返回参数本地值中表示年的整数。</p>
<p>例子：year-from-date(xs:date("2005-04-23"))</p>
<p>结果：2005</p>
</td>
</tr>
<tr>
<td>fn:month-from-date(date)</td>
<td>
<p>返回参数本地值中表示月的整数。</p>
<p>例子：month-from-date(xs:date("2005-04-23"))</p>
<p>结果：4</p>
</td>
</tr>
<tr>
<td>fn:day-from-date(date)</td>
<td>
<p>返回参数本地值中表示天的整数。</p>
<p>例子：day-from-date(xs:date("2005-04-23"))</p>
<p>结果：23</p>
</td>
</tr>
<tr>
<td>fn:timezone-from-date(date)</td>
<td>返回参数的时区部分，如果存在。</td>
</tr>
<tr>
<td>fn:hours-from-time(time)</td>
<td>
<p>返回参数本地值中表示小时部分的整数。</p>
<p>例子：hours-from-time(xs:time("10:22:00"))</p>
<p>结果：10</p>
</td>
</tr>
<tr>
<td>fn:minutes-from-time(time)</td>
<td>
<p>返回参数本地值中表示分钟部分的整数。</p>
<p>例子：minutes-from-time(xs:time("10:22:00"))</p>
<p>结果：22</p>
</td>
</tr>
<tr>
<td>fn:seconds-from-time(time)</td>
<td>
<p>返回参数本地值中表示秒部分的整数。</p>
<p>例子：seconds-from-time(xs:time("10:22:00"))</p>
<p>结果：0</p>
</td>
</tr>
<tr>
<td>fn:timezone-from-time(time)</td>
<td>返回参数的时区部分，如果存在。</td>
</tr>
<tr>
<td>fn:adjust-dateTime-to-timezone(datetime,timezone)</td>
<td>如果 timezone 参数为空，则返回没有时区的 dateTime。否则返回带有时区的 dateTime。</td>
</tr>
<tr>
<td>fn:adjust-date-to-timezone(date,timezone)</td>
<td>如果 timezone 参数为空，则返回没有时区的 date。否则返回带有时区的 date。</td>
</tr>
<tr>
<td>fn:adjust-time-to-timezone(time,timezone)</td>
<td>如果 timezone 参数为空，则返回没有时区的 time。否则返回带有时区的 time。</td>
</tr>
</table>
<h3><a id="qname">与 QNames 相关的函数</a></h3>
<table class="reference">
<tr>
<th style="width:40%">名称</th>
<th style="width:60%">说明</th>
</tr>
<tr>
<td>fn:QName()</td>
<td> </td>
</tr>
<tr>
<td>fn:local-name-from-QName()</td>
<td> </td>
</tr>
<tr>
<td>fn:namespace-uri-from-QName()</td>
<td> </td>
</tr>
<tr>
<td>fn:namespace-uri-for-prefix()</td>
<td> </td>
</tr>
<tr>
<td>fn:in-scope-prefixes()</td>
<td> </td>
</tr>
<tr>
<td>fn:resolve-QName()</td>
<td> </td>
</tr>
</table>
<h3><a id="node">关于节点的函数</a></h3>
<table class="reference">
<tr>
<th style="width:40%">名称</th>
<th style="width:60%">说明</th>
</tr>
<tr>
<td>
<ul>
<li>fn:name()</li>
<li>fn:name(nodeset)</li>
</ul>
</td>
<td>返回当前节点的名称或指定节点集中的第一个节点。</td>
</tr>
<tr>
<td>
<ul>
<li>fn:local-name()</li>
<li>fn:local-name(nodeset)</li>
</ul>
</td>
<td>返回当前节点的名称或指定节点集中的第一个节点 - 不带有命名空间前缀。</td>
</tr>
<tr>
<td>
<ul>
<li>fn:namespace-uri()</li>
<li>fn:namespace-uri(nodeset)</li>
</ul>
</td>
<td>返回当前节点或指定节点集中第一个节点的命名空间 URI。</td>
</tr>
<tr>
<td>fn:lang(lang)</td>
<td>
<p>如果当前节点的语言匹配指定的语言，则返回 true。</p>
<p>例子：Lang("en") is true for
&lt;p xml:lang="en"&gt;...&lt;/p&gt;</p>
<p>例子：Lang("de") is false for
&lt;p xml:lang="en"&gt;...&lt;/p&gt;</p>
</td>
</tr>
<tr>
<td>
<ul>
<li>fn:root()</li>
<li>fn:root(node)</li>
</ul>
</td>
<td>返回当前节点或指定的节点所属的节点树的根节点。通常是文档节点。</td>
</tr>
</table>
<h3><a id="sequence">有关序列的函数</a></h3>
<h3>一般性的函数</h3>
<table class="reference">
<tr>
<th style="width:40%">名称</th>
<th style="width:60%">说明</th>
</tr>
<tr>
<td>fn:index-of((item,item,...),searchitem)</td>
<td>
<p>返回在项目序列中等于 searchitem 参数的位置。</p>
<p>例子：index-of ((15, 40, 25, 40, 10), 40)</p>
<p>结果：(2, 4)</p>
<p>例子：index-of (("a", "dog", "and", "a", "duck"), "a")</p>
<p>Result (1, 4)</p>
<p>例子：index-of ((15, 40, 25, 40, 10), 18)</p>
<p>结果：()</p>
</td>
</tr>
<tr>
<td>fn:remove((item,item,...),position)</td>
<td>
<p>返回由 item 参数构造的新序列 - 同时删除 position 参数指定的项目。</p>
<p>例子：remove(("ab", "cd", "ef"), 0)</p>
<p>结果：("ab", "cd", "ef")</p>
<p>例子：remove(("ab", "cd", "ef"), 1)</p>
<p>结果：("cd", "ef")</p>
<p>例子：remove(("ab", "cd", "ef"), 4)</p>
<p>结果：("ab", "cd", "ef")</p>
</td>
</tr>
<tr>
<td>fn:empty(item,item,...)</td>
<td>
<p>如果参数值是空序列，则返回 true，否则返回 false。</p>
<p>例子：empty(remove(("ab", "cd"), 1))</p>
<p>结果：false</p>
</td>
</tr>
<tr>
<td>fn:exists(item,item,...)</td>
<td>
<p>如果参数值不是空序列，则返回 true，否则返回 false。</p>
<p>例子：exists(remove(("ab"), 1))</p>
<p>结果：false</p>
</td>
</tr>
<tr>
<td>fn:distinct-values((item,item,...),collation)</td>
<td>
<p>返回唯一不同的值。</p>
<p>例子：distinct-values((1, 2, 3, 1, 2))</p>
<p>结果：(1, 2, 3)</p>
</td>
</tr>
<tr>
<td>fn:insert-before((item,item,...),pos,inserts)</td>
<td>
<p>返回由 item 参数构造的新序列 - 同时在 pos 参数指定位置插入 inserts 参数的值。</p>
<p>例子：insert-before(("ab", "cd"), 0, "gh")</p>
<p>结果：("gh", "ab", "cd")</p>
<p>例子：insert-before(("ab", "cd"), 1, "gh")</p>
<p>结果：("gh", "ab", "cd")</p>
<p>例子：insert-before(("ab", "cd"), 2, "gh")</p>
<p>结果：("ab", "gh", "cd")</p>
<p>例子：insert-before(("ab", "cd"), 5, "gh")</p>
<p>结果：("ab", "cd", "gh")</p>
</td>
</tr>
<tr>
<td>fn:reverse((item,item,...))</td>
<td>
<p>返回指定的项目的颠倒顺序。</p>
<p>例子：reverse(("ab", "cd", "ef"))</p>
<p>结果：("ef", "cd", "ab")</p>
<p>例子：reverse(("ab"))</p>
<p>结果：("ab")</p>
</td>
</tr>
<tr>
<td>fn:subsequence((item,item,...),start,len)</td>
<td>
<p>返回 start 参数指定的位置返回项目序列，序列的长度由 len 参数指定。第一个项目的位置是 1。</p>
<p>例子：subsequence(($item1, $item2, $item3,...), 3)</p>
<p>结果：($item3, ...)</p>
<p>例子：subsequence(($item1, $item2, $item3, ...), 2, 2)</p>
<p>结果：($item2, $item3)</p>
</td>
</tr>
<tr>
<td>fn:unordered((item,item,...))</td>
<td>依据实现决定的顺序来返回项目。</td>
</tr>
</table>
<h3>测试序列容量的函数</h3>
<table class="reference">
<tr>
<th style="width:40%">名称</th>
<th style="width:60%">说明</th>
</tr>
<tr>
<td>fn:zero-or-one(item,item,...)</td>
<td>如果参数包含零个或一个项目，则返回参数，否则生成错误。</td>
</tr>
<tr>
<td>fn:one-or-more(item,item,...)</td>
<td>如果参数包含一个或多个项目，则返回参数，否则生成错误。</td>
</tr>
<tr>
<td>fn:exactly-one(item,item,...)</td>
<td>如果参数包含一个项目，则返回参数，否则生成错误。</td>
</tr>
</table>
<h3>Equals, Union, Intersection and Except </h3>
<table class="reference">
<tr>
<th style="width:40%">名称</th>
<th style="width:60%">说明</th>
</tr>
<tr>
<td>fn:deep-equal(param1,param2,collation)</td>
<td>如果 param1 和 param2 与彼此相等（deep-equal），则返回 true，否则返回 false。</td>
</tr>
</table>
<h3>合计函数</h3>
<table class="reference">
<tr>
<th style="width:40%">名称</th>
<th style="width:60%">说明</th>
</tr>
<tr>
<td>fn:count((item,item,...))</td>
<td>返回节点的数量。</td>
</tr>
<tr>
<td>fn:avg((arg,arg,...))</td>
<td>
返回参数值的平均数。
例子：avg((1,2,3))
结果：2
</td>
</tr>
<tr>
<td>fn:max((arg,arg,...))</td>
<td>
返回大于其它参数的参数。
例子：max((1,2,3))
结果：3

例子：max(('a', 'k'))
结果：'k'
</td>
</tr>
<tr>
<td>fn:min((arg,arg,...))</td>
<td>
返回小于其它参数的参数。
例子：min((1,2,3))
结果：1

例子：min(('a', 'k'))
结果：'a'
</td>
</tr>
<tr>
<td>fn:sum(arg,arg,...)</td>
<td>返回指定节点集中每个节点的数值的总和。</td>
</tr>
</table>
<h3>生成序列的函数</h3>
<table class="reference">
<tr>
<th style="width:40%">名称</th>
<th style="width:60%">说明</th>
</tr>
<tr>
<td>fn:id((string,string,...),node)</td>
<td>Returns a sequence of element nodes that have an ID value equal to the value of one or more of the values specified in the string argument</td>
</tr>
<tr>
<td>fn:idref((string,string,...),node)</td>
<td>Returns a sequence of element or attribute nodes that have an IDREF value equal to the value of one or more of the values specified in the string argument</td>
</tr>
<tr>
<td>fn:doc(URI)</td>
<td> </td>
</tr>
<tr>
<td>fn:doc-available(URI)</td>
<td>如果 doc() 函数返回文档节点，则返回 true，否则返回 false。</td>
</tr>
<tr>
<td>
<ul>
<li>fn:collection()</li>
<li>fn:collection(string)</li>
</ul>
</td>
<td> </td>
</tr>
</table>
<h3><a id="context">上下文函数</a></h3>
<table class="reference">
<tr>
<th style="width:40%">名称</th>
<th style="width:60%">说明</th>
</tr>
<tr>
<td>fn:position()</td>
<td>
<p>返回当前正在被处理的节点的 index 位置。</p>
<p>例子：//book[position()&lt;=3]</p>
<p>结果：选择前三个 book 元素 </p>
</td>
</tr>
<tr>
<td>fn:last()</td>
<td>
<p>返回在被处理的节点列表中的项目数目。</p>
<p>例子：//book[last()]</p>
<p>结果：选择最后一个 book 元素</p>
</td>
</tr>
<tr>
<td>fn:current-dateTime()</td>
<td>返回当前的 dateTime（带有时区）。</td>
</tr>
<tr>
<td>fn:current-date()</td>
<td>返回当前的日期（带有时区）。</td>
</tr>
<tr>
<td>fn:current-time()</td>
<td>返回当前的时间（带有时区）。</td>
</tr>
<tr>
<td>fn:implicit-timezone()</td>
<td>返回隐式时区的值。</td>
</tr>
<tr>
<td>fn:default-collation()</td>
<td>返回默认对照的值。</td>
</tr>
<tr>
<td>fn:static-base-uri()</td>
<td>返回 base-uri 的值。</td>
</tr>
</table>
</div>