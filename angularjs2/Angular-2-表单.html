<div class="article-intro" id="content">
<h1>Angular 2 表单</h1>
<p>本章节我们将为大家介绍如何使用组件和模板构建一个 Angular 表单。</p>
<p>利用 Angular 模板，我们可以创建各种类型表单，例如：登录表单，联系人表单，商品详情表单等，而且我们也为这些表单的字段添加数据校验。</p>
<p>接下来我们一步步来实现表单的功能。</p>
<hr/>
<h2>创建项目</h2>
<p>导入初始化项目。</p>
<p>完整的项目创建可以参考：<a href="/angularjs2/angularjs2-typescript-setup.html" target="_blank">Angular 2 TypeScript 环境配置</a></p>
<p>或者直接下载源代码：<a class="download" download="" href="http://runoobstatic.oss-cn-hangzhou.aliyuncs.com/download/angular-quickstart.zip">点我下载</a></p>
<p>解压后，修改目录名为angular-forms，修改 angular-forms/package.json 文件中的 <b>"name": "angular-quickstart"</b> 为  <b>"name": "angular-forms"</b>。
</p>
<p>完成后，我们执行 <b>cnpm install</b> 来载入依赖包。</p>
<h3>创建 Site 模型</h3>
<p>以下创建了一个简单的模型类 Site，包含了三个必需字段：id，name，url，一个可选字段：alexa。</p>
<p>在 angular-forms/app 目录下创建 site.ts 文件，代码如下：</p>
<div class="example">
<h2 class="example">app/site.ts 文件：</h2>
<div class="example_code">
<div class="hl-main"><span class="hl-reserved">export</span><span class="hl-code"> </span><span class="hl-reserved">class</span><span class="hl-code"> </span><span class="hl-identifier">Site</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
</span><span class="hl-identifier">constructor</span><span class="hl-brackets">(</span><span class="hl-code">
</span><span class="hl-reserved">public</span><span class="hl-code"> </span><span class="hl-identifier">id</span><span class="hl-code">: </span><span class="hl-identifier">number</span><span class="hl-code">,
    </span><span class="hl-reserved">public</span><span class="hl-code"> </span><span class="hl-identifier">name</span><span class="hl-code">: </span><span class="hl-identifier">string</span><span class="hl-code">,
    </span><span class="hl-reserved">public</span><span class="hl-code"> </span><span class="hl-identifier">url</span><span class="hl-code">: </span><span class="hl-identifier">string</span><span class="hl-code">,
    </span><span class="hl-reserved">public</span><span class="hl-code"> </span><span class="hl-identifier">alexa</span><span class="hl-code">?: </span><span class="hl-identifier">number</span><span class="hl-code">
</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code"> </span><span class="hl-brackets">}</span><span class="hl-code">
</span><span class="hl-brackets">}</span></div>
</div>
</div>
<p>以下代码中，标为 public 的为公有字段，alexa 后添加一个问号(?)表示可选字段。</p>
<h3>创建一个表单组件</h3>
<p>每个 Angular 表单分为两部分：一个基于 HTML 的模板，和一个基于代码的组件，它用来处理数据和用户交互。</p>
<p>在 angular-forms/app 目录下创建 site-form.component.ts 文件，代码如下：</p>
<div class="example">
<h2 class="example">app/site-form.component.ts 文件：</h2>
<div class="example_code">
<div class="hl-main"><span class="hl-reserved">import</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code"> </span><span class="hl-identifier">Component</span><span class="hl-code"> </span><span class="hl-brackets">}</span><span class="hl-code"> </span><span class="hl-identifier">from</span><span class="hl-code"> </span><span class="hl-quotes">'</span><span class="hl-string">@angular/core</span><span class="hl-quotes">'</span><span class="hl-code">;
</span><span class="hl-reserved">import</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code"> </span><span class="hl-identifier">Site</span><span class="hl-code"> </span><span class="hl-brackets">}</span><span class="hl-code"> </span><span class="hl-identifier">from</span><span class="hl-code"> </span><span class="hl-quotes">'</span><span class="hl-string">./site</span><span class="hl-quotes">'</span><span class="hl-code">;
 
@</span><span class="hl-identifier">Component</span><span class="hl-brackets">(</span><span class="hl-brackets">{</span><span class="hl-code">
</span><span class="hl-identifier">moduleId</span><span class="hl-code">: </span><span class="hl-identifier">module</span><span class="hl-code">.</span><span class="hl-identifier">id</span><span class="hl-code">,
  </span><span class="hl-identifier">selector</span><span class="hl-code">: </span><span class="hl-quotes">'</span><span class="hl-string">site-form</span><span class="hl-quotes">'</span><span class="hl-code">,
  </span><span class="hl-identifier">templateUrl</span><span class="hl-code">: </span><span class="hl-quotes">'</span><span class="hl-string">site-form.component.html</span><span class="hl-quotes">'</span><span class="hl-code">
</span><span class="hl-brackets">}</span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-reserved">export</span><span class="hl-code"> </span><span class="hl-reserved">class</span><span class="hl-code"> </span><span class="hl-identifier">SiteFormComponent</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
</span><span class="hl-identifier">urls</span><span class="hl-code"> = </span><span class="hl-brackets">[</span><span class="hl-quotes">'</span><span class="hl-string">www.runoob.com</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-quotes">'</span><span class="hl-string">www.google.com</span><span class="hl-quotes">'</span><span class="hl-code">,
            </span><span class="hl-quotes">'</span><span class="hl-string">www.taobao.com</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-quotes">'</span><span class="hl-string">www.facebook.com</span><span class="hl-quotes">'</span><span class="hl-brackets">]</span><span class="hl-code">;
  </span><span class="hl-identifier">model</span><span class="hl-code"> = </span><span class="hl-reserved">new</span><span class="hl-code"> </span><span class="hl-identifier">Site</span><span class="hl-brackets">(</span><span class="hl-number">1</span><span class="hl-code">, </span><span class="hl-quotes">'</span><span class="hl-string">菜鸟教程</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">urls</span><span class="hl-brackets">[</span><span class="hl-number">0</span><span class="hl-brackets">]</span><span class="hl-code">, </span><span class="hl-number">10000</span><span class="hl-brackets">)</span><span class="hl-code">;
  </span><span class="hl-identifier">submitted</span><span class="hl-code"> = </span><span class="hl-reserved">false</span><span class="hl-code">;
  </span><span class="hl-builtin">onSubmit</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code"> </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">submitted</span><span class="hl-code"> = </span><span class="hl-reserved">true</span><span class="hl-code">; </span><span class="hl-brackets">}</span><span class="hl-code">
</span><span class="hl-comment">//</span><span class="hl-comment"> TODO: 完成后移除</span><span class="hl-comment"></span><span class="hl-code">
</span><span class="hl-identifier">get</span><span class="hl-code"> </span><span class="hl-identifier">diagnostic</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code"> </span><span class="hl-reserved">return</span><span class="hl-code"> </span><span class="hl-identifier">JSON</span><span class="hl-code">.</span><span class="hl-identifier">stringify</span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">model</span><span class="hl-brackets">)</span><span class="hl-code">; </span><span class="hl-brackets">}</span><span class="hl-code">
</span><span class="hl-brackets">}</span></div>
</div>
</div>
<p>实例中导入了 Component 装饰器和 Site 模型。</p><p>@Component 选择器 "site-form" 表示我们可以通过一个 <b>&lt;site-form&gt;</b> 标签，把此表单扔进父模板中。</p>
<p>templateUrl 属性指向一个独立的HTML模板文件，名叫 site-form.component.html。</p>
<p>diagnostic 属性用于返回这个模型的JSON形式。</p>
<h3>定义应用的根模块</h3>
<p>修改 app.module.ts 来定义应用的根模块，模块可中指定了引用到的外部及声明属于本模块中的组件，比如 SiteFormComponent。</p>
<p>因为模板驱动的表单有它们自己的模块，所以我们得把 FormsModule 添加到本应用的 imports 数组中，这样我们才能使用表单。</p>
<p>app/app.module.ts 文件代码如下</p>
<div class="example">
<h2 class="example">app/app.module.ts 文件：</h2>
<div class="example_code">
<div class="hl-main"><span class="hl-reserved">import</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code"> </span><span class="hl-identifier">NgModule</span><span class="hl-code"> </span><span class="hl-brackets">}</span><span class="hl-code"> </span><span class="hl-identifier">from</span><span class="hl-code"> </span><span class="hl-quotes">'</span><span class="hl-string">@angular/core</span><span class="hl-quotes">'</span><span class="hl-code">;
</span><span class="hl-reserved">import</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code"> </span><span class="hl-identifier">BrowserModule</span><span class="hl-code"> </span><span class="hl-brackets">}</span><span class="hl-code"> </span><span class="hl-identifier">from</span><span class="hl-code"> </span><span class="hl-quotes">'</span><span class="hl-string">@angular/platform-browser</span><span class="hl-quotes">'</span><span class="hl-code">;
</span><span class="hl-reserved">import</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code"> </span><span class="hl-identifier">FormsModule</span><span class="hl-code"> </span><span class="hl-brackets">}</span><span class="hl-code"> </span><span class="hl-identifier">from</span><span class="hl-code"> </span><span class="hl-quotes">'</span><span class="hl-string">@angular/forms</span><span class="hl-quotes">'</span><span class="hl-code">;
</span><span class="hl-reserved">import</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code"> </span><span class="hl-identifier">AppComponent</span><span class="hl-code"> </span><span class="hl-brackets">}</span><span class="hl-code"> </span><span class="hl-identifier">from</span><span class="hl-code"> </span><span class="hl-quotes">'</span><span class="hl-string">./app.component</span><span class="hl-quotes">'</span><span class="hl-code">;
</span><span class="hl-reserved">import</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code"> </span><span class="hl-identifier">SiteFormComponent</span><span class="hl-code"> </span><span class="hl-brackets">}</span><span class="hl-code"> </span><span class="hl-identifier">from</span><span class="hl-code"> </span><span class="hl-quotes">'</span><span class="hl-string">./site-form.component</span><span class="hl-quotes">'</span><span class="hl-code">;
 
@</span><span class="hl-identifier">NgModule</span><span class="hl-brackets">(</span><span class="hl-brackets">{</span><span class="hl-code">
</span><span class="hl-identifier">imports</span><span class="hl-code">: </span><span class="hl-brackets">[</span><span class="hl-code">
</span><span class="hl-identifier">BrowserModule</span><span class="hl-code">,
    </span><span class="hl-identifier">FormsModule</span><span class="hl-code">
</span><span class="hl-brackets">]</span><span class="hl-code">,
  </span><span class="hl-identifier">declarations</span><span class="hl-code">: </span><span class="hl-brackets">[</span><span class="hl-code">
</span><span class="hl-identifier">AppComponent</span><span class="hl-code">,
    </span><span class="hl-identifier">SiteFormComponent</span><span class="hl-code">
</span><span class="hl-brackets">]</span><span class="hl-code">,
  </span><span class="hl-identifier">bootstrap</span><span class="hl-code">: </span><span class="hl-brackets">[</span><span class="hl-code"> </span><span class="hl-identifier">AppComponent</span><span class="hl-code"> </span><span class="hl-brackets">]</span><span class="hl-code">
</span><span class="hl-brackets">}</span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-reserved">export</span><span class="hl-code"> </span><span class="hl-reserved">class</span><span class="hl-code"> </span><span class="hl-identifier">AppModule</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code"> </span><span class="hl-brackets">}</span></div>
</div>
</div>
<h3>创建根组件</h3>
<p>修改根组件文件 app.component.ts，将 SiteFormComponent 将被放在其中。</p>
<div class="example">
<h2 class="example">app/app.component.ts 文件：</h2>
<div class="example_code">
<div class="hl-main"><span class="hl-reserved">import</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code"> </span><span class="hl-identifier">Component</span><span class="hl-code"> </span><span class="hl-brackets">}</span><span class="hl-code"> </span><span class="hl-identifier">from</span><span class="hl-code"> </span><span class="hl-quotes">'</span><span class="hl-string">@angular/core</span><span class="hl-quotes">'</span><span class="hl-code">;
 
@</span><span class="hl-identifier">Component</span><span class="hl-brackets">(</span><span class="hl-brackets">{</span><span class="hl-code">
</span><span class="hl-identifier">selector</span><span class="hl-code">: </span><span class="hl-quotes">'</span><span class="hl-string">my-app</span><span class="hl-quotes">'</span><span class="hl-code">,
  </span><span class="hl-identifier">template</span><span class="hl-code">: </span><span class="hl-quotes">'</span><span class="hl-string">&lt;site-form&gt;&lt;/site-form&gt;</span><span class="hl-quotes">'</span><span class="hl-code">
</span><span class="hl-brackets">}</span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-reserved">export</span><span class="hl-code"> </span><span class="hl-reserved">class</span><span class="hl-code"> </span><span class="hl-identifier">AppComponent</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code"> </span><span class="hl-brackets">}</span></div>
</div>
</div>
<h3>创建一个初始 HTML 表单模板
</h3>
<p>创建模板文件  site-form.component.html ，代码如下所示：</p>
<div class="example">
<h2 class="example">app/site-form.component.html 文件：</h2>
<div class="example_code">
<div class="hl-main"><span class="hl-brackets">&lt;</span><span class="hl-reserved">div</span><span class="hl-code"> </span><span class="hl-var">class</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">container</span><span class="hl-quotes">"</span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;</span><span class="hl-reserved">h1</span><span class="hl-brackets">&gt;</span><span class="hl-code">网站表单</span><span class="hl-brackets">&lt;/</span><span class="hl-reserved">h1</span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;</span><span class="hl-reserved">form</span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;</span><span class="hl-reserved">div</span><span class="hl-code"> </span><span class="hl-var">class</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">form-group</span><span class="hl-quotes">"</span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;</span><span class="hl-reserved">label</span><span class="hl-code"> </span><span class="hl-var">for</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">name</span><span class="hl-quotes">"</span><span class="hl-brackets">&gt;</span><span class="hl-code">网站名</span><span class="hl-brackets">&lt;/</span><span class="hl-reserved">label</span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;</span><span class="hl-reserved">input</span><span class="hl-code"> </span><span class="hl-var">type</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">text</span><span class="hl-quotes">"</span><span class="hl-code"> </span><span class="hl-var">class</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">form-control</span><span class="hl-quotes">"</span><span class="hl-code"> </span><span class="hl-var">id</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">name</span><span class="hl-quotes">"</span><span class="hl-code"> </span><span class="hl-var">required</span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;/</span><span class="hl-reserved">div</span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;</span><span class="hl-reserved">div</span><span class="hl-code"> </span><span class="hl-var">class</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">form-group</span><span class="hl-quotes">"</span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;</span><span class="hl-reserved">label</span><span class="hl-code"> </span><span class="hl-var">for</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">alterEgo</span><span class="hl-quotes">"</span><span class="hl-brackets">&gt;</span><span class="hl-code">alexa 排名</span><span class="hl-brackets">&lt;/</span><span class="hl-reserved">label</span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;</span><span class="hl-reserved">input</span><span class="hl-code"> </span><span class="hl-var">type</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">text</span><span class="hl-quotes">"</span><span class="hl-code"> </span><span class="hl-var">class</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">form-control</span><span class="hl-quotes">"</span><span class="hl-code"> </span><span class="hl-var">id</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">alexa</span><span class="hl-quotes">"</span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;/</span><span class="hl-reserved">div</span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;</span><span class="hl-reserved">button</span><span class="hl-code"> </span><span class="hl-var">type</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">submit</span><span class="hl-quotes">"</span><span class="hl-code"> </span><span class="hl-var">class</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">btn btn-default</span><span class="hl-quotes">"</span><span class="hl-brackets">&gt;</span><span class="hl-code">提交</span><span class="hl-brackets">&lt;/</span><span class="hl-reserved">button</span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;/</span><span class="hl-reserved">form</span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;/</span><span class="hl-reserved">div</span><span class="hl-brackets">&gt;</span></div>
</div>
</div>
<p>required 属性设置的该字段为必需字段，如果没有设置则是可选。</p>
<p>在 angular-forms 目录下输入以下命令：</p>
<pre>
cnpm install bootstrap --save
</pre>
<p>打开 index.html 文件，把以下样式链接添加到 &lt;head&gt; 中：</p>
<div class="example">
<div class="example_code">
<div class="hl-main"><span class="hl-brackets">&lt;</span><span class="hl-reserved">link</span><span class="hl-code"> </span><span class="hl-var">rel</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">stylesheet</span><span class="hl-quotes">"</span><span class="hl-code"> </span><span class="hl-var">href</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">node_modules/bootstrap/dist/css/bootstrap.min.css</span><span class="hl-quotes">"</span><span class="hl-brackets">&gt;</span></div>
</div>
</div>
<p>执行 <b>npm start</b> 后，访问：http://localhost:3000/，输出效果如下：</p>
<p><img src="http://www.runoob.com/wp-content/uploads/2016/10/3D0C303A-2249-4525-9F54-0DED865EE4D9.jpg" width="70%"/></p>
<hr/>
<h2>使用 ngModel 进行双向数据绑定</h2>
<p>接下来我们使用 ngModel 进行双向数据绑定，通过监听 DOM 事件，来实现更新组件的属性。

</p>
<p>修改 app/site-form.component.html ,使用 ngModel 把我们的表单绑定到模型。代码如下所示：</p>
<div class="example">
<h2 class="example">app/site-form.component.html 文件：</h2>
<div class="example_code">
<div class="hl-main"><span class="hl-brackets">&lt;</span><span class="hl-reserved">div</span><span class="hl-code"> </span><span class="hl-var">class</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">container</span><span class="hl-quotes">"</span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;</span><span class="hl-reserved">h1</span><span class="hl-brackets">&gt;</span><span class="hl-code">网站表单</span><span class="hl-brackets">&lt;/</span><span class="hl-reserved">h1</span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;</span><span class="hl-reserved">form</span><span class="hl-brackets">&gt;</span><span class="hl-code">
      {{diagnostic}}
      </span><span class="hl-brackets">&lt;</span><span class="hl-reserved">div</span><span class="hl-code"> </span><span class="hl-var">class</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">form-group</span><span class="hl-quotes">"</span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;</span><span class="hl-reserved">label</span><span class="hl-code"> </span><span class="hl-var">for</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">name</span><span class="hl-quotes">"</span><span class="hl-brackets">&gt;</span><span class="hl-code">网站名</span><span class="hl-brackets">&lt;/</span><span class="hl-reserved">label</span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;</span><span class="hl-reserved">input</span><span class="hl-code"> </span><span class="hl-var">type</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">text</span><span class="hl-quotes">"</span><span class="hl-code"> </span><span class="hl-var">class</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">form-control</span><span class="hl-quotes">"</span><span class="hl-code"> </span><span class="hl-var">id</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">name</span><span class="hl-quotes">"</span><span class="hl-code">
</span><span class="hl-var">required</span><span class="hl-code">
         [(</span><span class="hl-var">ngModel</span><span class="hl-code">)]=</span><span class="hl-quotes">"</span><span class="hl-string">model.name</span><span class="hl-quotes">"</span><span class="hl-code"> </span><span class="hl-var">name</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">name</span><span class="hl-quotes">"</span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;/</span><span class="hl-reserved">div</span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;</span><span class="hl-reserved">div</span><span class="hl-code"> </span><span class="hl-var">class</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">form-group</span><span class="hl-quotes">"</span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;</span><span class="hl-reserved">label</span><span class="hl-code"> </span><span class="hl-var">for</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">alexa</span><span class="hl-quotes">"</span><span class="hl-brackets">&gt;</span><span class="hl-code">alexa 排名</span><span class="hl-brackets">&lt;/</span><span class="hl-reserved">label</span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;</span><span class="hl-reserved">input</span><span class="hl-code"> </span><span class="hl-var">type</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">text</span><span class="hl-quotes">"</span><span class="hl-code"> </span><span class="hl-var">class</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">form-control</span><span class="hl-quotes">"</span><span class="hl-code"> </span><span class="hl-var">id</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">alexa</span><span class="hl-quotes">"</span><span class="hl-code">
         [(</span><span class="hl-var">ngModel</span><span class="hl-code">)]=</span><span class="hl-quotes">"</span><span class="hl-string">model.alexa</span><span class="hl-quotes">"</span><span class="hl-code"> </span><span class="hl-var">name</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">alexa</span><span class="hl-quotes">"</span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;/</span><span class="hl-reserved">div</span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;</span><span class="hl-reserved">div</span><span class="hl-code"> </span><span class="hl-var">class</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">form-group</span><span class="hl-quotes">"</span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;</span><span class="hl-reserved">label</span><span class="hl-code"> </span><span class="hl-var">for</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">url</span><span class="hl-quotes">"</span><span class="hl-brackets">&gt;</span><span class="hl-code">网站 URL </span><span class="hl-brackets">&lt;/</span><span class="hl-reserved">label</span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;</span><span class="hl-reserved">select</span><span class="hl-code"> </span><span class="hl-var">class</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">form-control</span><span class="hl-quotes">"</span><span class="hl-code"> </span><span class="hl-var">id</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">url</span><span class="hl-quotes">"</span><span class="hl-code">
</span><span class="hl-var">required</span><span class="hl-code">
                [(</span><span class="hl-var">ngModel</span><span class="hl-code">)]=</span><span class="hl-quotes">"</span><span class="hl-string">model.url</span><span class="hl-quotes">"</span><span class="hl-code"> </span><span class="hl-var">name</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">url</span><span class="hl-quotes">"</span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;</span><span class="hl-reserved">option</span><span class="hl-code"> *</span><span class="hl-var">ngFor</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">let p of urls</span><span class="hl-quotes">"</span><span class="hl-code"> [</span><span class="hl-var">value</span><span class="hl-code">]=</span><span class="hl-quotes">"</span><span class="hl-string">p</span><span class="hl-quotes">"</span><span class="hl-brackets">&gt;</span><span class="hl-code">{{p}}</span><span class="hl-brackets">&lt;/</span><span class="hl-reserved">option</span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;/</span><span class="hl-reserved">select</span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;/</span><span class="hl-reserved">div</span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;</span><span class="hl-reserved">button</span><span class="hl-code"> </span><span class="hl-var">type</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">submit</span><span class="hl-quotes">"</span><span class="hl-code"> </span><span class="hl-var">class</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">btn btn-default</span><span class="hl-quotes">"</span><span class="hl-brackets">&gt;</span><span class="hl-code">提交</span><span class="hl-brackets">&lt;/</span><span class="hl-reserved">button</span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;/</span><span class="hl-reserved">form</span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;/</span><span class="hl-reserved">div</span><span class="hl-brackets">&gt;</span></div>
</div>
</div>
<ul>
<li> <p>每一个 input 元素都有一个 id 属性，它被 label 元素的 for 属性用来把标签匹配到对应的 input 。</p>
</li>
<li> <p> 每一个 input 元素都有一个 name 属性， Angular 的表单模块需要使用它为表单注册控制器。</p>
</li>
</ul>
<p>运行以上实例输出结果如下：</p>
<p><img src="http://www.runoob.com/wp-content/uploads/2016/10/77D976BB-0EF0-41CD-B539-23F6091D38EA.jpg" width="70%"/></p>
<p><b>{{diagnostic}} </b> 只是用于测试时候输出数据使用。</p>
<p>我们还可以通过 ngModel 跟踪修改状态与有效性验证，它使用了三个 CSS 类来更新控件，以便反映当前状态。</p>
<table class="reference">
<tbody>
<tr>
<th>
		状态
	</th>
<th>
		 为 true 时的类
	</th>
<th>
		为 false 时的类
	</th>
</tr>
<tr>
<td>
		控件已经被访问过
	</td>
<td>
<code>ng-touched</code>
</td>
<td>
<code>ng-untouched</code>
</td>
</tr>
<tr>
<td>
		控件值已经变化
	</td>
<td>
<code>ng-dirty</code>
</td>
<td>
<code>ng-pristine</code>
</td>
</tr>
<tr>
<td>
		控件值是有效的
	</td>
<td>
<code>ng-valid</code>
</td>
<td>
<code>ng-invalid</code>
</td>
</tr>
</tbody>
</table>
<p>这样我们就可以添加自定义 CSS 来反应表单的状态。</p>
<p>在 angular-forms 目录下创建 forms.css 文件，代码如下：</p>
<div class="example">
<h2 class="example">forms.css 文件：</h2>
<div class="example_code">
<div class="hl-main"><span class="hl-identifier">.ng-valid</span><span class="hl-brackets">[</span><span class="hl-var">required</span><span class="hl-brackets">]</span><span class="hl-code">, </span><span class="hl-identifier">.ng-valid</span><span class="hl-identifier">.required</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
</span><span class="hl-reserved">border-left:</span><span class="hl-code"> </span><span class="hl-number">5</span><span class="hl-string">px</span><span class="hl-code"> </span><span class="hl-string">solid</span><span class="hl-code"> </span><span class="hl-var">#42A948</span><span class="hl-reserved"></span><span class="hl-code">; </span><span class="hl-comment">/*</span><span class="hl-comment"> green </span><span class="hl-comment">*/</span><span class="hl-code">
</span><span class="hl-brackets">}</span><span class="hl-code">
</span><span class="hl-identifier">.ng-invalid</span><span class="hl-special">:not</span><span class="hl-code">(</span><span class="hl-identifier">form</span><span class="hl-code">)  </span><span class="hl-brackets">{</span><span class="hl-code">
</span><span class="hl-reserved">border-left:</span><span class="hl-code"> </span><span class="hl-number">5</span><span class="hl-string">px</span><span class="hl-code"> </span><span class="hl-string">solid</span><span class="hl-code"> </span><span class="hl-var">#a94442</span><span class="hl-reserved"></span><span class="hl-code">; </span><span class="hl-comment">/*</span><span class="hl-comment"> red </span><span class="hl-comment">*/</span><span class="hl-code">
</span><span class="hl-brackets">}</span></div>
</div>
</div>
<p>打开 index.html 文件，把以下样式链接添加到 &lt;head&gt; 中：</p>
<div class="example">
<div class="example_code">
<div class="hl-main"><span class="hl-brackets">&lt;</span><span class="hl-reserved">link</span><span class="hl-code"> </span><span class="hl-var">rel</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">stylesheet</span><span class="hl-quotes">"</span><span class="hl-code"> </span><span class="hl-var">href</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">forms.css</span><span class="hl-quotes">"</span><span class="hl-brackets">&gt;</span></div>
</div>
</div>
<p>修改 app/site-form.component.html ,代码如下所示：</p>
<div class="example">
<h2 class="example">app/site-form.component.html 文件：</h2>
<div class="example_code">
<div class="hl-main"><span class="hl-brackets">&lt;</span><span class="hl-reserved">div</span><span class="hl-code"> </span><span class="hl-var">class</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">container</span><span class="hl-quotes">"</span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;</span><span class="hl-reserved">h1</span><span class="hl-brackets">&gt;</span><span class="hl-code">网站表单</span><span class="hl-brackets">&lt;/</span><span class="hl-reserved">h1</span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;</span><span class="hl-reserved">form</span><span class="hl-brackets">&gt;</span><span class="hl-code">
      {{diagnostic}}
      </span><span class="hl-brackets">&lt;</span><span class="hl-reserved">div</span><span class="hl-code"> </span><span class="hl-var">class</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">form-group</span><span class="hl-quotes">"</span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;</span><span class="hl-reserved">label</span><span class="hl-code"> </span><span class="hl-var">for</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">name</span><span class="hl-quotes">"</span><span class="hl-brackets">&gt;</span><span class="hl-code">网站名</span><span class="hl-brackets">&lt;/</span><span class="hl-reserved">label</span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;</span><span class="hl-reserved">input</span><span class="hl-code"> </span><span class="hl-var">type</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">text</span><span class="hl-quotes">"</span><span class="hl-code"> </span><span class="hl-var">class</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">form-control</span><span class="hl-quotes">"</span><span class="hl-code"> </span><span class="hl-var">id</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">name</span><span class="hl-quotes">"</span><span class="hl-code">
</span><span class="hl-var">required</span><span class="hl-code">
               [(</span><span class="hl-var">ngModel</span><span class="hl-code">)]=</span><span class="hl-quotes">"</span><span class="hl-string">model.name</span><span class="hl-quotes">"</span><span class="hl-code"> </span><span class="hl-var">name</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">name</span><span class="hl-quotes">"</span><span class="hl-code">
               #</span><span class="hl-var">name</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">ngModel</span><span class="hl-quotes">"</span><span class="hl-code"> </span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;</span><span class="hl-reserved">div</span><span class="hl-code"> [</span><span class="hl-var">hidden</span><span class="hl-code">]=</span><span class="hl-quotes">"</span><span class="hl-string">name.valid || name.pristine</span><span class="hl-quotes">"</span><span class="hl-code">
</span><span class="hl-var">class</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">alert alert-danger</span><span class="hl-quotes">"</span><span class="hl-brackets">&gt;</span><span class="hl-code">
          网站名是必需的
        </span><span class="hl-brackets">&lt;/</span><span class="hl-reserved">div</span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;/</span><span class="hl-reserved">div</span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;</span><span class="hl-reserved">div</span><span class="hl-code"> </span><span class="hl-var">class</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">form-group</span><span class="hl-quotes">"</span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;</span><span class="hl-reserved">label</span><span class="hl-code"> </span><span class="hl-var">for</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">alexa</span><span class="hl-quotes">"</span><span class="hl-brackets">&gt;</span><span class="hl-code">alexa 排名</span><span class="hl-brackets">&lt;/</span><span class="hl-reserved">label</span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;</span><span class="hl-reserved">input</span><span class="hl-code"> </span><span class="hl-var">type</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">text</span><span class="hl-quotes">"</span><span class="hl-code"> </span><span class="hl-var">class</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">form-control</span><span class="hl-quotes">"</span><span class="hl-code"> </span><span class="hl-var">id</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">alexa</span><span class="hl-quotes">"</span><span class="hl-code">
         [(</span><span class="hl-var">ngModel</span><span class="hl-code">)]=</span><span class="hl-quotes">"</span><span class="hl-string">model.alexa</span><span class="hl-quotes">"</span><span class="hl-code"> </span><span class="hl-var">name</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">alexa</span><span class="hl-quotes">"</span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;/</span><span class="hl-reserved">div</span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;</span><span class="hl-reserved">div</span><span class="hl-code"> </span><span class="hl-var">class</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">form-group</span><span class="hl-quotes">"</span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;</span><span class="hl-reserved">label</span><span class="hl-code"> </span><span class="hl-var">for</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">url</span><span class="hl-quotes">"</span><span class="hl-brackets">&gt;</span><span class="hl-code">网站 URL </span><span class="hl-brackets">&lt;/</span><span class="hl-reserved">label</span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;</span><span class="hl-reserved">select</span><span class="hl-code"> </span><span class="hl-var">class</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">form-control</span><span class="hl-quotes">"</span><span class="hl-code"> </span><span class="hl-var">id</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">url</span><span class="hl-quotes">"</span><span class="hl-code">
</span><span class="hl-var">required</span><span class="hl-code">
                [(</span><span class="hl-var">ngModel</span><span class="hl-code">)]=</span><span class="hl-quotes">"</span><span class="hl-string">model.url</span><span class="hl-quotes">"</span><span class="hl-code"> </span><span class="hl-var">name</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">url</span><span class="hl-quotes">"</span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;</span><span class="hl-reserved">option</span><span class="hl-code"> *</span><span class="hl-var">ngFor</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">let p of urls</span><span class="hl-quotes">"</span><span class="hl-code"> [</span><span class="hl-var">value</span><span class="hl-code">]=</span><span class="hl-quotes">"</span><span class="hl-string">p</span><span class="hl-quotes">"</span><span class="hl-brackets">&gt;</span><span class="hl-code">{{p}}</span><span class="hl-brackets">&lt;/</span><span class="hl-reserved">option</span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;/</span><span class="hl-reserved">select</span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;/</span><span class="hl-reserved">div</span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;</span><span class="hl-reserved">button</span><span class="hl-code"> </span><span class="hl-var">type</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">submit</span><span class="hl-quotes">"</span><span class="hl-code"> </span><span class="hl-var">class</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">btn btn-default</span><span class="hl-quotes">"</span><span class="hl-brackets">&gt;</span><span class="hl-code">提交</span><span class="hl-brackets">&lt;/</span><span class="hl-reserved">button</span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;/</span><span class="hl-reserved">form</span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;/</span><span class="hl-reserved">div</span><span class="hl-brackets">&gt;</span></div>
</div>
</div>
<p>模板中通过把 div 元素的 hidden 属性绑定到 name 控件的属性，我们就可以控制"name"字段错误信息的可见性了。</p>
<p>删除掉 name 字段的数据，显示结果如下所示：</p>
<p><img src="http://www.runoob.com/wp-content/uploads/2016/10/815B2D4E-8019-445B-92A3-BD0C92BCB0B0.jpg" width="70%"/></p>
<h3>添加一个网站</h3></div>