<div class="article-intro" id="content">
<h1>HTML5 <span class="color_h1">Web 存储</span>
</h1>
<hr/>
<p class="intro">HTML5 web 存储,一个比cookie更好的本地存储方式。</p>
<hr/>
<h2>什么是 HTML5 Web 存储?</h2>
<p>使用HTML5可以在本地存储用户的浏览数据。</p>
<p>早些时候,本地存储使用的是 cookie。但是Web 存储需要更加的安全与快速. 这些数据不会被保存在服务器上，但是这些数据只用于用户请求网站数据上.它也可以存储大量的数据，而不影响网站的性能.</p>
<p>数据以 键/值 对存在, web网页的数据只允许该网页访问使用。</p>
<hr/>
<h2>浏览器支持</h2>
<p>
<img alt="Internet Explorer" height="30" src="/images/compatible_ie.gif" title="Internet Explorer" width="31"/><img alt="Firefox" height="30" src="/images/compatible_firefox.gif" title="Firefox" width="31"/><img alt="Opera" height="30" src="/images/compatible_opera.gif" title="Opera" width="28"/><img alt="Google Chrome" height="30" src="/images/compatible_chrome.gif" title="Google Chrome" width="31"/><img alt="Safari" height="30" src="/images/compatible_safari.gif" title="Safari" width="28"/></p>
<p> Internet Explorer 8+, Firefox, Opera, Chrome, 和 Safari支持Web 存储。</p>
<p><b>注意:</b> Internet Explorer 7 及更早IE版本不支持web 存储.</p>
<hr/>
<h2>localStorage 和 sessionStorage </h2>
<p>客户端存储数据的两个对象为：</p>
<ul>
<li>localStorage - 没有时间限制的数据存储</li>
<li>sessionStorage - 针对一个 session 的数据存储</li>
</ul>
<p>在使用 web 存储前,应检查浏览器是否支持 localStorage 和sessionStorage:</p>
<div class="example">
<div class="example_code">
<div class="hl-main"><span class="hl-reserved">if</span><span class="hl-brackets">(</span><span class="hl-reserved">typeof</span><span class="hl-brackets">(</span><span class="hl-identifier">Storage</span><span class="hl-brackets">)</span><span class="hl-code">!==</span><span class="hl-quotes">"</span><span class="hl-string">undefined</span><span class="hl-quotes">"</span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-brackets">{</span><span class="hl-code">
</span><span class="hl-comment">//</span><span class="hl-comment"> 是的! 支持 localStorage  sessionStorage 对象!</span><span class="hl-comment"></span><span class="hl-code">
</span><span class="hl-comment">//</span><span class="hl-comment"> 一些代码.....</span><span class="hl-comment"></span><span class="hl-code">
</span><span class="hl-brackets">}</span><span class="hl-code"> </span><span class="hl-reserved">else</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
</span><span class="hl-comment">//</span><span class="hl-comment"> 抱歉! 不支持 web 存储。</span><span class="hl-comment"></span><span class="hl-code">
</span><span class="hl-brackets">}</span></div>
</div>
</div>
<br/><hr/>
<h2>localStorage 对象</h2>
<p>localStorage 对象存储的数据没有时间限制。第二天、第二周或下一年之后，数据依然可用。</p>
<div class="example">
<h2 class="example">实例</h2>
<div class="example_code">
<div class="hl-main"><span class="hl-identifier">localStorage</span><span class="hl-code">.</span><span class="hl-identifier">sitename</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">菜鸟教程</span><span class="hl-quotes">"</span><span class="hl-code">;
</span><span class="hl-builtin">document</span><span class="hl-code">.</span><span class="hl-identifier">getElementById</span><span class="hl-brackets">(</span><span class="hl-quotes">"</span><span class="hl-string">result</span><span class="hl-quotes">"</span><span class="hl-brackets">)</span><span class="hl-code">.</span><span class="hl-identifier">innerHTML</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">网站名：</span><span class="hl-quotes">"</span><span class="hl-code"> + </span><span class="hl-identifier">localStorage</span><span class="hl-code">.</span><span class="hl-identifier">sitename</span><span class="hl-code">;</span></div>
</div>
<br/><a class="tryitbtn" href="/try/try.php?filename=tryhtml5_webstorage_local" target="_blank">尝试一下 »</a>
</div>
<p>实例解析：</p>
<ul>
<li>使用  key="sitename" 和 value="菜鸟教程" 创建一个 localStorage 键/值对。</li>
<li>检索键值为"sitename" 的值然后将数据插入 id="result"的元素中。</li>
</ul>
<p>以上实例也可以这么写：</p>
<div class="example">
<div class="example_code">
<div class="hl-main"><span class="hl-comment">//</span><span class="hl-comment"> 存储</span><span class="hl-comment"></span><span class="hl-code">
</span><span class="hl-identifier">localStorage</span><span class="hl-code">.</span><span class="hl-identifier">sitename</span><span class="hl-code"> = </span><span class="hl-quotes">"</span><span class="hl-string">菜鸟教程</span><span class="hl-quotes">"</span><span class="hl-code">;
</span><span class="hl-comment">//</span><span class="hl-comment"> 查找</span><span class="hl-comment"></span><span class="hl-code">
</span><span class="hl-builtin">document</span><span class="hl-code">.</span><span class="hl-identifier">getElementById</span><span class="hl-brackets">(</span><span class="hl-quotes">"</span><span class="hl-string">result</span><span class="hl-quotes">"</span><span class="hl-brackets">)</span><span class="hl-code">.</span><span class="hl-identifier">innerHTML</span><span class="hl-code"> = </span><span class="hl-identifier">localStorage</span><span class="hl-code">.</span><span class="hl-identifier">sitename</span><span class="hl-code">;</span></div>
</div>
</div><p>移除 localStorage 中的 "lastname" :</p>
<div class="example">
<div class="example_code">
<div class="hl-main"><span class="hl-identifier">localStorage</span><span class="hl-code">.</span><span class="hl-identifier">removeItem</span><span class="hl-brackets">(</span><span class="hl-quotes">"</span><span class="hl-string">lastname</span><span class="hl-quotes">"</span><span class="hl-brackets">)</span><span class="hl-code">;</span></div>
</div>
</div>
<p>
不管是 localStorage，还是 sessionStorage，可使用的API都相同，常用的有如下几个（以localStorage为例）：</p>
<ul><li>
保存数据：localStorage.setItem(key,value);</li><li>
读取数据：localStorage.getItem(key);</li><li>
删除单个数据：localStorage.removeItem(key);</li><li>
删除所有数据：localStorage.clear();</li><li>
得到某个索引的key：localStorage.key(index);</li></ul>
<p><strong>提示:</strong> 键/值对通常以字符串存储，你可以按自己的需要转换该格式。</p>
<p>下面的实例展示了用户点击按钮的次数。</p><p>
代码中的字符串值转换为数字类型:</p>
<div class="example">
<h2 class="example">实例</h2>
<div class="example_code">
<div class="hl-main"><span class="hl-reserved">if</span><span class="hl-code"> </span><span class="hl-brackets">(</span><span class="hl-identifier">localStorage</span><span class="hl-code">.</span><span class="hl-identifier">clickcount</span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-brackets">{</span><span class="hl-code">
</span><span class="hl-identifier">localStorage</span><span class="hl-code">.</span><span class="hl-identifier">clickcount</span><span class="hl-code">=</span><span class="hl-builtin">Number</span><span class="hl-brackets">(</span><span class="hl-identifier">localStorage</span><span class="hl-code">.</span><span class="hl-identifier">clickcount</span><span class="hl-brackets">)</span><span class="hl-code">+</span><span class="hl-number">1</span><span class="hl-code">;
</span><span class="hl-brackets">}</span><span class="hl-code">
</span><span class="hl-reserved">else</span><span class="hl-code">
</span><span class="hl-brackets">{</span><span class="hl-code">
</span><span class="hl-identifier">localStorage</span><span class="hl-code">.</span><span class="hl-identifier">clickcount</span><span class="hl-code">=</span><span class="hl-number">1</span><span class="hl-code">;
</span><span class="hl-brackets">}</span><span class="hl-code">
</span><span class="hl-builtin">document</span><span class="hl-code">.</span><span class="hl-identifier">getElementById</span><span class="hl-brackets">(</span><span class="hl-quotes">"</span><span class="hl-string">result</span><span class="hl-quotes">"</span><span class="hl-brackets">)</span><span class="hl-code">.</span><span class="hl-identifier">innerHTML</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string"> 你已经点击了按钮 </span><span class="hl-quotes">"</span><span class="hl-code"> + </span><span class="hl-identifier">localStorage</span><span class="hl-code">.</span><span class="hl-identifier">clickcount</span><span class="hl-code"> + </span><span class="hl-quotes">"</span><span class="hl-string"> 次 </span><span class="hl-quotes">"</span><span class="hl-code">;</span></div>
</div>
<br/><a class="tryitbtn" href="/try/try.php?filename=tryhtml5_webstorage_local_clickcount" target="_blank">尝试一下 »</a>
</div>
<br/><hr/>
<h2> sessionStorage 对象</h2>
<p>sessionStorage 方法针对一个 session 进行数据存储。当用户关闭浏览器窗口后，数据会被删除。</p>
<p>如何创建并访问一个 sessionStorage：</p>
<div class="example">
<h2 class="example">实例</h2>
<div class="example_code">
<div class="hl-main"><span class="hl-reserved">if</span><span class="hl-code"> </span><span class="hl-brackets">(</span><span class="hl-identifier">sessionStorage</span><span class="hl-code">.</span><span class="hl-identifier">clickcount</span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-brackets">{</span><span class="hl-code">
</span><span class="hl-identifier">sessionStorage</span><span class="hl-code">.</span><span class="hl-identifier">clickcount</span><span class="hl-code">=</span><span class="hl-builtin">Number</span><span class="hl-brackets">(</span><span class="hl-identifier">sessionStorage</span><span class="hl-code">.</span><span class="hl-identifier">clickcount</span><span class="hl-brackets">)</span><span class="hl-code">+</span><span class="hl-number">1</span><span class="hl-code">;
</span><span class="hl-brackets">}</span><span class="hl-code">
</span><span class="hl-reserved">else</span><span class="hl-code">
</span><span class="hl-brackets">{</span><span class="hl-code">
</span><span class="hl-identifier">sessionStorage</span><span class="hl-code">.</span><span class="hl-identifier">clickcount</span><span class="hl-code">=</span><span class="hl-number">1</span><span class="hl-code">;
</span><span class="hl-brackets">}</span><span class="hl-code">
</span><span class="hl-builtin">document</span><span class="hl-code">.</span><span class="hl-identifier">getElementById</span><span class="hl-brackets">(</span><span class="hl-quotes">"</span><span class="hl-string">result</span><span class="hl-quotes">"</span><span class="hl-brackets">)</span><span class="hl-code">.</span><span class="hl-identifier">innerHTML</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">在这个会话中你已经点击了该按钮 </span><span class="hl-quotes">"</span><span class="hl-code"> + </span><span class="hl-identifier">sessionStorage</span><span class="hl-code">.</span><span class="hl-identifier">clickcount</span><span class="hl-code"> + </span><span class="hl-quotes">"</span><span class="hl-string"> 次 </span><span class="hl-quotes">"</span><span class="hl-code">;</span></div>
</div>
<br/><a class="tryitbtn" href="/try/try.php?filename=tryhtml5_webstorage_session" target="_blank">尝试一下 »</a>
</div>
<hr/>
<h2>Web Storage 开发一个简单的网站列表程序</h2>
<p>网站列表程序实现以下功能：</p>
<ul><li>
可以输入网站名，网址，以网站名作为key存入localStorage；</li><li>
根据网站名，查找网址；</li><li>
列出当前已保存的所有网站；</li>
</ul>
<p>以下代码用于保存于查找数据：</p>
<div class="example">
<h2 class="example">save() 与 find() 方法</h2>
<div class="example_code">
<div class="hl-main"><span class="hl-comment">//</span><span class="hl-comment">保存数据  </span><span class="hl-comment"></span><span class="hl-code">
</span><span class="hl-reserved">function</span><span class="hl-code"> </span><span class="hl-identifier">save</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-brackets">{</span><span class="hl-code">
</span><span class="hl-reserved">var</span><span class="hl-code"> </span><span class="hl-identifier">siteurl</span><span class="hl-code"> = </span><span class="hl-builtin">document</span><span class="hl-code">.</span><span class="hl-identifier">getElementById</span><span class="hl-brackets">(</span><span class="hl-quotes">"</span><span class="hl-string">siteurl</span><span class="hl-quotes">"</span><span class="hl-brackets">)</span><span class="hl-code">.</span><span class="hl-identifier">value</span><span class="hl-code">;  
    </span><span class="hl-reserved">var</span><span class="hl-code"> </span><span class="hl-identifier">sitename</span><span class="hl-code"> = </span><span class="hl-builtin">document</span><span class="hl-code">.</span><span class="hl-identifier">getElementById</span><span class="hl-brackets">(</span><span class="hl-quotes">"</span><span class="hl-string">sitename</span><span class="hl-quotes">"</span><span class="hl-brackets">)</span><span class="hl-code">.</span><span class="hl-identifier">value</span><span class="hl-code">;  
    </span><span class="hl-identifier">localStorage</span><span class="hl-code">.</span><span class="hl-identifier">setItem</span><span class="hl-brackets">(</span><span class="hl-identifier">sitename</span><span class="hl-code">, </span><span class="hl-identifier">siteurl</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-identifier">alert</span><span class="hl-brackets">(</span><span class="hl-quotes">"</span><span class="hl-string">添加成功</span><span class="hl-quotes">"</span><span class="hl-brackets">)</span><span class="hl-code">;
</span><span class="hl-brackets">}</span><span class="hl-code">
</span><span class="hl-comment">//</span><span class="hl-comment">查找数据  </span><span class="hl-comment"></span><span class="hl-code">
</span><span class="hl-reserved">function</span><span class="hl-code"> </span><span class="hl-identifier">find</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-brackets">{</span><span class="hl-code">
</span><span class="hl-reserved">var</span><span class="hl-code"> </span><span class="hl-identifier">search_site</span><span class="hl-code"> = </span><span class="hl-builtin">document</span><span class="hl-code">.</span><span class="hl-identifier">getElementById</span><span class="hl-brackets">(</span><span class="hl-quotes">"</span><span class="hl-string">search_site</span><span class="hl-quotes">"</span><span class="hl-brackets">)</span><span class="hl-code">.</span><span class="hl-identifier">value</span><span class="hl-code">;  
    </span><span class="hl-reserved">var</span><span class="hl-code"> </span><span class="hl-identifier">sitename</span><span class="hl-code"> = </span><span class="hl-identifier">localStorage</span><span class="hl-code">.</span><span class="hl-identifier">getItem</span><span class="hl-brackets">(</span><span class="hl-identifier">search_site</span><span class="hl-brackets">)</span><span class="hl-code">;  
    </span><span class="hl-reserved">var</span><span class="hl-code"> </span><span class="hl-identifier">find_result</span><span class="hl-code"> = </span><span class="hl-builtin">document</span><span class="hl-code">.</span><span class="hl-identifier">getElementById</span><span class="hl-brackets">(</span><span class="hl-quotes">"</span><span class="hl-string">find_result</span><span class="hl-quotes">"</span><span class="hl-brackets">)</span><span class="hl-code">;  
    </span><span class="hl-identifier">find_result</span><span class="hl-code">.</span><span class="hl-identifier">innerHTML</span><span class="hl-code"> = </span><span class="hl-identifier">search_site</span><span class="hl-code"> + </span><span class="hl-quotes">"</span><span class="hl-string">的网址是：</span><span class="hl-quotes">"</span><span class="hl-code"> + </span><span class="hl-identifier">sitename</span><span class="hl-code">;  
</span><span class="hl-brackets">}</span></div>
</div>
</div>
<p>完整实例演示如下：</p>
<div class="example">
<h2 class="example">实例</h2>
<div class="example_code">
<div class="hl-main"><span class="hl-brackets">&lt;</span><span class="hl-reserved">div</span><span class="hl-code"> </span><span class="hl-var">style</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">border: 2px dashed #ccc;width:320px;text-align:center;</span><span class="hl-quotes">"</span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;</span><span class="hl-reserved">label</span><span class="hl-code"> </span><span class="hl-var">for</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">sitename</span><span class="hl-quotes">"</span><span class="hl-brackets">&gt;</span><span class="hl-code">网站名(key)：</span><span class="hl-brackets">&lt;/</span><span class="hl-reserved">label</span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;</span><span class="hl-reserved">input</span><span class="hl-code"> </span><span class="hl-var">type</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">text</span><span class="hl-quotes">"</span><span class="hl-code"> </span><span class="hl-var">id</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">sitename</span><span class="hl-quotes">"</span><span class="hl-code"> </span><span class="hl-var">name</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">sitename</span><span class="hl-quotes">"</span><span class="hl-code"> </span><span class="hl-var">class</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">text</span><span class="hl-quotes">"</span><span class="hl-brackets">/&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;</span><span class="hl-reserved">br</span><span class="hl-brackets">/&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;</span><span class="hl-reserved">label</span><span class="hl-code"> </span><span class="hl-var">for</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">siteurl</span><span class="hl-quotes">"</span><span class="hl-brackets">&gt;</span><span class="hl-code">网 址(value)：</span><span class="hl-brackets">&lt;/</span><span class="hl-reserved">label</span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;</span><span class="hl-reserved">input</span><span class="hl-code"> </span><span class="hl-var">type</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">text</span><span class="hl-quotes">"</span><span class="hl-code"> </span><span class="hl-var">id</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">siteurl</span><span class="hl-quotes">"</span><span class="hl-code"> </span><span class="hl-var">name</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">siteurl</span><span class="hl-quotes">"</span><span class="hl-brackets">/&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;</span><span class="hl-reserved">br</span><span class="hl-brackets">/&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;</span><span class="hl-reserved">input</span><span class="hl-code"> </span><span class="hl-var">type</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">button</span><span class="hl-quotes">"</span><span class="hl-code"> </span><span class="hl-var">onclick</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">save()</span><span class="hl-quotes">"</span><span class="hl-code"> </span><span class="hl-var">value</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">新增记录</span><span class="hl-quotes">"</span><span class="hl-brackets">/&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;</span><span class="hl-reserved">hr</span><span class="hl-brackets">/&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;</span><span class="hl-reserved">label</span><span class="hl-code"> </span><span class="hl-var">for</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">search_site</span><span class="hl-quotes">"</span><span class="hl-brackets">&gt;</span><span class="hl-code">输入网站名：</span><span class="hl-brackets">&lt;/</span><span class="hl-reserved">label</span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;</span><span class="hl-reserved">input</span><span class="hl-code"> </span><span class="hl-var">type</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">text</span><span class="hl-quotes">"</span><span class="hl-code"> </span><span class="hl-var">id</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">search_site</span><span class="hl-quotes">"</span><span class="hl-code"> </span><span class="hl-var">name</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">search_site</span><span class="hl-quotes">"</span><span class="hl-brackets">/&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;</span><span class="hl-reserved">input</span><span class="hl-code"> </span><span class="hl-var">type</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">button</span><span class="hl-quotes">"</span><span class="hl-code"> </span><span class="hl-var">onclick</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">find()</span><span class="hl-quotes">"</span><span class="hl-code"> </span><span class="hl-var">value</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">查找网站</span><span class="hl-quotes">"</span><span class="hl-brackets">/&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;</span><span class="hl-reserved">p</span><span class="hl-code"> </span><span class="hl-var">id</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">find_result</span><span class="hl-quotes">"</span><span class="hl-brackets">&gt;</span><span class="hl-brackets">&lt;</span><span class="hl-reserved">br</span><span class="hl-brackets">/&gt;</span><span class="hl-brackets">&lt;/</span><span class="hl-reserved">p</span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;/</span><span class="hl-reserved">div</span><span class="hl-brackets">&gt;</span></div>
</div><br/>
<a class="tryitbtn" href="/try/try.php?filename=tryhtml5_webstorage_demo" target="_blank">尝试一下 »</a>
</div>
<p>实现效果截图：</p>
<p><img src="https://www.runoob.com/wp-content/uploads/2013/07/local11.png" width="50%"/></p>
<p>以上实例只是演示了简单的 localStorage 存储与查找，更多情况下我们存储的数据会更复杂。</p>
<p>接下来我们将使用 <a href="/js/javascript-json-stringify.html" target="_blank">JSON.stringify</a> 来存储对象数据，<a href="/js/javascript-json-stringify.html" target="_blank">JSON.stringify</a> 可以将对象转换为字符串。</p>
<div class="example">
<div class="example_code">
<div class="hl-main"><span class="hl-reserved">var</span><span class="hl-code"> </span><span class="hl-identifier">site</span><span class="hl-code"> = </span><span class="hl-reserved">new</span><span class="hl-code"> </span><span class="hl-identifier">Object</span><span class="hl-code">;
...
</span><span class="hl-reserved">var</span><span class="hl-code"> </span><span class="hl-identifier">str</span><span class="hl-code"> = </span><span class="hl-identifier">JSON</span><span class="hl-code">.</span><span class="hl-identifier">stringify</span><span class="hl-brackets">(</span><span class="hl-identifier">site</span><span class="hl-brackets">)</span><span class="hl-code">; </span><span class="hl-comment">//</span><span class="hl-comment"> 将对象转换为字符串</span><span class="hl-comment"></span></div>
</div></div>
<p>之后我们使用 <a href="/js/javascript-json-parse.html" target="_blank">JSON.parse</a> 方法将字符串转换为 JSON 对象：</p>
<div class="example">
<div class="example_code">
<div class="hl-main"><span class="hl-reserved">var</span><span class="hl-code"> </span><span class="hl-identifier">site</span><span class="hl-code"> = </span><span class="hl-identifier">JSON</span><span class="hl-code">.</span><span class="hl-identifier">parse</span><span class="hl-brackets">(</span><span class="hl-identifier">str</span><span class="hl-brackets">)</span><span class="hl-code">;</span></div>
</div>
</div>
<p>JavaScript 实现代码：</p>
<div class="example">
<h2 class="example">save() 与 find() 方法</h2>
<div class="example_code">
<div class="hl-main"><span class="hl-comment">//</span><span class="hl-comment">保存数据  </span><span class="hl-comment"></span><span class="hl-code">
</span><span class="hl-reserved">function</span><span class="hl-code"> </span><span class="hl-identifier">save</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-brackets">{</span><span class="hl-code">
</span><span class="hl-reserved">var</span><span class="hl-code"> </span><span class="hl-identifier">site</span><span class="hl-code"> = </span><span class="hl-reserved">new</span><span class="hl-code"> </span><span class="hl-identifier">Object</span><span class="hl-code">;
    </span><span class="hl-identifier">site</span><span class="hl-code">.</span><span class="hl-identifier">keyname</span><span class="hl-code"> = </span><span class="hl-builtin">document</span><span class="hl-code">.</span><span class="hl-identifier">getElementById</span><span class="hl-brackets">(</span><span class="hl-quotes">"</span><span class="hl-string">keyname</span><span class="hl-quotes">"</span><span class="hl-brackets">)</span><span class="hl-code">.</span><span class="hl-identifier">value</span><span class="hl-code">;
    </span><span class="hl-identifier">site</span><span class="hl-code">.</span><span class="hl-identifier">sitename</span><span class="hl-code"> = </span><span class="hl-builtin">document</span><span class="hl-code">.</span><span class="hl-identifier">getElementById</span><span class="hl-brackets">(</span><span class="hl-quotes">"</span><span class="hl-string">sitename</span><span class="hl-quotes">"</span><span class="hl-brackets">)</span><span class="hl-code">.</span><span class="hl-identifier">value</span><span class="hl-code">;  
    </span><span class="hl-identifier">site</span><span class="hl-code">.</span><span class="hl-identifier">siteurl</span><span class="hl-code"> = </span><span class="hl-builtin">document</span><span class="hl-code">.</span><span class="hl-identifier">getElementById</span><span class="hl-brackets">(</span><span class="hl-quotes">"</span><span class="hl-string">siteurl</span><span class="hl-quotes">"</span><span class="hl-brackets">)</span><span class="hl-code">.</span><span class="hl-identifier">value</span><span class="hl-code">;
    </span><span class="hl-reserved">var</span><span class="hl-code"> </span><span class="hl-identifier">str</span><span class="hl-code"> = </span><span class="hl-identifier">JSON</span><span class="hl-code">.</span><span class="hl-identifier">stringify</span><span class="hl-brackets">(</span><span class="hl-identifier">site</span><span class="hl-brackets">)</span><span class="hl-code">; </span><span class="hl-comment">//</span><span class="hl-comment"> 将对象转换为字符串</span><span class="hl-comment"></span><span class="hl-code">
</span><span class="hl-identifier">localStorage</span><span class="hl-code">.</span><span class="hl-identifier">setItem</span><span class="hl-brackets">(</span><span class="hl-identifier">site</span><span class="hl-code">.</span><span class="hl-identifier">keyname</span><span class="hl-code">,</span><span class="hl-identifier">str</span><span class="hl-brackets">)</span><span class="hl-code">;  
    </span><span class="hl-identifier">alert</span><span class="hl-brackets">(</span><span class="hl-quotes">"</span><span class="hl-string">保存成功</span><span class="hl-quotes">"</span><span class="hl-brackets">)</span><span class="hl-code">;
</span><span class="hl-brackets">}</span><span class="hl-code">
</span><span class="hl-comment">//</span><span class="hl-comment">查找数据  </span><span class="hl-comment"></span><span class="hl-code">
</span><span class="hl-reserved">function</span><span class="hl-code"> </span><span class="hl-identifier">find</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-brackets">{</span><span class="hl-code">
</span><span class="hl-reserved">var</span><span class="hl-code"> </span><span class="hl-identifier">search_site</span><span class="hl-code"> = </span><span class="hl-builtin">document</span><span class="hl-code">.</span><span class="hl-identifier">getElementById</span><span class="hl-brackets">(</span><span class="hl-quotes">"</span><span class="hl-string">search_site</span><span class="hl-quotes">"</span><span class="hl-brackets">)</span><span class="hl-code">.</span><span class="hl-identifier">value</span><span class="hl-code">;  
    </span><span class="hl-reserved">var</span><span class="hl-code"> </span><span class="hl-identifier">str</span><span class="hl-code"> = </span><span class="hl-identifier">localStorage</span><span class="hl-code">.</span><span class="hl-identifier">getItem</span><span class="hl-brackets">(</span><span class="hl-identifier">search_site</span><span class="hl-brackets">)</span><span class="hl-code">;  
    </span><span class="hl-reserved">var</span><span class="hl-code"> </span><span class="hl-identifier">find_result</span><span class="hl-code"> = </span><span class="hl-builtin">document</span><span class="hl-code">.</span><span class="hl-identifier">getElementById</span><span class="hl-brackets">(</span><span class="hl-quotes">"</span><span class="hl-string">find_result</span><span class="hl-quotes">"</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-reserved">var</span><span class="hl-code"> </span><span class="hl-identifier">site</span><span class="hl-code"> = </span><span class="hl-identifier">JSON</span><span class="hl-code">.</span><span class="hl-identifier">parse</span><span class="hl-brackets">(</span><span class="hl-identifier">str</span><span class="hl-brackets">)</span><span class="hl-code">;  
    </span><span class="hl-identifier">find_result</span><span class="hl-code">.</span><span class="hl-identifier">innerHTML</span><span class="hl-code"> = </span><span class="hl-identifier">search_site</span><span class="hl-code"> + </span><span class="hl-quotes">"</span><span class="hl-string">的网站名是：</span><span class="hl-quotes">"</span><span class="hl-code"> + </span><span class="hl-identifier">site</span><span class="hl-code">.</span><span class="hl-identifier">sitename</span><span class="hl-code"> + </span><span class="hl-quotes">"</span><span class="hl-string">，网址是：</span><span class="hl-quotes">"</span><span class="hl-code"> + </span><span class="hl-identifier">site</span><span class="hl-code">.</span><span class="hl-identifier">siteurl</span><span class="hl-code">;  
</span><span class="hl-brackets">}</span></div>
</div>
</div>
<p>完整实例如下：</p>
<div class="example">
<h2 class="example">实例</h2>
<div class="example_code">
<div class="hl-main"><span class="hl-brackets">&lt;</span><span class="hl-reserved">div</span><span class="hl-code"> </span><span class="hl-var">style</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">border: 2px dashed #ccc;width:320px;text-align:center;</span><span class="hl-quotes">"</span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;</span><span class="hl-reserved">label</span><span class="hl-code"> </span><span class="hl-var">for</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">keyname</span><span class="hl-quotes">"</span><span class="hl-brackets">&gt;</span><span class="hl-code">别名(key):</span><span class="hl-brackets">&lt;/</span><span class="hl-reserved">label</span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;</span><span class="hl-reserved">input</span><span class="hl-code"> </span><span class="hl-var">type</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">text</span><span class="hl-quotes">"</span><span class="hl-code"> </span><span class="hl-var">id</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">keyname</span><span class="hl-quotes">"</span><span class="hl-code"> </span><span class="hl-var">name</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">keyname</span><span class="hl-quotes">"</span><span class="hl-code"> </span><span class="hl-var">class</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">text</span><span class="hl-quotes">"</span><span class="hl-brackets">/&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;</span><span class="hl-reserved">br</span><span class="hl-brackets">/&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;</span><span class="hl-reserved">label</span><span class="hl-code"> </span><span class="hl-var">for</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">sitename</span><span class="hl-quotes">"</span><span class="hl-brackets">&gt;</span><span class="hl-code">网站名：</span><span class="hl-brackets">&lt;/</span><span class="hl-reserved">label</span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;</span><span class="hl-reserved">input</span><span class="hl-code"> </span><span class="hl-var">type</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">text</span><span class="hl-quotes">"</span><span class="hl-code"> </span><span class="hl-var">id</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">sitename</span><span class="hl-quotes">"</span><span class="hl-code"> </span><span class="hl-var">name</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">sitename</span><span class="hl-quotes">"</span><span class="hl-code"> </span><span class="hl-var">class</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">text</span><span class="hl-quotes">"</span><span class="hl-brackets">/&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;</span><span class="hl-reserved">br</span><span class="hl-brackets">/&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;</span><span class="hl-reserved">label</span><span class="hl-code"> </span><span class="hl-var">for</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">siteurl</span><span class="hl-quotes">"</span><span class="hl-brackets">&gt;</span><span class="hl-code">网 址：</span><span class="hl-brackets">&lt;/</span><span class="hl-reserved">label</span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;</span><span class="hl-reserved">input</span><span class="hl-code"> </span><span class="hl-var">type</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">text</span><span class="hl-quotes">"</span><span class="hl-code"> </span><span class="hl-var">id</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">siteurl</span><span class="hl-quotes">"</span><span class="hl-code"> </span><span class="hl-var">name</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">siteurl</span><span class="hl-quotes">"</span><span class="hl-brackets">/&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;</span><span class="hl-reserved">br</span><span class="hl-brackets">/&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;</span><span class="hl-reserved">input</span><span class="hl-code"> </span><span class="hl-var">type</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">button</span><span class="hl-quotes">"</span><span class="hl-code"> </span><span class="hl-var">onclick</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">save()</span><span class="hl-quotes">"</span><span class="hl-code"> </span><span class="hl-var">value</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">新增记录</span><span class="hl-quotes">"</span><span class="hl-brackets">/&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;</span><span class="hl-reserved">hr</span><span class="hl-brackets">/&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;</span><span class="hl-reserved">label</span><span class="hl-code"> </span><span class="hl-var">for</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">search_site</span><span class="hl-quotes">"</span><span class="hl-brackets">&gt;</span><span class="hl-code">输入别名(key)：</span><span class="hl-brackets">&lt;/</span><span class="hl-reserved">label</span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;</span><span class="hl-reserved">input</span><span class="hl-code"> </span><span class="hl-var">type</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">text</span><span class="hl-quotes">"</span><span class="hl-code"> </span><span class="hl-var">id</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">search_site</span><span class="hl-quotes">"</span><span class="hl-code"> </span><span class="hl-var">name</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">search_site</span><span class="hl-quotes">"</span><span class="hl-brackets">/&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;</span><span class="hl-reserved">input</span><span class="hl-code"> </span><span class="hl-var">type</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">button</span><span class="hl-quotes">"</span><span class="hl-code"> </span><span class="hl-var">onclick</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">find()</span><span class="hl-quotes">"</span><span class="hl-code"> </span><span class="hl-var">value</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">查找网站</span><span class="hl-quotes">"</span><span class="hl-brackets">/&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;</span><span class="hl-reserved">p</span><span class="hl-code"> </span><span class="hl-var">id</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">find_result</span><span class="hl-quotes">"</span><span class="hl-brackets">&gt;</span><span class="hl-brackets">&lt;</span><span class="hl-reserved">br</span><span class="hl-brackets">/&gt;</span><span class="hl-brackets">&lt;/</span><span class="hl-reserved">p</span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;/</span><span class="hl-reserved">div</span><span class="hl-brackets">&gt;</span></div>
</div><br/>
<a class="tryitbtn" href="/try/try.php?filename=tryhtml5_webstorage_demo2" target="_blank">尝试一下 »</a>
</div>
<p>实例中的 loadAll 输出了所有存储的数据，你需要确保 localStorage 存储的数据都为 JSON 格式，否则 JSON.parse(str) 将会报错。</p>
<p>输出结果演示：</p>
<p><img src="//www.runoob.com/wp-content/uploads/2013/07/08572F9A-A2E7-4752-BE1B-D66E2C3B36C9.jpg" width="50%"/></p>
</div>