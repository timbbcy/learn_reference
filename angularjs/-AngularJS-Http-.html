<div class="article-intro" id="content">
<h1>AngularJS <span class="color_h1">XMLHttpRequest</span>
</h1>
<hr/>
<p class="intro"><strong>$http</strong> 是 AngularJS 中的一个核心服务，用于读取远程服务器的数据。</p>
<p>使用格式：</p>
<pre>
// 简单的 GET 请求，可以改为 POST
$http({
    method: 'GET',
    url: '/someUrl'
}).then(function successCallback(response) {
        // 请求成功执行代码
    }, function errorCallback(response) {
        // 请求失败执行代码
});
</pre>
<h3>简写方法</h3>
<p>POST 与 GET 简写方法格式：</p>
<pre>
$http.get('/someUrl', config).then(successCallback, errorCallback);
$http.post('/someUrl', data, config).then(successCallback, errorCallback);
</pre><p>
此外还有以下简写方法：
</p>
<ul><li>$http.get</li><li>
$http.head</li><li>
$http.post</li><li>
$http.put</li><li>
$http.delete</li><li>
$http.jsonp</li><li>
$http.patch</li></ul>
<p>更详细内容可参见：<a href="https://docs.angularjs.org/api/ng/service/$http" target="_blank">https://docs.angularjs.org/api/ng/service/$http</a></p>
<hr/>
<h2>读取 JSON 文件 </h2>
<p>以下是存储在web服务器上的 JSON 文件：</p>
<div class="example">
<h2 class="example">http://www.runoob.com/try/angularjs/data/sites.php</h2>
<div class="example_code">
<div class="hl-main"><span class="hl-brackets">{</span><span class="hl-code">
</span><span class="hl-quotes">"</span><span class="hl-string">sites</span><span class="hl-quotes">"</span><span class="hl-code">: </span><span class="hl-brackets">[</span><span class="hl-code">
</span><span class="hl-brackets">{</span><span class="hl-code">
</span><span class="hl-quotes">"</span><span class="hl-string">Name</span><span class="hl-quotes">"</span><span class="hl-code">: </span><span class="hl-quotes">"</span><span class="hl-string">菜鸟教程</span><span class="hl-quotes">"</span><span class="hl-code">,
            </span><span class="hl-quotes">"</span><span class="hl-string">Url</span><span class="hl-quotes">"</span><span class="hl-code">: </span><span class="hl-quotes">"</span><span class="hl-string">www.runoob.com</span><span class="hl-quotes">"</span><span class="hl-code">,
            </span><span class="hl-quotes">"</span><span class="hl-string">Country</span><span class="hl-quotes">"</span><span class="hl-code">: </span><span class="hl-quotes">"</span><span class="hl-string">CN</span><span class="hl-quotes">"</span><span class="hl-code">
</span><span class="hl-brackets">}</span><span class="hl-code">,
        </span><span class="hl-brackets">{</span><span class="hl-code">
</span><span class="hl-quotes">"</span><span class="hl-string">Name</span><span class="hl-quotes">"</span><span class="hl-code">: </span><span class="hl-quotes">"</span><span class="hl-string">Google</span><span class="hl-quotes">"</span><span class="hl-code">,
            </span><span class="hl-quotes">"</span><span class="hl-string">Url</span><span class="hl-quotes">"</span><span class="hl-code">: </span><span class="hl-quotes">"</span><span class="hl-string">www.google.com</span><span class="hl-quotes">"</span><span class="hl-code">,
            </span><span class="hl-quotes">"</span><span class="hl-string">Country</span><span class="hl-quotes">"</span><span class="hl-code">: </span><span class="hl-quotes">"</span><span class="hl-string">USA</span><span class="hl-quotes">"</span><span class="hl-code">
</span><span class="hl-brackets">}</span><span class="hl-code">,
        </span><span class="hl-brackets">{</span><span class="hl-code">
</span><span class="hl-quotes">"</span><span class="hl-string">Name</span><span class="hl-quotes">"</span><span class="hl-code">: </span><span class="hl-quotes">"</span><span class="hl-string">Facebook</span><span class="hl-quotes">"</span><span class="hl-code">,
            </span><span class="hl-quotes">"</span><span class="hl-string">Url</span><span class="hl-quotes">"</span><span class="hl-code">: </span><span class="hl-quotes">"</span><span class="hl-string">www.facebook.com</span><span class="hl-quotes">"</span><span class="hl-code">,
            </span><span class="hl-quotes">"</span><span class="hl-string">Country</span><span class="hl-quotes">"</span><span class="hl-code">: </span><span class="hl-quotes">"</span><span class="hl-string">USA</span><span class="hl-quotes">"</span><span class="hl-code">
</span><span class="hl-brackets">}</span><span class="hl-code">,
        </span><span class="hl-brackets">{</span><span class="hl-code">
</span><span class="hl-quotes">"</span><span class="hl-string">Name</span><span class="hl-quotes">"</span><span class="hl-code">: </span><span class="hl-quotes">"</span><span class="hl-string">微博</span><span class="hl-quotes">"</span><span class="hl-code">,
            </span><span class="hl-quotes">"</span><span class="hl-string">Url</span><span class="hl-quotes">"</span><span class="hl-code">: </span><span class="hl-quotes">"</span><span class="hl-string">www.weibo.com</span><span class="hl-quotes">"</span><span class="hl-code">,
            </span><span class="hl-quotes">"</span><span class="hl-string">Country</span><span class="hl-quotes">"</span><span class="hl-code">: </span><span class="hl-quotes">"</span><span class="hl-string">CN</span><span class="hl-quotes">"</span><span class="hl-code">
</span><span class="hl-brackets">}</span><span class="hl-code">
</span><span class="hl-brackets">]</span><span class="hl-code">
</span><span class="hl-brackets">}</span></div>
</div>
</div>
<hr/>
<h2>AngularJS $http</h2>
<p>AngularJS $http 是一个用于读取web服务器上数据的服务。 </p>
<p>$http.get(url) 是用于读取服务器数据的函数。 </p>
<blockquote>
<h3>废弃声明 (v1.5)</h3>
<p>v1.5 中<code>$http</code> 的 <code>success</code> 和 <code>error</code> 方法已废弃。使用 <code>then</code> 方法替代。</p>
</blockquote>
<h3>通用方法实例</h3>
<div class="example">
<h2 class="example">AngularJS1.5 以上版本 - 实例</h2>
<div class="example_code">
<div class="hl-main"><span class="hl-reserved">var</span><span class="hl-code"> </span><span class="hl-identifier">app</span><span class="hl-code"> = </span><span class="hl-identifier">angular</span><span class="hl-code">.</span><span class="hl-identifier">module</span><span class="hl-brackets">(</span><span class="hl-quotes">'</span><span class="hl-string">myApp</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-brackets">[</span><span class="hl-brackets">]</span><span class="hl-brackets">)</span><span class="hl-code">;
    
</span><span class="hl-identifier">app</span><span class="hl-code">.</span><span class="hl-identifier">controller</span><span class="hl-brackets">(</span><span class="hl-quotes">'</span><span class="hl-string">siteCtrl</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-code">$</span><span class="hl-identifier">scope</span><span class="hl-code">, $</span><span class="hl-identifier">http</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
    $</span><span class="hl-identifier">http</span><span class="hl-brackets">(</span><span class="hl-brackets">{</span><span class="hl-code">
</span><span class="hl-identifier">method</span><span class="hl-code">: </span><span class="hl-quotes">'</span><span class="hl-string">GET</span><span class="hl-quotes">'</span><span class="hl-code">,
        </span><span class="hl-identifier">url</span><span class="hl-code">: </span><span class="hl-quotes">'</span><span class="hl-string">https://www.runoob.com/try/angularjs/data/sites.php</span><span class="hl-quotes">'</span><span class="hl-code">
</span><span class="hl-brackets">}</span><span class="hl-brackets">)</span><span class="hl-code">.</span><span class="hl-identifier">then</span><span class="hl-brackets">(</span><span class="hl-reserved">function</span><span class="hl-code"> </span><span class="hl-identifier">successCallback</span><span class="hl-brackets">(</span><span class="hl-identifier">response</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
            $</span><span class="hl-identifier">scope</span><span class="hl-code">.</span><span class="hl-identifier">names</span><span class="hl-code"> = </span><span class="hl-identifier">response</span><span class="hl-code">.</span><span class="hl-identifier">data</span><span class="hl-code">.</span><span class="hl-identifier">sites</span><span class="hl-code">;
        </span><span class="hl-brackets">}</span><span class="hl-code">, </span><span class="hl-reserved">function</span><span class="hl-code"> </span><span class="hl-identifier">errorCallback</span><span class="hl-brackets">(</span><span class="hl-identifier">response</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
</span><span class="hl-comment">//</span><span class="hl-comment"> 请求失败执行代码</span><span class="hl-comment"></span><span class="hl-code">
</span><span class="hl-brackets">}</span><span class="hl-brackets">)</span><span class="hl-code">;
  
</span><span class="hl-brackets">}</span><span class="hl-brackets">)</span><span class="hl-code">;</span></div>
</div>
<br/><a class="tryitbtn" href="/try/tryit.php?filename=try_ng_customers_json3" target="_blank">
	尝试一下 »</a>
</div>
<h3>简写方法实例</h3>
<div class="example">
<h2 class="example">AngularJS1.5 以上版本 - 实例</h2>
<div class="example_code">
<div class="hl-main"><span class="hl-brackets">&lt;</span><span class="hl-reserved">div</span><span class="hl-code"> </span><span class="hl-var">ng-app</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">myApp</span><span class="hl-quotes">"</span><span class="hl-code"> </span><span class="hl-var">ng-controller</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">siteCtrl</span><span class="hl-quotes">"</span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;</span><span class="hl-reserved">ul</span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;</span><span class="hl-reserved">li</span><span class="hl-code"> </span><span class="hl-var">ng-repeat</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">x in names</span><span class="hl-quotes">"</span><span class="hl-brackets">&gt;</span><span class="hl-code">
    {{ x.Name + ', ' + x.Country }}
  </span><span class="hl-brackets">&lt;/</span><span class="hl-reserved">li</span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;/</span><span class="hl-reserved">ul</span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;/</span><span class="hl-reserved">div</span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;</span><span class="hl-reserved">script</span><span class="hl-brackets">&gt;</span><span class="hl-code">
var app = angular.module('myApp', []);
app.controller('siteCtrl', function($scope, $http) {
  $http.get("http://www.runoob.com/try/angularjs/data/sites.php")
  .then(function (response) {$scope.names = response.data.sites;});
});
</span><span class="hl-brackets">&lt;/</span><span class="hl-reserved">script</span><span class="hl-brackets">&gt;</span></div>
</div>
<br/><a class="tryitbtn" href="/try/tryit.php?filename=try_ng_customers_json2" target="_blank">
	尝试一下 »</a>
</div>
<div class="example">
<h2 class="example">AngularJS1.5 以下版本 - 实例</h2>
<div class="example_code">
<div class="hl-main"><span class="hl-brackets">&lt;</span><span class="hl-reserved">div</span><span class="hl-code"> </span><span class="hl-var">ng-app</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">myApp</span><span class="hl-quotes">"</span><span class="hl-code"> </span><span class="hl-var">ng-controller</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">siteCtrl</span><span class="hl-quotes">"</span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;</span><span class="hl-reserved">ul</span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;</span><span class="hl-reserved">li</span><span class="hl-code"> </span><span class="hl-var">ng-repeat</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">x in names</span><span class="hl-quotes">"</span><span class="hl-brackets">&gt;</span><span class="hl-code">
    {{ x.Name + ', ' + x.Country }}
  </span><span class="hl-brackets">&lt;/</span><span class="hl-reserved">li</span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;/</span><span class="hl-reserved">ul</span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;/</span><span class="hl-reserved">div</span><span class="hl-brackets">&gt;</span><span class="hl-code">
</span><span class="hl-brackets">&lt;</span><span class="hl-reserved">script</span><span class="hl-brackets">&gt;</span><span class="hl-code">
var app = angular.module('myApp', []);
app.controller('siteCtrl', function($scope, $http) {
  $http.get("http://www.runoob.com/try/angularjs/data/sites.php")
  .success(function (response) {$scope.names = response.sites;});
});
</span><span class="hl-brackets">&lt;/</span><span class="hl-reserved">script</span><span class="hl-brackets">&gt;</span></div>
</div>
<br/><a class="tryitbtn" href="/try/tryit.php?filename=try_ng_customers_json" target="_blank">
	尝试一下 »</a>
</div>
<p><strong>应用解析:</strong></p>
<p>注意：以上代码的 get 请求是本站的服务器，你不能直接拷贝到你本地运行，会存在跨域问题，解决办法就是将 Customers_JSON.php 的数据拷贝到你自己的服务器上，附：<a href="http://www.runoob.com/w3cnote/php-ajax-cross-border.html" target="_blank">PHP Ajax 跨域问题最佳解决方案</a>。</p>
<p> AngularJS 应用通过 <strong>ng-app</strong> 定义。应用在 &lt;div&gt; 中执行。</p>
<p> <strong>ng-controller</strong> 指令设置了 <strong>controller 
对象</strong> 名。</p>
<p>函数 <strong>customersController</strong> 是一个标准的 JavaScript <strong>
对象构造器</strong>。</p>
<p>控制器对象有一个属性: <strong>$scope.names</strong>。</p>
<p><strong>$http.get()</strong> 从web服务器上读取静态  <strong>JSON 数据</strong>。 </p>
<p>服务器数据文件为： 
<a href="http://www.runoob.com/try/angularjs/data/sites.php" target="_blank"><strong>
http://www.runoob.com/try/angularjs/data/sites.php</strong></a>。</p>
<p>当从服务端载入 JSON 数据时，<strong>$scope.names</strong> 变为一个数组。</p>
<p>
</p>
<table class="lamp"><tr>
<th style="width:34px"><img alt="Note" src="/images/lamp.jpg" style="height:32px;width:32px"/></th>
<td>以上代码也可以用于读取数据库数据。</td>
</tr></table>
</div>