<div class="article-intro" id="content">
<h1>XML DOM <span class="color_h1">节点列表</span>
</h1>
<hr/>
<p class="intro">节点列表由 getElementsByTagName() 方法和 childNodes 属性返回。</p>
<hr/>
<div class="tryit_ex">
<img alt="实例" height="46px" src="/images/tryitimg.gif" width="40"/><h2>尝试一下 - 实例</h2>
</div>
<p>下面的实例使用 XML 文件
<a href="/try/demo_source/books.xml" target="_blank">books.xml</a>。<br/>
函数 <a href="dom-loadxmldoc.html" target="_blank">loadXMLDoc()</a>，位于外部 JavaScript 中，用于加载 XML 文件。</p>
<p><a href="/try/try.php?filename=try_dom_nodelist" target="_blank">从第一个 &lt;title&gt; 元素获取文本</a><br/>
本例使用 getElementsByTagName() 方法从 "books.xml" 中的第一个 &lt;title&gt; 元素获取文本。</p>
<p><a href="/try/try.php?filename=try_dom_nodelist_length" target="_blank">使用 length 属性遍历节点</a><br/>
本例使用节点列表和 length 属性来遍历 "books.xml" 中所有的 &lt;title&gt; 元素。</p>
<p><a href="/try/try.php?filename=try_dom_attributes" target="_blank">获取元素的属性</a><br/>
本例使用属性列表从 "books.xml" 中的第一个 &lt;book&gt; 元素获取属性。</p>
<hr/>
<h2>DOM 节点列表（Node List）</h2>
<p>当使用诸如 childNodes 或 getElementsByTagName() 的属性或方法是，会返回节点列表对象。</p>
<p>节点列表对象表示节点的列表，与 XML 中的顺序相同。</p>
<p>节点列表中的节点使用从 0 开始的索引号进行访问。</p>
<p>下面的图像表示 "<a href="/try/demo_source/books.xml" target="_blank">books.xml</a>" 中 &lt;title&gt; 元素的节点列表：</p>
<img alt="DOM node list" src="/wp-content/uploads/2013/09/nodelist.gif"/><br/><p>下面的代码片段通过使用 <a href="dom-loadxmldoc.html">loadXMLDoc()</a> 把 "<a href="/try/demo_source/books.xml" target="_blank">books.xml</a>" 载入 xmlDoc 中，并返回 "books.xml" 中 title 元素的节点列表：</p>
<div class="code notranslate"><div>

xmlDoc=loadXMLDoc("books.xml");<br/><br/>
x=xmlDoc.getElementsByTagName("title");
</div></div>
<p>在上面的语句执行之后，x 是节点列表对象。</p>
<p>下面的代码片段从节点列表（x）中的第一个 &lt;title&gt; 元素返回文本：</p>
<div class="example">
<h2 class="example">实例</h2>
<div class="example_code">
<div class="hl-main"><span class="hl-identifier">txt</span><span class="hl-code">=</span><span class="hl-identifier">x</span><span class="hl-brackets">[</span><span class="hl-number">0</span><span class="hl-brackets">]</span><span class="hl-code">.</span><span class="hl-identifier">childNodes</span><span class="hl-brackets">[</span><span class="hl-number">0</span><span class="hl-brackets">]</span><span class="hl-code">.</span><span class="hl-identifier">nodeValue</span><span class="hl-code">;</span></div>
</div>
<br/><a class="tryitbtn" href="/try/try.php?filename=try_dom_nodelist" target="_blank">尝试一下 »</a>
</div>
<p>在上面的语句执行之后，txt = "Everyday Italian"。</p>
<hr/>
<h2>节点列表长度（Node List Length）</h2>
<p>节点列表对象会保持自身的更新。如果删除或添加了元素，列表会自动更新。</p>
<p>节点列表的 length 属性是列表中节点的数量。</p>
<p>下面的代码片段通过使用 <a href="dom-loadxmldoc.html">loadXMLDoc()</a> 把 "<a href="/try/demo_source/books.xml" target="_blank">books.xml</a>" 载入 xmlDoc 中，并返回 "books.xml" 中 &lt;title&gt; 元素的数量：</p>
<div class="code"><div>

xmlDoc=loadXMLDoc("books.xml");<br/><br/>
x=xmlDoc.getElementsByTagName('title').length;
</div></div>
<p>在上面的语句执行之后，x = 4。</p>
<p>节点列表的长度可用于遍历列表中所有的元素。</p>
<p>下面的代码片段使用 length 属性来遍历 &lt;title&gt; 元素的列表：</p>
<div class="example">
<h2 class="example">实例</h2>
<div class="example_code">
<div class="hl-main"><span class="hl-identifier">xmlDoc</span><span class="hl-code">=</span><span class="hl-identifier">loadXMLDoc</span><span class="hl-brackets">(</span><span class="hl-quotes">"</span><span class="hl-string">books.xml</span><span class="hl-quotes">"</span><span class="hl-brackets">)</span><span class="hl-code">;
 
</span><span class="hl-comment">//</span><span class="hl-comment"> x 变量获取指定节点列表</span><span class="hl-comment"></span><span class="hl-code">
</span><span class="hl-identifier">x</span><span class="hl-code">=</span><span class="hl-identifier">xmlDoc</span><span class="hl-code">.</span><span class="hl-identifier">getElementsByTagName</span><span class="hl-brackets">(</span><span class="hl-quotes">'</span><span class="hl-string">title</span><span class="hl-quotes">'</span><span class="hl-brackets">)</span><span class="hl-code">;
 
</span><span class="hl-reserved">for</span><span class="hl-code"> </span><span class="hl-brackets">(</span><span class="hl-identifier">i</span><span class="hl-code">=</span><span class="hl-number">0</span><span class="hl-code">;</span><span class="hl-identifier">i</span><span class="hl-code">&lt;</span><span class="hl-identifier">x</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-code">;</span><span class="hl-identifier">i</span><span class="hl-code">++</span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-brackets">{</span><span class="hl-code">
</span><span class="hl-builtin">document</span><span class="hl-code">.</span><span class="hl-identifier">write</span><span class="hl-brackets">(</span><span class="hl-identifier">x</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">]</span><span class="hl-code">.</span><span class="hl-identifier">childNodes</span><span class="hl-brackets">[</span><span class="hl-number">0</span><span class="hl-brackets">]</span><span class="hl-code">.</span><span class="hl-identifier">nodeValue</span><span class="hl-brackets">)</span><span class="hl-code">;
  </span><span class="hl-builtin">document</span><span class="hl-code">.</span><span class="hl-identifier">write</span><span class="hl-brackets">(</span><span class="hl-quotes">"</span><span class="hl-quotes">"</span><span class="hl-brackets">)</span><span class="hl-code">;
</span><span class="hl-brackets">}</span></div>
</div>
<p>输出：</p>
<div class="example_code notranslate">
Everyday Italian<br/>
Harry Potter<br/>
XQuery Kick Start<br/>
Learning XML
</div>
<br/><a class="tryitbtn" href="/try/try.php?filename=try_dom_nodelist_length" target="_blank">尝试一下 »</a>
</div>
<p>实例解释：</p>
<ol>
<li>使用 <a href="dom-loadxmldoc.html">loadXMLDoc()</a> 把 "<a href="/try/demo_source/books.xml" target="_blank">books.xml</a>" 载入 xmlDoc 中</li>
<li>设置 x 变量来保存所有 title 元素的节点列表</li>
<li>从所有 &lt;title&gt; 元素的文本节点输出值</li>
</ol>
<hr/>
<h2>DOM 属性列表（命名节点图 Named Node Map）</h2>
<p>元素节点的 attributes 属性返回属性节点的列表。</p>
<p>这被称为命名节点图（Named Node Map），除了方法和属性上的一些差别以外，它与节点列表相似。</p>
<p>属性列表会保持自身的更新。如果删除或添加属性，这个列表会自动更新。</p>
<p>下面的代码片段通过使用 <a href="dom-loadxmldoc.html">loadXMLDoc()</a> 把 "<a href="/try/demo_source/books.xml" target="_blank">books.xml</a>" 载入 xmlDoc 中，并返回 "books.xml" 中第一个 &lt;book&gt; 元素的属性节点列表：</p>
<div class="code"><div>

xmlDoc=loadXMLDoc("books.xml");<br/><br/>
x=xmlDoc.getElementsByTagName('book')[0].attributes;
</div></div>
<p>在上面的代码执行之后，x.length 等于属性的数量，可使用 x.getNamedItem() 返回属性节点。</p>
<p>下面的代码片段显示一个 book 的 "category" 属性的值，以及其属性的数量：</p>
<div class="example">
<h2 class="example">实例</h2>
<div class="example_code">
<div class="hl-main"><span class="hl-identifier">xmlDoc</span><span class="hl-code">=</span><span class="hl-identifier">loadXMLDoc</span><span class="hl-brackets">(</span><span class="hl-quotes">"</span><span class="hl-string">books.xml</span><span class="hl-quotes">"</span><span class="hl-brackets">)</span><span class="hl-code">;
 
</span><span class="hl-identifier">x</span><span class="hl-code">=</span><span class="hl-identifier">xmlDoc</span><span class="hl-code">.</span><span class="hl-identifier">getElementsByTagName</span><span class="hl-brackets">(</span><span class="hl-quotes">"</span><span class="hl-string">book</span><span class="hl-quotes">"</span><span class="hl-brackets">)</span><span class="hl-brackets">[</span><span class="hl-number">0</span><span class="hl-brackets">]</span><span class="hl-code">.</span><span class="hl-identifier">attributes</span><span class="hl-code">;
 
</span><span class="hl-builtin">document</span><span class="hl-code">.</span><span class="hl-identifier">write</span><span class="hl-brackets">(</span><span class="hl-identifier">x</span><span class="hl-code">.</span><span class="hl-identifier">getNamedItem</span><span class="hl-brackets">(</span><span class="hl-quotes">"</span><span class="hl-string">category</span><span class="hl-quotes">"</span><span class="hl-brackets">)</span><span class="hl-code">.</span><span class="hl-identifier">nodeValue</span><span class="hl-brackets">)</span><span class="hl-code">;
</span><span class="hl-builtin">document</span><span class="hl-code">.</span><span class="hl-identifier">write</span><span class="hl-brackets">(</span><span class="hl-quotes">"</span><span class="hl-quotes">"</span><span class="hl-code"> + </span><span class="hl-identifier">x</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">)</span><span class="hl-code">;</span></div>
</div>
<p>输出：</p>
<div class="example_code notranslate">
cooking<br/>
1
</div>
<br/><a class="tryitbtn" href="/try/try.php?filename=try_dom_attributes" target="_blank">尝试一下 »</a>
</div>
<p>实例解释：</p>
<ol>
<li>使用 <a href="dom-loadxmldoc.html">loadXMLDoc()</a> 把 "<a href="/try/demo_source/books.xml" target="_blank">books.xml</a>" 载入 xmlDoc 中</li></ol></div>