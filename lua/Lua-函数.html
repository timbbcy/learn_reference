<div class="article-intro" id="content">
<h1>Lua 函数</h1>
<p>在Lua中，函数是对语句和表达式进行抽象的主要方法。既可以用来处理一些特殊的工作，也可以用来计算一些值。</p>
<p>Lua 提供了许多的内建函数，你可以很方便的在程序中调用它们，如print()函数可以将传入的参数打印在控制台上。</p>
<p>Lua 函数主要有两种用途：</p>
<ul><li>
1.完成指定的任务，这种情况下函数作为调用语句使用；</li><li>2.计算并返回值，这种情况下函数作为赋值语句的表达式使用。
</li></ul>
<h3>函数定义</h3>
<p>Lua 编程语言函数定义格式如下：</p>
<pre>
optional_function_scope function function_name( argument1, argument2, argument3..., argumentn)
    function_body
    return result_params_comma_separated
end
</pre>
<p>解析：</p>
<ul>
<li><p><strong>optional_function_scope:</strong> 该参数是可选的制定函数是全局函数还是局部函数，未设置该参数默认为全局函数，如果你需要设置函数为局部函数需要使用关键字 <strong>local</strong>。</p></li>
<li><p><strong>function_name: </strong>指定函数名称。</p></li>
<li><p><strong>argument1, argument2, argument3..., argumentn: </strong>函数参数，多个参数以逗号隔开，函数也可以不带参数。</p></li>
<li><p><strong>function_body: </strong>函数体，函数中需要执行的代码语句块。</p></li>
<li><p><strong>result_params_comma_separated: </strong>函数返回值，Lua语言函数可以返回多个值，每个值以逗号隔开。</p></li>
<h3>实例</h3>
<p>以下实例定义了函数 <b>max()</b>，参数为 num1, num2，用于比较两值的大小，并返回最大值：</p>
<pre>
--[[ 函数返回两个值的最大值 --]]
function max(num1, num2)

   if (num1 &gt; num2) then
      result = num1;
   else
      result = num2;
   end

   return result; 
end
-- 调用函数
print("两值比较最大值为 ",max(10,4))
print("两值比较最大值为 ",max(5,6))
</pre>
<p>以上代码执行结果为：</p>
<pre>
两值比较最大值为     10
两值比较最大值为     6
</pre>
<p>Lua 中我们可以将函数作为参数传递给函数，如下实例：</p>
<pre>
myprint = function(param)
   print("这是打印函数 -   ##",param,"##")
end

function add(num1,num2,functionPrint)
   result = num1 + num2
   -- 调用传递的函数参数
   functionPrint(result)
end
myprint(10)
-- myprint 函数作为参数传递
add(2,5,myprint)
</pre>
<p>以上代码执行结果为：</p>
<pre>
这是打印函数 -   ##    10    ##
这是打印函数 -   ##    7    ##
</pre>
<hr/><h2>多返回值</h2>
<p>Lua函数可以返回多个结果值，比如string.find，其返回匹配串"开始和结束的下标"（如果不存在匹配串返回nil）。</p>
<pre>
&gt; s, e = string.find("www.runoob.com", "runoob") 
&gt; print(s, e)
5    10
</pre>
<p>Lua函数中，在return后列出要返回的值得列表即可返回多值，如：</p>
<pre>
function maximum (a)
    local mi = 1             -- 最大值索引
    local m = a[mi]          -- 最大值
    for i,val in ipairs(a) do
       if val &gt; m then
           mi = i
           m = val
       end
    end
    return m, mi
end

print(maximum({8,10,23,12,5}))
</pre>
<p>以上代码执行结果为：</p>
<pre>
23    3
</pre>
<hr/>
<h2>可变参数</h2>
<p>
Lua函数可以接受可变数目的参数，和C语言类似在函数参数列表中使用三点（...) 表示函数有可变的参数。</p>
<p>Lua将函数的参数放在一个叫arg的表中，<strong>#arg</strong> 表示传入参数的个数。</p><p>
例如，我们计算几个数的平均值：</p>
<pre>
function average(...)
   result = 0
   local arg={...}
   for i,v in ipairs(arg) do
      result = result + v
   end
   print("总共传入 " .. #arg .. " 个数")
   return result/#arg
end

print("平均值为",average(10,5,3,4,5,6))
</pre>
<p>以上代码执行结果为：</p>
<pre>
总共传入 6 个数
平均值为    5.5
</pre>
</ul></div>