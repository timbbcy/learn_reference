<div class="article-intro" id="content">
<h1>JSON <span class="color_h1">使用</span>
</h1>
<hr/>
<h2>把 JSON 文本转换为 JavaScript 对象</h2>
<p>JSON 最常见的用法之一，是从 web 服务器上读取 JSON 数据（作为文件或作为 HttpRequest），将 JSON 数据转换为 JavaScript 对象，然后在网页中使用该数据。</p>
<p>为了更简单地为您讲解，我们使用字符串作为输入进行演示（而不是文件）。</p>
<hr/>
<h2>JSON 实例 - 来自字符串的对象</h2>
<p>创建包含 JSON 语法的 JavaScript 字符串：</p>
<div class="example">
<div class="example_code">
<div class="hl-main"><span class="hl-reserved">var</span><span class="hl-code"> </span><span class="hl-identifier">txt</span><span class="hl-code"> = </span><span class="hl-quotes">'</span><span class="hl-string">{ "sites" : [</span><span class="hl-quotes">'</span><span class="hl-code"> +
</span><span class="hl-quotes">'</span><span class="hl-string">{ "name":"菜鸟教程" , "url":"www.runoob.com" },</span><span class="hl-quotes">'</span><span class="hl-code"> +
</span><span class="hl-quotes">'</span><span class="hl-string">{ "name":"google" , "url":"www.google.com" },</span><span class="hl-quotes">'</span><span class="hl-code"> +
</span><span class="hl-quotes">'</span><span class="hl-string">{ "name":"微博" , "url":"www.weibo.com" } ]}</span><span class="hl-quotes">'</span><span class="hl-code">;</span></div>
</div>
</div>
<p>由于 JSON 语法是 JavaScript 语法的子集，JavaScript 函数 eval() 可用于将 JSON 文本转换为 JavaScript 对象。</p>
<p>eval() 函数使用的是 JavaScript 编译器，可解析 JSON 文本，然后生成 JavaScript 对象。必须把文本包围在括号中，这样才能避免语法错误：</p>
<div class="code notranslate"><div>

var obj = eval ("(" + txt + ")");
</div></div>
<p>在网页中使用 JavaScript 对象：</p>
<div class="example">
<h2 class="example">实例</h2>
<div class="example_code">
<div class="hl-main"><span class="hl-reserved">var</span><span class="hl-code"> </span><span class="hl-identifier">txt</span><span class="hl-code"> = </span><span class="hl-quotes">'</span><span class="hl-string">{ "sites" : [</span><span class="hl-quotes">'</span><span class="hl-code"> +
</span><span class="hl-quotes">'</span><span class="hl-string">{ "name":"菜鸟教程" , "url":"www.runoob.com" },</span><span class="hl-quotes">'</span><span class="hl-code"> +
</span><span class="hl-quotes">'</span><span class="hl-string">{ "name":"google" , "url":"www.google.com" },</span><span class="hl-quotes">'</span><span class="hl-code"> +
</span><span class="hl-quotes">'</span><span class="hl-string">{ "name":"微博" , "url":"www.weibo.com" } ]}</span><span class="hl-quotes">'</span><span class="hl-code">;
 
</span><span class="hl-reserved">var</span><span class="hl-code"> </span><span class="hl-identifier">obj</span><span class="hl-code"> = </span><span class="hl-identifier">eval</span><span class="hl-code"> </span><span class="hl-brackets">(</span><span class="hl-quotes">"</span><span class="hl-string">(</span><span class="hl-quotes">"</span><span class="hl-code"> + </span><span class="hl-identifier">txt</span><span class="hl-code"> + </span><span class="hl-quotes">"</span><span class="hl-string">)</span><span class="hl-quotes">"</span><span class="hl-brackets">)</span><span class="hl-code">;
 
</span><span class="hl-builtin">document</span><span class="hl-code">.</span><span class="hl-identifier">getElementById</span><span class="hl-brackets">(</span><span class="hl-quotes">"</span><span class="hl-string">name</span><span class="hl-quotes">"</span><span class="hl-brackets">)</span><span class="hl-code">.</span><span class="hl-identifier">innerHTML</span><span class="hl-code">=</span><span class="hl-identifier">obj</span><span class="hl-code">.</span><span class="hl-identifier">sites</span><span class="hl-brackets">[</span><span class="hl-number">0</span><span class="hl-brackets">]</span><span class="hl-code">.</span><span class="hl-identifier">name</span><span class="hl-code">
</span><span class="hl-builtin">document</span><span class="hl-code">.</span><span class="hl-identifier">getElementById</span><span class="hl-brackets">(</span><span class="hl-quotes">"</span><span class="hl-string">url</span><span class="hl-quotes">"</span><span class="hl-brackets">)</span><span class="hl-code">.</span><span class="hl-identifier">innerHTML</span><span class="hl-code">=</span><span class="hl-identifier">obj</span><span class="hl-code">.</span><span class="hl-identifier">sites</span><span class="hl-brackets">[</span><span class="hl-number">0</span><span class="hl-brackets">]</span><span class="hl-code">.</span><span class="hl-identifier">url</span></div>
</div>
<br/><a class="tryitbtn" href="/try/try.php?filename=tryjson_eval" target="_blank">尝试一下 »</a>
</div>
<hr/>
<h2>JSON 解析器</h2>
<p><img alt="lamp" border="0" src="/images/lamp2.gif"/>  eval() 函数可编译并执行任何 JavaScript 代码。这隐藏了一个潜在的安全问题。</p>
<p>使用 JSON 解析器将 JSON 转换为 JavaScript 对象是更安全的做法。JSON 解析器只能识别 JSON 文本，而不会编译脚本。 </p>
<p>在浏览器中，这提供了原生的 JSON 支持，而且 JSON 解析器的速度更快。</p>
<p>较新的浏览器和最新的 ECMAScript (JavaScript) 标准中均包含了原生的对 JSON 的支持。</p>
<table class="reference notranslate">
<tr>
<th width="50%">Web 浏览器支持</th>
<th>Web 软件支持</th>
</tr>
<tr>
<td align="top"><ul type="square">
<li>Firefox (Mozilla) 3.5</li>
<li>Internet Explorer 8</li>
<li>Chrome</li>
<li>Opera 10</li>
<li>Safari 4<br/>
</li>
</ul></td>
<td align="top"><ul type="square">
<li>jQuery</li>
<li>Yahoo UI</li>
<li>Prototype</li>
<li>Dojo</li>
<li>ECMAScript 1.5<br/>
</li>
</ul></td>
</tr>
</table>
<p><a class="tryitbtn" href="/try/try.php?filename=tryjson_parse" target="_blank">尝试一下 »</a></p>
<p>对于较老的浏览器，可使用 JavaScript 库：
<a href="https://github.com/douglascrockford/JSON-js" target="_blank">
https://github.com/douglascrockford/JSON-js</a></p>
<p>JSON 格式最初是
<a href="http://developer.yahoo.com/yui/theater/video.php?v=crockford-json" target="_blank">
originally specified by Douglas Crockford</a> </p>
</div>