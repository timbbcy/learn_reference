<div class="article-intro" id="content">
<h1>Java MySQL 连接
</h1>
<p>本章节我们为大家介绍 Java 如何使用 使用 JDBC 连接 MySQL 数据库。</p>
<p>Java 连接 MySQL 需要驱动包，最新版下载地址为：<strong><a href="http://dev.mysql.com/downloads/connector/j/" target="_blank">http://dev.mysql.com/downloads/connector/j/</a></strong>，解压后得到jar库文件，然后在对应的项目中导入该库文件。</p>
<p>你可以下载本站提供的 jar 包：<strong><a href="http://static.runoob.com/download/mysql-connector-java-5.1.39-bin.jar" target="_blank">mysql-connector-java-5.1.39-bin.jar</a></strong></p>
<p>本实例使用的是 Eclipse，导入 jar 包：</p>
<p><img src="http://www.runoob.com/wp-content/uploads/2013/12/191E2E30-DD23-41C8-A419-DFEAEAE06BF6.jpg" width="40%"/></p>
<hr/>
<h2>创建测试数据</h2>
<p>接下来我们在 MySQL 中创建 RUNOOB 数据库，并创建 websites 数据表，表结构如下：</p>
<div class="example">
<div class="example_code">
<div class="hl-main"><span class="hl-reserved">CREATE</span><span class="hl-code"> </span><span class="hl-reserved">TABLE</span><span class="hl-code"> </span><span class="hl-quotes">`</span><span class="hl-identifier">websites</span><span class="hl-quotes">`</span><span class="hl-code"> </span><span class="hl-brackets">(</span><span class="hl-code">
</span><span class="hl-quotes">`</span><span class="hl-identifier">id</span><span class="hl-quotes">`</span><span class="hl-code"> </span><span class="hl-reserved">int</span><span class="hl-brackets">(</span><span class="hl-number">11</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-reserved">NOT</span><span class="hl-code"> </span><span class="hl-reserved">NULL</span><span class="hl-code"> </span><span class="hl-identifier">AUTO_INCREMENT</span><span class="hl-code">,
  </span><span class="hl-quotes">`</span><span class="hl-identifier">name</span><span class="hl-quotes">`</span><span class="hl-code"> </span><span class="hl-reserved">char</span><span class="hl-brackets">(</span><span class="hl-number">20</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-reserved">NOT</span><span class="hl-code"> </span><span class="hl-reserved">NULL</span><span class="hl-code"> </span><span class="hl-reserved">DEFAULT</span><span class="hl-code"> </span><span class="hl-quotes">'</span><span class="hl-quotes">'</span><span class="hl-code"> </span><span class="hl-identifier">COMMENT</span><span class="hl-code"> </span><span class="hl-quotes">'</span><span class="hl-string">站点名称</span><span class="hl-quotes">'</span><span class="hl-code">,
  </span><span class="hl-quotes">`</span><span class="hl-identifier">url</span><span class="hl-quotes">`</span><span class="hl-code"> </span><span class="hl-reserved">varchar</span><span class="hl-brackets">(</span><span class="hl-number">255</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-reserved">NOT</span><span class="hl-code"> </span><span class="hl-reserved">NULL</span><span class="hl-code"> </span><span class="hl-reserved">DEFAULT</span><span class="hl-code"> </span><span class="hl-quotes">'</span><span class="hl-quotes">'</span><span class="hl-code">,
  </span><span class="hl-quotes">`</span><span class="hl-identifier">alexa</span><span class="hl-quotes">`</span><span class="hl-code"> </span><span class="hl-reserved">int</span><span class="hl-brackets">(</span><span class="hl-number">11</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-reserved">NOT</span><span class="hl-code"> </span><span class="hl-reserved">NULL</span><span class="hl-code"> </span><span class="hl-reserved">DEFAULT</span><span class="hl-code"> </span><span class="hl-quotes">'</span><span class="hl-string">0</span><span class="hl-quotes">'</span><span class="hl-code"> </span><span class="hl-identifier">COMMENT</span><span class="hl-code"> </span><span class="hl-quotes">'</span><span class="hl-string">Alexa 排名</span><span class="hl-quotes">'</span><span class="hl-code">,
  </span><span class="hl-quotes">`</span><span class="hl-identifier">country</span><span class="hl-quotes">`</span><span class="hl-code"> </span><span class="hl-reserved">char</span><span class="hl-brackets">(</span><span class="hl-number">10</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-reserved">NOT</span><span class="hl-code"> </span><span class="hl-reserved">NULL</span><span class="hl-code"> </span><span class="hl-reserved">DEFAULT</span><span class="hl-code"> </span><span class="hl-quotes">'</span><span class="hl-quotes">'</span><span class="hl-code"> </span><span class="hl-identifier">COMMENT</span><span class="hl-code"> </span><span class="hl-quotes">'</span><span class="hl-string">国家</span><span class="hl-quotes">'</span><span class="hl-code">,
  </span><span class="hl-reserved">PRIMARY</span><span class="hl-code"> </span><span class="hl-reserved">KEY</span><span class="hl-code"> </span><span class="hl-brackets">(</span><span class="hl-quotes">`</span><span class="hl-identifier">id</span><span class="hl-quotes">`</span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-identifier">ENGINE</span><span class="hl-code">=</span><span class="hl-identifier">InnoDB</span><span class="hl-code"> </span><span class="hl-identifier">AUTO_INCREMENT</span><span class="hl-code">=</span><span class="hl-number">10</span><span class="hl-code"> </span><span class="hl-reserved">DEFAULT</span><span class="hl-code"> </span><span class="hl-identifier">CHARSET</span><span class="hl-code">=</span><span class="hl-identifier">utf8</span><span class="hl-code">;</span></div>
</div>
</div>
<p>插入一些数据：</p>
<div class="example">
<div class="example_code">
<div class="hl-main"><span class="hl-reserved">INSERT</span><span class="hl-code"> </span><span class="hl-reserved">INTO</span><span class="hl-code"> </span><span class="hl-quotes">`</span><span class="hl-identifier">websites</span><span class="hl-quotes">`</span><span class="hl-code"> </span><span class="hl-reserved">VALUES</span><span class="hl-code"> </span><span class="hl-brackets">(</span><span class="hl-quotes">'</span><span class="hl-string">1</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-quotes">'</span><span class="hl-string">Google</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-quotes">'</span><span class="hl-string">https://www.google.cm/</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-quotes">'</span><span class="hl-string">1</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-quotes">'</span><span class="hl-string">USA</span><span class="hl-quotes">'</span><span class="hl-brackets">)</span><span class="hl-code">, </span><span class="hl-brackets">(</span><span class="hl-quotes">'</span><span class="hl-string">2</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-quotes">'</span><span class="hl-string">淘宝</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-quotes">'</span><span class="hl-string">https://www.taobao.com/</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-quotes">'</span><span class="hl-string">13</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-quotes">'</span><span class="hl-string">CN</span><span class="hl-quotes">'</span><span class="hl-brackets">)</span><span class="hl-code">, </span><span class="hl-brackets">(</span><span class="hl-quotes">'</span><span class="hl-string">3</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-quotes">'</span><span class="hl-string">菜鸟教程</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-quotes">'</span><span class="hl-string">http://www.runoob.com</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-quotes">'</span><span class="hl-string">5892</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-quotes">'</span><span class="hl-quotes">'</span><span class="hl-brackets">)</span><span class="hl-code">, </span><span class="hl-brackets">(</span><span class="hl-quotes">'</span><span class="hl-string">4</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-quotes">'</span><span class="hl-string">微博</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-quotes">'</span><span class="hl-string">http://weibo.com/</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-quotes">'</span><span class="hl-string">20</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-quotes">'</span><span class="hl-string">CN</span><span class="hl-quotes">'</span><span class="hl-brackets">)</span><span class="hl-code">, </span><span class="hl-brackets">(</span><span class="hl-quotes">'</span><span class="hl-string">5</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-quotes">'</span><span class="hl-string">Facebook</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-quotes">'</span><span class="hl-string">https://www.facebook.com/</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-quotes">'</span><span class="hl-string">3</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-quotes">'</span><span class="hl-string">USA</span><span class="hl-quotes">'</span><span class="hl-brackets">)</span><span class="hl-code">;</span></div>
</div>
</div>
<p>数据表显示如下：</p>
<p><img src="http://www.runoob.com/wp-content/uploads/2013/12/mysql-data.jpg"/></p><hr/>
<h2>连接数据库</h2>
<p>以下实例使用了 JDBC 连接 MySQL 数据库，注意一些数据如用户名，密码需要根据你的开发环境来配置：</p>
<div class="example">
<h2 class="example">MySQLDemo.java 文件代码：</h2>
<div class="example_code">
<div class="hl-main"><span class="hl-identifier">package</span><span class="hl-code"> </span><span class="hl-identifier">com</span><span class="hl-code">.</span><span class="hl-identifier">runoob</span><span class="hl-code">.</span><span class="hl-identifier">test</span><span class="hl-code">;
 
</span><span class="hl-identifier">import</span><span class="hl-code"> </span><span class="hl-identifier">java</span><span class="hl-code">.</span><span class="hl-reserved">sql</span><span class="hl-code">.*;
 
</span><span class="hl-reserved">public</span><span class="hl-code"> </span><span class="hl-reserved">class</span><span class="hl-code"> </span><span class="hl-identifier">MySQLDemo</span><span class="hl-code"> {
 
    // </span><span class="hl-identifier">JDBC</span><span class="hl-code"> 驱动名及数据库 </span><span class="hl-identifier">URL</span><span class="hl-code">
</span><span class="hl-reserved">static</span><span class="hl-code"> </span><span class="hl-var">final</span><span class="hl-code"> </span><span class="hl-identifier">String</span><span class="hl-code"> </span><span class="hl-identifier">JDBC_DRIVER</span><span class="hl-code"> = </span><span class="hl-quotes">"</span><span class="hl-string">com.mysql.jdbc.Driver</span><span class="hl-quotes">"</span><span class="hl-code">;  
    </span><span class="hl-reserved">static</span><span class="hl-code"> </span><span class="hl-var">final</span><span class="hl-code"> </span><span class="hl-identifier">String</span><span class="hl-code"> </span><span class="hl-identifier">DB_URL</span><span class="hl-code"> = </span><span class="hl-quotes">"</span><span class="hl-string">jdbc:mysql://localhost:3306/RUNOOB</span><span class="hl-quotes">"</span><span class="hl-code">;
 
    // 数据库的用户名与密码，需要根据自己的设置
    </span><span class="hl-reserved">static</span><span class="hl-code"> </span><span class="hl-var">final</span><span class="hl-code"> </span><span class="hl-identifier">String</span><span class="hl-code"> </span><span class="hl-reserved">USER</span><span class="hl-code"> = </span><span class="hl-quotes">"</span><span class="hl-string">root</span><span class="hl-quotes">"</span><span class="hl-code">;
    </span><span class="hl-reserved">static</span><span class="hl-code"> </span><span class="hl-var">final</span><span class="hl-code"> </span><span class="hl-identifier">String</span><span class="hl-code"> </span><span class="hl-identifier">PASS</span><span class="hl-code"> = </span><span class="hl-quotes">"</span><span class="hl-string">123456</span><span class="hl-quotes">"</span><span class="hl-code">;
 
    </span><span class="hl-reserved">public</span><span class="hl-code"> </span><span class="hl-reserved">static</span><span class="hl-code"> </span><span class="hl-identifier">void</span><span class="hl-code"> </span><span class="hl-identifier">main</span><span class="hl-brackets">(</span><span class="hl-identifier">String</span><span class="hl-code">[] </span><span class="hl-identifier">args</span><span class="hl-brackets">)</span><span class="hl-code"> {
        </span><span class="hl-reserved">Connection</span><span class="hl-code"> </span><span class="hl-identifier">conn</span><span class="hl-code"> = </span><span class="hl-reserved">null</span><span class="hl-code">;
        </span><span class="hl-reserved">Statement</span><span class="hl-code"> </span><span class="hl-identifier">stmt</span><span class="hl-code"> = </span><span class="hl-reserved">null</span><span class="hl-code">;
        </span><span class="hl-identifier">try</span><span class="hl-code">{
            // 注册 </span><span class="hl-identifier">JDBC</span><span class="hl-code"> 驱动
            </span><span class="hl-reserved">Class</span><span class="hl-code">.</span><span class="hl-identifier">forName</span><span class="hl-brackets">(</span><span class="hl-quotes">"</span><span class="hl-string">com.mysql.jdbc.Driver</span><span class="hl-quotes">"</span><span class="hl-brackets">)</span><span class="hl-code">;
        
            // 打开链接
            </span><span class="hl-var">System</span><span class="hl-code">.</span><span class="hl-reserved">out</span><span class="hl-code">.</span><span class="hl-identifier">println</span><span class="hl-brackets">(</span><span class="hl-quotes">"</span><span class="hl-string">连接数据库...</span><span class="hl-quotes">"</span><span class="hl-brackets">)</span><span class="hl-code">;
            </span><span class="hl-identifier">conn</span><span class="hl-code"> = </span><span class="hl-identifier">DriverManager</span><span class="hl-code">.</span><span class="hl-identifier">getConnection</span><span class="hl-brackets">(</span><span class="hl-identifier">DB_URL</span><span class="hl-code">,</span><span class="hl-reserved">USER</span><span class="hl-code">,</span><span class="hl-identifier">PASS</span><span class="hl-brackets">)</span><span class="hl-code">;
        
            // 执行查询
            </span><span class="hl-var">System</span><span class="hl-code">.</span><span class="hl-reserved">out</span><span class="hl-code">.</span><span class="hl-identifier">println</span><span class="hl-brackets">(</span><span class="hl-quotes">"</span><span class="hl-string"> 实例化Statement对象...</span><span class="hl-quotes">"</span><span class="hl-brackets">)</span><span class="hl-code">;
            </span><span class="hl-identifier">stmt</span><span class="hl-code"> = </span><span class="hl-identifier">conn</span><span class="hl-code">.</span><span class="hl-identifier">createStatement</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">;
            </span><span class="hl-identifier">String</span><span class="hl-code"> </span><span class="hl-reserved">sql</span><span class="hl-code">;
            </span><span class="hl-reserved">sql</span><span class="hl-code"> = </span><span class="hl-quotes">"</span><span class="hl-string">SELECT id, name, url FROM websites</span><span class="hl-quotes">"</span><span class="hl-code">;
            </span><span class="hl-identifier">ResultSet</span><span class="hl-code"> </span><span class="hl-identifier">rs</span><span class="hl-code"> = </span><span class="hl-identifier">stmt</span><span class="hl-code">.</span><span class="hl-identifier">executeQuery</span><span class="hl-brackets">(</span><span class="hl-reserved">sql</span><span class="hl-brackets">)</span><span class="hl-code">;
        
            // 展开结果集数据库
            </span><span class="hl-identifier">while</span><span class="hl-brackets">(</span><span class="hl-identifier">rs</span><span class="hl-code">.</span><span class="hl-reserved">next</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-brackets">)</span><span class="hl-code">{
                // 通过字段检索
                </span><span class="hl-reserved">int</span><span class="hl-code"> </span><span class="hl-identifier">id</span><span class="hl-code">  = </span><span class="hl-identifier">rs</span><span class="hl-code">.</span><span class="hl-identifier">getInt</span><span class="hl-brackets">(</span><span class="hl-quotes">"</span><span class="hl-string">id</span><span class="hl-quotes">"</span><span class="hl-brackets">)</span><span class="hl-code">;
                </span><span class="hl-identifier">String</span><span class="hl-code"> </span><span class="hl-var">name</span><span class="hl-code"> = </span><span class="hl-identifier">rs</span><span class="hl-code">.</span><span class="hl-identifier">getString</span><span class="hl-brackets">(</span><span class="hl-quotes">"</span><span class="hl-string">name</span><span class="hl-quotes">"</span><span class="hl-brackets">)</span><span class="hl-code">;
                </span><span class="hl-identifier">String</span><span class="hl-code"> </span><span class="hl-identifier">url</span><span class="hl-code"> = </span><span class="hl-identifier">rs</span><span class="hl-code">.</span><span class="hl-identifier">getString</span><span class="hl-brackets">(</span><span class="hl-quotes">"</span><span class="hl-string">url</span><span class="hl-quotes">"</span><span class="hl-brackets">)</span><span class="hl-code">;
    
                // 输出数据
                </span><span class="hl-var">System</span><span class="hl-code">.</span><span class="hl-reserved">out</span><span class="hl-code">.</span><span class="hl-identifier">print</span><span class="hl-brackets">(</span><span class="hl-quotes">"</span><span class="hl-string">ID: </span><span class="hl-quotes">"</span><span class="hl-code"> + </span><span class="hl-identifier">id</span><span class="hl-brackets">)</span><span class="hl-code">;
                </span><span class="hl-var">System</span><span class="hl-code">.</span><span class="hl-reserved">out</span><span class="hl-code">.</span><span class="hl-identifier">print</span><span class="hl-brackets">(</span><span class="hl-quotes">"</span><span class="hl-string">, 站点名称: </span><span class="hl-quotes">"</span><span class="hl-code"> + </span><span class="hl-var">name</span><span class="hl-brackets">)</span><span class="hl-code">;
                </span><span class="hl-var">System</span><span class="hl-code">.</span><span class="hl-reserved">out</span><span class="hl-code">.</span><span class="hl-identifier">print</span><span class="hl-brackets">(</span><span class="hl-quotes">"</span><span class="hl-string">, 站点 URL: </span><span class="hl-quotes">"</span><span class="hl-code"> + </span><span class="hl-identifier">url</span><span class="hl-brackets">)</span><span class="hl-code">;
                </span><span class="hl-var">System</span><span class="hl-code">.</span><span class="hl-reserved">out</span><span class="hl-code">.</span><span class="hl-identifier">print</span><span class="hl-brackets">(</span><span class="hl-quotes">"</span><span class="hl-special">\n</span><span class="hl-quotes">"</span><span class="hl-brackets">)</span><span class="hl-code">;
            }
            // 完成后关闭
            </span><span class="hl-identifier">rs</span><span class="hl-code">.</span><span class="hl-reserved">close</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">;
            </span><span class="hl-identifier">stmt</span><span class="hl-code">.</span><span class="hl-reserved">close</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">;
            </span><span class="hl-identifier">conn</span><span class="hl-code">.</span><span class="hl-reserved">close</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">;
        }</span><span class="hl-identifier">catch</span><span class="hl-brackets">(</span><span class="hl-reserved">SQLException</span><span class="hl-code"> </span><span class="hl-identifier">se</span><span class="hl-brackets">)</span><span class="hl-code">{
            // 处理 </span><span class="hl-identifier">JDBC</span><span class="hl-code"> 错误
            </span><span class="hl-identifier">se</span><span class="hl-code">.</span><span class="hl-identifier">printStackTrace</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">;
        }</span><span class="hl-identifier">catch</span><span class="hl-brackets">(</span><span class="hl-reserved">Exception</span><span class="hl-code"> </span><span class="hl-identifier">e</span><span class="hl-brackets">)</span><span class="hl-code">{
            // 处理 </span><span class="hl-reserved">Class</span><span class="hl-code">.</span><span class="hl-identifier">forName</span><span class="hl-code"> 错误
            </span><span class="hl-identifier">e</span><span class="hl-code">.</span><span class="hl-identifier">printStackTrace</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">;
        }</span><span class="hl-identifier">finally</span><span class="hl-code">{
            // 关闭资源
            </span><span class="hl-identifier">try</span><span class="hl-code">{
                </span><span class="hl-identifier">if</span><span class="hl-brackets">(</span><span class="hl-identifier">stmt</span><span class="hl-code">!=</span><span class="hl-reserved">null</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-identifier">stmt</span><span class="hl-code">.</span><span class="hl-reserved">close</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">;
            }</span><span class="hl-identifier">catch</span><span class="hl-brackets">(</span><span class="hl-reserved">SQLException</span><span class="hl-code"> </span><span class="hl-identifier">se2</span><span class="hl-brackets">)</span><span class="hl-code">{
            }// 什么都不做
            </span><span class="hl-identifier">try</span><span class="hl-code">{
                </span><span class="hl-identifier">if</span><span class="hl-brackets">(</span><span class="hl-identifier">conn</span><span class="hl-code">!=</span><span class="hl-reserved">null</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-identifier">conn</span><span class="hl-code">.</span><span class="hl-reserved">close</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">;
            }</span><span class="hl-identifier">catch</span><span class="hl-brackets">(</span><span class="hl-reserved">SQLException</span><span class="hl-code"> </span><span class="hl-identifier">se</span><span class="hl-brackets">)</span><span class="hl-code">{
                </span><span class="hl-identifier">se</span><span class="hl-code">.</span><span class="hl-identifier">printStackTrace</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">;
            }
        }
        </span><span class="hl-var">System</span><span class="hl-code">.</span><span class="hl-reserved">out</span><span class="hl-code">.</span><span class="hl-identifier">println</span><span class="hl-brackets">(</span><span class="hl-quotes">"</span><span class="hl-string">Goodbye!</span><span class="hl-quotes">"</span><span class="hl-brackets">)</span><span class="hl-code">;
    }
}</span></div>
</div>
</div>
<p>以上实例执行输出结果如下：</p>
<p><img src="http://www.runoob.com/wp-content/uploads/2016/08/result.jpg" width="70%"/></p>
</div>