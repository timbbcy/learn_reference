<div class="article-intro" id="content">
<h1>JSP <span class="color_h1">语法</span>
</h1>
<p>本小节将会简单地介绍一下JSP开发中的基础语法。
</p>
<hr/>
<h2>脚本程序</h2>
<p>脚本程序可以包含任意量的Java语句、变量、方法或表达式，只要它们在脚本语言中是有效的。</p>
<p>
脚本程序的语法格式：</p>
<pre>
&lt;% 代码片段 %&gt;
</pre>
<p>
或者，您也可以编写与其等价的XML语句，就像下面这样：</p>
<pre>
&lt;jsp:scriptlet&gt;
   代码片段
&lt;/jsp:scriptlet&gt;
</pre>
<p>
任何文本、HTML标签、JSP元素必须写在脚本程序的外面。</p>
<p>
下面给出一个示例，同时也是本教程的第一个JSP示例：</p>
<pre>
&lt;html&gt;
&lt;head&gt;&lt;title&gt;Hello World&lt;/title&gt;&lt;/head&gt;
&lt;body&gt;
Hello World!&lt;br/&gt;
&lt;%
out.println("Your IP address is " + request.getRemoteAddr());
%&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>
<p><b>注意：</b>请确保Apache Tomcat已经安装在C:\apache-tomcat-7.0.2目录下并且运行环境已经正确设置。</p>
<p>
将以上代码保存在hello.jsp中，然后将它放置在 C:\apache-tomcat-7.0.2\webapps\ROOT目录下，打开浏览器并在地址栏中输入http://localhost:8080/hello.jsp。运行后得到以下结果：</p>
<p>
<img src="http://www.runoob.com/wp-content/uploads/2014/01/jsp_hello_world.jpg"/>
</p>
<h3>中文编码问题</h3>
<p>如果我们要在页面正常显示中文，我们需要在 JSP 文件头部添加以下代码：&lt;&gt;
<pre>
&lt;%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%&gt;
</pre>
<p>接下来我们将以上程序修改为：</p>
<pre>
&lt;%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta charset="utf-8"&gt;
&lt;title&gt;菜鸟教程(runoob.com)&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
Hello World!&lt;br/&gt;
&lt;%
out.println("你的 IP 地址 " + request.getRemoteAddr());
%&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>
<p>这样中文就可以正常显示了。</p>
<hr/>
<h2>
	JSP声明</h2>
<p>一个声明语句可以声明一个或多个变量、方法，供后面的Java代码使用。在JSP文件中，您必须先声明这些变量和方法然后才能使用它们。</p>
<p>
JSP声明的语法格式：</p>
<pre>
&lt;%! declaration; [ declaration; ]+ ... %&gt;
</pre>
<p>
或者，您也可以编写与其等价的XML语句，就像下面这样：</p>
<pre>
&lt;jsp:declaration&gt;
   代码片段
&lt;/jsp:declaration&gt;
</pre>
<p>
程序示例：</p>
<pre>
&lt;%! int i = 0; %&gt; 
&lt;%! int a, b, c; %&gt; 
&lt;%! Circle a = new Circle(2.0); %&gt; 
</pre>
<hr/>
<h2>
	JSP表达式</h2><p>
一个JSP表达式中包含的脚本语言表达式，先被转化成String，然后插入到表达式出现的地方。</p><p>
由于表达式的值会被转化成String，所以您可以在一个文本行中使用表达式而不用去管它是否是HTML标签。</p><p>

表达式元素中可以包含任何符合Java语言规范的表达式，但是不能使用分号来结束表达式。</p><p>
JSP表达式的语法格式：</p>
<pre>
&lt;%= 表达式 %&gt;
</pre>
<p>
同样，您也可以编写与之等价的XML语句：</p>
<pre>
&lt;jsp:expression&gt;
   表达式
&lt;/jsp:expression&gt;
</pre><p>
程序示例：</p>
<pre>
&lt;%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta charset="utf-8"&gt;
&lt;title&gt;菜鸟教程(runoob.com)&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;p&gt;
   今天的日期是: &lt;%= (new java.util.Date()).toLocaleString()%&gt;
&lt;/p&gt;
&lt;/body&gt; 
&lt;/html&gt; 
</pre>
<p>运行后得到以下结果：</p>
<pre>
今天的日期是: 2016-6-25 13:40:07
</pre><hr/>
<h2>
	JSP注释</h2>
<p>JSP注释主要有两个作用：为代码作注释以及将某段代码注释掉。</p>
<p>
JSP注释的语法格式：</p>
<pre>
&lt;%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta charset="utf-8"&gt;
&lt;title&gt;菜鸟教程(runoob.com)&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;%-- 该部分注释在网页中不会被显示--%&gt; 
&lt;p&gt;
   今天的日期是: &lt;%= (new java.util.Date()).toLocaleString()%&gt;
&lt;/p&gt;
&lt;/body&gt; 
&lt;/html&gt; 
</pre>
<p>
运行后得到以下结果：</p>
<pre>
今天的日期是: 2016-6-25 13:41:26
</pre>
<p>
不同情况下使用注释的语法规则：</p>
<table class="reference">
<tbody>
<tr>
<th>
<strong>语法</strong></th>
<th>
				描述</th>
</tr>
<tr>
<td>
				&lt;%-- 注释 --%&gt;</td>
<td>
				JSP注释，注释内容不会被发送至浏览器甚至不会被编译</td>
</tr>
<tr>
<td>
				&lt;!-- 注释 --&gt;</td>
<td>
				HTML注释，通过浏览器查看网页源代码时可以看见注释内容</td>
</tr>
<tr>
<td>
				&lt;\%</td>
<td>
				代表静态 &lt;%常量</td>
</tr>
<tr>
<td>
				%\&gt;</td>
<td>
				代表静态 %&gt; 常量</td>
</tr>
<tr>
<td>
				\'</td>
<td>
				在属性中使用的单引号</td>
</tr>
<tr>
<td>
				\"</td>
<td>
				在属性中使用的双引号</td>
</tr>
</tbody>
</table>
<hr/>
<h2>
	JSP指令</h2>
<p>
JSP指令用来设置与整个JSP页面相关的属性。	</p>
<p>
JSP指令语法格式：</p>
<pre>
&lt;%@ directive attribute="value" %&gt;
</pre>
<p>
这里有三种指令标签：</p>
<table class="reference">
<tbody>
<tr>
<th>
<strong>指令</strong></th>
<th>
<strong>描述</strong></th>
</tr>
<tr>
<td>
				&lt;%@ page ... %&gt;</td>
<td>
				定义页面的依赖属性，比如脚本语言、error页面、缓存需求等等</td>
</tr>
<tr>
<td>
				&lt;%@ include ... %&gt;</td>
<td>
				包含其他文件</td>
</tr>
<tr>
<td>
				&lt;%@ taglib ... %&gt;</td>
<td>
				引入标签库的定义，可以是自定义标签</td>
</tr>
</tbody>
</table>
<hr/>
<h2>
	JSP行为</h2>
<p>
JSP行为标签使用XML语法结构来控制servlet引擎。它能够动态插入一个文件，重用JavaBean组件，引导用户去另一个页面，为Java插件产生相关的HTML等等。</p>
<p>
行为标签只有一种语法格式，它严格遵守XML标准：</p>
<pre>
&lt;jsp:action_name attribute="value" /&gt;
</pre><p>
行为标签基本上是一些预先就定义好的函数，下表罗列出了一些可用的JSP行为标签：：</p>
<table class="reference">
<tbody>
<tr>
<th>
<strong>语法</strong></th>
<th>
<b>描述</b></th>
</tr>
<tr>
<td>
				jsp:include</td>
<td>
				用于在当前页面中包含静态或动态资源</td>
</tr>
<tr>
<td>
				jsp:useBean</td>
<td>
				寻找和初始化一个JavaBean组件</td>
</tr>
<tr>
<td>
				jsp:setProperty</td>
<td>
				设置 JavaBean组件的值</td>
</tr>
<tr>
<td>
				jsp:getProperty</td>
<td>
				将 JavaBean组件的值插入到 output中</td>
</tr>
<tr>
<td>
				jsp:forward</td>
<td>
				从一个JSP文件向另一个文件传递一个包含用户请求的request对象</td>
</tr>
<tr>
<td>
				jsp:plugin</td>
<td>
				用于在生成的HTML页面中包含Applet和JavaBean对象</td>
</tr>
<tr>
<td>
				jsp:element</td>
<td>
				动态创建一个XML元素</td>
</tr>
<tr>
<td>
				jsp:attribute</td>
<td>
				定义动态创建的XML元素的属性</td>
</tr>
<tr>
<td>
				jsp:body</td>
<td>
				定义动态创建的XML元素的主体</td>
</tr>
<tr>
<td>
				jsp:text</td>
<td>
				用于封装模板数据</td>
</tr>
</tbody>
</table>
<hr/>
<h2>
	JSP隐含对象</h2><p>
JSP支持九个自动定义的变量，江湖人称隐含对象。这九个隐含对象的简介见下表：</p>
<table class="reference">
<tbody>
<tr>
<th>
<strong>对象</strong></th>
<th>
<strong>描述</strong></th>
</tr>
<tr>
<td>
				request</td>
<td>
<strong>HttpServletRequest</strong>类的实例</td>
</tr>
<tr>
<td>
				response</td>
<td>
<strong>HttpServletResponse</strong>类的实例</td>
</tr>
<tr>
<td>
				out</td>
<td>
<strong>PrintWriter</strong>类的实例，用于把结果输出至网页上</td>
</tr>
<tr>
<td>
				session</td>
<td>
<strong>HttpSession</strong>类的实例</td>
</tr>
<tr>
<td>
				application</td>
<td>
<strong>ServletContext</strong>类的实例，与应用上下文有关</td>
</tr>
<tr>
<td>
				config</td>
<td>
<strong>ServletConfig</strong>类的实例</td>
</tr>
<tr>
<td>
				pageContext</td>
<td>
<strong>PageContext</strong>类的实例，提供对JSP页面所有对象以及命名空间的访问</td>
</tr>
<tr>
<td>
				page</td>
<td>
				类似于Java类中的this关键字</td>
</tr>
<tr>
<td>
				Exception</td>
<td>
<strong>Exception</strong>类的对象，代表发生错误的JSP页面中对应的异常对象</td>
</tr>
</tbody>
</table>
<hr/>
<h2>
	控制流语句</h2><p>
JSP提供对Java语言的全面支持。您可以在JSP程序中使用Java API甚至建立Java代码块，包括判断语句和循环语句等等。</p>
<h2>
	判断语句</h2><p>
If…else块，请看下面这个例子：</p>
<pre>
&lt;%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%&gt;
&lt;%! int day = 3; %&gt; 
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta charset="utf-8"&gt;
&lt;title&gt;菜鸟教程(runoob.com)&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h3&gt;IF...ELSE 实例&lt;/h3&gt;
&lt;% if (day == 1 | day == 7) { %&gt;
      &lt;p&gt;今天是周末&lt;/p&gt;
&lt;% } else { %&gt;
      &lt;p&gt;今天不是周末&lt;/p&gt;
&lt;% } %&gt;
&lt;/body&gt; 
&lt;/html&gt; 
</pre>
<p>
运行后得到以下结果：
</p>
<pre>
IF...ELSE 实例
今天不是周末
</pre>
<p>
现在来看看switch…case块，与if…else块有很大的不同，它使用out.println()，并且整个都装在脚本程序的标签中，就像下面这样：</p>
<pre>
&lt;%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%&gt;
&lt;%! int day = 3; %&gt; 
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta charset="utf-8"&gt;
&lt;title&gt;菜鸟教程(runoob.com)&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h3&gt;SWITCH...CASE 实例&lt;/h3&gt;
&lt;% 
switch(day) {
case 0:
   out.println("星期天");
   break;
case 1:
   out.println("星期一");
   break;
case 2:
   out.println("星期二");
   break;
case 3:
   out.println("星期三");
   break;
case 4:
   out.println("星期四");
   break;
case 5:
   out.println("星期五");
   break;
default:
   out.println("星期六");
}
%&gt;
&lt;/body&gt; 
&lt;/html&gt; 
</pre>
<p>
浏览器访问，运行后得出以下结果：</p>
<pre>
SWITCH...CASE 实例

星期三
</pre>
<hr/><h2>循环语句</h2>
<p>
在JSP程序中可以使用Java的三个基本循环类型：for，while，和 do…while。</p><p>
让我们来看看for循环的例子，以下输出的不同字体大小的"菜鸟教程"：</p>
<pre>
&lt;%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%&gt;
&lt;%! int fontSize; %&gt; 
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta charset="utf-8"&gt;
&lt;title&gt;菜鸟教程(runoob.com)&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h3&gt;For 循环实例&lt;/h3&gt;
&lt;%for ( fontSize = 1; fontSize &lt;= 3; fontSize++){ %&gt;
   &lt;font color="green" size="&lt;%= fontSize %&gt;"&gt;
    菜鸟教程
   &lt;/font&gt;&lt;br /&gt;
&lt;%}%&gt;
&lt;/body&gt; 
&lt;/html&gt; 
</pre>
<p>
运行后得到以下结果：</p>
<p><img src="http://www.runoob.com/wp-content/uploads/2014/01/7B4B85CF-FE4B-43CB-AAFF-F8594AD4342C.jpg" width="70%"/></p>
<p>
将上例改用while循环来写：</p>
<pre>
&lt;%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%&gt;
&lt;%! int fontSize; %&gt; 
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta charset="utf-8"&gt;
&lt;title&gt;菜鸟教程(runoob.com)&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h3&gt;While 循环实例&lt;/h3&gt;
&lt;%while ( fontSize &lt;= 3){ %&gt;
   &lt;font color="green" size="&lt;%= fontSize %&gt;"&gt;
    菜鸟教程
   &lt;/font&gt;&lt;br /&gt;
&lt;%fontSize++;%&gt;
&lt;%}%&gt;
&lt;/body&gt; 
&lt;/html&gt; 
</pre>
浏览器访问，输出结果为（fontSize 初始化为0，所以多输出了一行）：<br/>
<p><img src="http://www.runoob.com/wp-content/uploads/2014/01/4F744CC9-E484-45BA-AF18-27AFCF4AD45C.jpg" width="70%"/></p>
	JSP运算符</p></div>