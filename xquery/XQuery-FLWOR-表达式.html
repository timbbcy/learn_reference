<div class="article-intro" id="content">
<h1>XQuery <span class="color_h1">FLWOR</span> 表达式</h1>
<hr/>
<h2>XML 实例文档</h2>
<p>我们将在下面的例子中继续使用这个 "books.xml" 文档（与上一节中的 XML 文件相同）。</p>
<p><a href="/try/xml/books.xml" target="_blank">在您的浏览器中查看 "books.xml" 文件</a>。</p>
<hr/>
<h2>如果使用 FLWOR 从 "books.xml" 选取节点</h2>
<p>请看下面这个路径表达式：</p>
<div class="code notranslate"><div>
doc("books.xml")/bookstore/book[price&gt;30]/title
</div></div>
<p>上面这个表达式可选取 bookstore 元素下的 book 元素下所有的 title 元素，并且其中的 price 元素的值必须大于 30。</p>
<p>下面这个 FLWOR 表达式所选取的数据和上面的路径表达式是相同的：</p>
<div class="code notranslate"><div>

for $x in doc("books.xml")/bookstore/book<br/>
where $x/price&gt;30<br/>
return $x/title
</div></div>
<p>输出结果：</p>
<div class="code notranslate"><div>

&lt;title lang="en"&gt;XQuery Kick Start&lt;/title&gt;<br/>
&lt;title lang="en"&gt;Learning XML&lt;/title&gt;
</div></div>
<p>通过 FLWOR，您可以对结果进行排序：</p>
<div class="code notranslate"><div>

for $x in doc("books.xml")/bookstore/book<br/>
where $x/price&gt;30<br/>
order by $x/title<br/>
return $x/title
</div></div>
<p><strong>FLWOR 是 "For, Let, Where, Order by, Return" 的只取首字母缩写。</strong></p>
<p><strong>for</strong> 语句把 bookstore 元素下的所有 book 元素提取到名为 $x 的变量中。</p>
<p><strong>where</strong> 语句选取了 price 元素值大于 30 的 book 元素。</p>
<p><strong>order by</strong> 语句定义了排序次序。将根据 title 元素进行排序。</p>
<p><strong>return</strong> 语句规定返回什么内容。在此返回的是 title 元素。</p>
<p>上面的 XQuery 表达式的结果：</p>
<div class="code notranslate"><div>

&lt;title lang="en"&gt;Learning XML&lt;/title&gt;<br/>
&lt;title lang="en"&gt;XQuery Kick Start&lt;/title&gt;

</div></div>
</div>