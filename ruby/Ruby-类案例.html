<div class="article-intro" id="content">
<h1>Ruby <span class="color_h1">类案例</span></h1>
<p>下面将创建一个名为 Customer 的 Ruby 类，声明两个方法：</p>
<ul class="list">
<li><i>display_details</i>：该方法用于显示客户的详细信息。</li>
<li><i>total_no_of_customers</i>：该方法用于显示在系统中创建的客户总数量。</li>
</ul>
<div class="example">
<h2 class="example">实例</h2>
<div class="example_code">
<div class="hl-main"><span class="hl-comment">#</span><span class="hl-comment">!/usr/bin/ruby</span><span class="hl-comment"></span><span class="hl-code">
</span><span class="hl-reserved">class</span><span class="hl-code"> </span><span class="hl-identifier">Customer</span><span class="hl-code">
</span><span class="hl-var">@@no_of_customers</span><span class="hl-code">=</span><span class="hl-number">0</span><span class="hl-code">
</span><span class="hl-reserved">def</span><span class="hl-code"> </span><span class="hl-identifier">initialize</span><span class="hl-brackets">(</span><span class="hl-identifier">id</span><span class="hl-code">, </span><span class="hl-identifier">name</span><span class="hl-code">, </span><span class="hl-identifier">addr</span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-var">@cust_id</span><span class="hl-code">=</span><span class="hl-identifier">id</span><span class="hl-code">
</span><span class="hl-var">@cust_name</span><span class="hl-code">=</span><span class="hl-identifier">name</span><span class="hl-code">
</span><span class="hl-var">@cust_addr</span><span class="hl-code">=</span><span class="hl-identifier">addr</span><span class="hl-code">
</span><span class="hl-reserved">end</span><span class="hl-code">
</span><span class="hl-reserved">def</span><span class="hl-code"> </span><span class="hl-identifier">display_details</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-identifier">puts</span><span class="hl-code"> </span><span class="hl-quotes">"</span><span class="hl-string">Customer id #@cust_id</span><span class="hl-quotes">"</span><span class="hl-code">
</span><span class="hl-identifier">puts</span><span class="hl-code"> </span><span class="hl-quotes">"</span><span class="hl-string">Customer name #@cust_name</span><span class="hl-quotes">"</span><span class="hl-code">
</span><span class="hl-identifier">puts</span><span class="hl-code"> </span><span class="hl-quotes">"</span><span class="hl-string">Customer address #@cust_addr</span><span class="hl-quotes">"</span><span class="hl-code">
</span><span class="hl-reserved">end</span><span class="hl-code">
</span><span class="hl-reserved">def</span><span class="hl-code"> </span><span class="hl-identifier">total_no_of_customers</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-var">@@no_of_customers</span><span class="hl-code"> += </span><span class="hl-number">1</span><span class="hl-code">
</span><span class="hl-identifier">puts</span><span class="hl-code"> </span><span class="hl-quotes">"</span><span class="hl-string">Total number of customers: #@@no_of_customers</span><span class="hl-quotes">"</span><span class="hl-code">
</span><span class="hl-reserved">end</span><span class="hl-code">
</span><span class="hl-reserved">end</span></div>
</div>
</div>
<p><i>display_details</i> 方法包含了三个 puts 语句，显示了客户 ID、客户名字和客户地址。其中，puts 语句：</p>
<div class="example">
<div class="example_code">
<div class="hl-main"><span class="hl-identifier">puts</span><span class="hl-code"> </span><span class="hl-quotes">"</span><span class="hl-string">Customer id #@cust_id</span><span class="hl-quotes">"</span></div>
</div>
</div>
<p>将在一个单行上显示文本 Customer id 和变量 @cust_id 的值。</p>
<p>当您想要在一个单行上显示实例变量的文本和值时，您需要在 puts 语句的变量名前面放置符号（#）。文本和带有符号（#）的实例变量应使用双引号标记。</p>
<p>第二个方法，total_no_of_customers，包含了类变量 @@no_of_customers。表达式 @@no_of_
customers+=1 在每次调用方法 total_no_of_customers 时，把变量 no_of_customers 加 1。通过这种方式，您将得到类变量中的客户总数量。</p>
<p>现在创建两个客户，如下所示：</p>
<div class="example">
<div class="example_code">
<div class="hl-main"><span class="hl-identifier">cust1</span><span class="hl-code">=</span><span class="hl-identifier">Customer</span><span class="hl-code">.</span><span class="hl-identifier">new</span><span class="hl-brackets">(</span><span class="hl-quotes">"</span><span class="hl-string">1</span><span class="hl-quotes">"</span><span class="hl-code">, </span><span class="hl-quotes">"</span><span class="hl-string">John</span><span class="hl-quotes">"</span><span class="hl-code">, </span><span class="hl-quotes">"</span><span class="hl-string">Wisdom Apartments, Ludhiya</span><span class="hl-quotes">"</span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-identifier">cust2</span><span class="hl-code">=</span><span class="hl-identifier">Customer</span><span class="hl-code">.</span><span class="hl-identifier">new</span><span class="hl-brackets">(</span><span class="hl-quotes">"</span><span class="hl-string">2</span><span class="hl-quotes">"</span><span class="hl-code">, </span><span class="hl-quotes">"</span><span class="hl-string">Poul</span><span class="hl-quotes">"</span><span class="hl-code">, </span><span class="hl-quotes">"</span><span class="hl-string">New Empire road, Khandala</span><span class="hl-quotes">"</span><span class="hl-brackets">)</span></div>
</div>
</div>
<p>在这里，我们创建了 Customer 类的两个对象，cust1 和 cust2，并向 new 方法传递必要的参数。当 initialize 方法被调用时，对象的必要属性被初始化。</p>
<p>一旦对象被创建，您需要使用两个对象来调用类的方法。如果您想要调用方法或任何数据成员，您可以编写代码，如下所示：</p>
<div class="example">
<div class="example_code">
<div class="hl-main"><span class="hl-identifier">cust1</span><span class="hl-code">.</span><span class="hl-identifier">display_details</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-identifier">cust1</span><span class="hl-code">.</span><span class="hl-identifier">total_no_of_customers</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span></div>
</div>
</div>
<p>对象名称后总是跟着一个点号，接着是方法名称或数据成员。我们已经看到如何使用 cust1 对象调用两个方法。使用 cust2 对象，您也可以调用两个方法，如下所示：</p>
<div class="example">
<div class="example_code">
<div class="hl-main"><span class="hl-identifier">cust2</span><span class="hl-code">.</span><span class="hl-identifier">display_details</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-identifier">cust2</span><span class="hl-code">.</span><span class="hl-identifier">total_no_of_customers</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span></div>
</div>
</div>
<h2>保存并执行代码</h2>
<p>现在，把所有的源代码放在 main.rb 文件中，如下所示：</p>
<div class="example">
<h2 class="example">实例</h2>
<div class="example_code">
<div class="hl-main"><span class="hl-comment">#</span><span class="hl-comment">!/usr/bin/ruby</span><span class="hl-comment"></span><span class="hl-code">
</span><span class="hl-reserved">class</span><span class="hl-code"> </span><span class="hl-identifier">Customer</span><span class="hl-code">
</span><span class="hl-var">@@no_of_customers</span><span class="hl-code">=</span><span class="hl-number">0</span><span class="hl-code">
</span><span class="hl-reserved">def</span><span class="hl-code"> </span><span class="hl-identifier">initialize</span><span class="hl-brackets">(</span><span class="hl-identifier">id</span><span class="hl-code">, </span><span class="hl-identifier">name</span><span class="hl-code">, </span><span class="hl-identifier">addr</span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-var">@cust_id</span><span class="hl-code">=</span><span class="hl-identifier">id</span><span class="hl-code">
</span><span class="hl-var">@cust_name</span><span class="hl-code">=</span><span class="hl-identifier">name</span><span class="hl-code">
</span><span class="hl-var">@cust_addr</span><span class="hl-code">=</span><span class="hl-identifier">addr</span><span class="hl-code">
</span><span class="hl-reserved">end</span><span class="hl-code">
</span><span class="hl-reserved">def</span><span class="hl-code"> </span><span class="hl-identifier">display_details</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-identifier">puts</span><span class="hl-code"> </span><span class="hl-quotes">"</span><span class="hl-string">Customer id #@cust_id</span><span class="hl-quotes">"</span><span class="hl-code">
</span><span class="hl-identifier">puts</span><span class="hl-code"> </span><span class="hl-quotes">"</span><span class="hl-string">Customer name #@cust_name</span><span class="hl-quotes">"</span><span class="hl-code">
</span><span class="hl-identifier">puts</span><span class="hl-code"> </span><span class="hl-quotes">"</span><span class="hl-string">Customer address #@cust_addr</span><span class="hl-quotes">"</span><span class="hl-code">
</span><span class="hl-reserved">end</span><span class="hl-code">
</span><span class="hl-reserved">def</span><span class="hl-code"> </span><span class="hl-identifier">total_no_of_customers</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-var">@@no_of_customers</span><span class="hl-code"> += </span><span class="hl-number">1</span><span class="hl-code">
</span><span class="hl-identifier">puts</span><span class="hl-code"> </span><span class="hl-quotes">"</span><span class="hl-string">Total number of customers: #@@no_of_customers</span><span class="hl-quotes">"</span><span class="hl-code">
</span><span class="hl-reserved">end</span><span class="hl-code">
</span><span class="hl-reserved">end</span><span class="hl-code">
</span><span class="hl-comment">#</span><span class="hl-comment"> 创建对象</span><span class="hl-comment"></span><span class="hl-code">
</span><span class="hl-identifier">cust1</span><span class="hl-code">=</span><span class="hl-identifier">Customer</span><span class="hl-code">.</span><span class="hl-identifier">new</span><span class="hl-brackets">(</span><span class="hl-quotes">"</span><span class="hl-string">1</span><span class="hl-quotes">"</span><span class="hl-code">, </span><span class="hl-quotes">"</span><span class="hl-string">John</span><span class="hl-quotes">"</span><span class="hl-code">, </span><span class="hl-quotes">"</span><span class="hl-string">Wisdom Apartments, Ludhiya</span><span class="hl-quotes">"</span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-identifier">cust2</span><span class="hl-code">=</span><span class="hl-identifier">Customer</span><span class="hl-code">.</span><span class="hl-identifier">new</span><span class="hl-brackets">(</span><span class="hl-quotes">"</span><span class="hl-string">2</span><span class="hl-quotes">"</span><span class="hl-code">, </span><span class="hl-quotes">"</span><span class="hl-string">Poul</span><span class="hl-quotes">"</span><span class="hl-code">, </span><span class="hl-quotes">"</span><span class="hl-string">New Empire road, Khandala</span><span class="hl-quotes">"</span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-comment">#</span><span class="hl-comment"> 调用方法</span><span class="hl-comment"></span><span class="hl-code">
</span><span class="hl-identifier">cust1</span><span class="hl-code">.</span><span class="hl-identifier">display_details</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-identifier">cust1</span><span class="hl-code">.</span><span class="hl-identifier">total_no_of_customers</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-identifier">cust2</span><span class="hl-code">.</span><span class="hl-identifier">display_details</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-identifier">cust2</span><span class="hl-code">.</span><span class="hl-identifier">total_no_of_customers</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span></div>
</div>
<br/>
<a class="tryitbtn" href="/try/runcode.php?filename=customer_demo&amp;type=ruby" target="_blank">尝试一下 »</a>
</div>
<p>接着，运行程序，如下所示：</p>
<pre>
$ ruby main.rb
</pre>
<p>这将产生以下结果：</p>
<pre>
Customer id 1
Customer name John
Customer address Wisdom Apartments, Ludhiya
Total number of customers: 1
Customer id 2
Customer name Poul
Customer address New Empire road, Khandala
Total number of customers: 2
</pre>
</div>