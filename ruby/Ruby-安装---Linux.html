<div class="article-intro" id="content">
<h1>Ruby <span class="color_h1">安装 - Linux</span></h1>
<p>下面列出了在 Linux 机器上安装 Ruby 的步骤。</p>
<p><b>注意：</b>在安装之前，请确保您有 root 权限。</p>
<hr/><h2>源码安装</h2>
<ul>
<li>下载最新版的 Ruby 压缩文件。<a href="http://www.ruby-lang.org/en/downloads/" target="_blank">请点击这里下载</a>。</li>
<li>下载 Ruby 之后，解压到新创建的目录下：</li>
</ul>
<pre>
$ tar -xvzf ruby-2.2.3.tgz    
$ cd ruby-2.2.3
</pre>
<ul>
<li>现在，配置并编译源代码，如下所示：</li>
</ul>
<pre>
$ ./configure
$ make
$ sudo make install
</pre>
<ul>
<li>安装后，通过在命令行中输入以下命令来确保一切工作正常：</li>
</ul>
<pre>
$ruby -v
ruby 2.2.3……
</pre>
<ul>
<li>如果一切工作正常，将会输出所安装的 Ruby 解释器的版本，如上所示。如果您安装了其他版本，则会显示其他不同的版本。</li>
</ul>
<h2>自动安装 Ruby</h2>
<p>如果您的计算机已经连接到 Internet，那么最简单安装 Ruby 的方式是使用 <b>yum</b> 或 <b>apt-get</b>。在命令提示符中输入以下的命令，即可在您的计算机上安装 Ruby。</p>
<pre>
$  sudo yum install ruby    # CentOS, Fedora, 或 RHEL 系统

或

sudo apt-get install ruby-full # Debian 或 Ubuntu 系统
</pre>
<p>如果你是苹果系统，可以使用 <strong>brew</strong> 命令安装：</p>
<pre>
$ brew install ruby</pre>
<hr/>
<h2>使用 RVM 安装 Ruby</h2>
<p>RVM 能在系统中安装和管理多个 Ruby 版本。同时还能管理不同的 gem 集。支持 OS X、Linux 和其它类 UNIX 操作系统。</p>
<h3>安装 RVM</h3>
<pre>
$ gpg --keyserver hkp://keys.gnupg.net --recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3 7D2BAF1CF37B13E2069D6956105BD0E739499BDB
$ curl -sSL https://get.rvm.io | bash -s stable</pre>
<p>然后，载入 RVM 环境（新开 Termal 就不用这么做了，会自动重新载入的）</p>
<pre>$ source ~/.rvm/scripts/rvm</pre>
<p>检查一下是否安装正确</p>
<pre>$ rvm -v
rvm 1.22.17 (stable) by Wayne E. Seguin &lt;wayneeseguin@gmail.com&gt;, Michal Papis &lt;mpapis@gmail.com&gt; [https://rvm.io/]</pre>
<h3>用 RVM 安装 Ruby 环境</h3>
<p>列出已知的 ruby 版本:</p>
<pre>$ rvm list known</pre>
<p>可以选择现有的 rvm 版本来进行安装（下面以 rvm 2.4.2 版本的安装为例）</p>
<pre>$ rvm install 2.4.2</pre>
<p>同样继续等待漫长的下载，编译过程，完成以后，Ruby, Ruby Gems 就安装好了。</p>
<h3>rvm 常用命令</h3>
<p>查询已经安装的 ruby</p>
<pre>$ rvm list</pre>
<p>卸载一个已安装版本 </p>
<pre>$ rvm remove 1.9.2</pre>
<p><strong>设置 Ruby 版本</strong></p>
<p>RVM 装好以后，需要执行下面的命令将指定版本的 Ruby 设置为系统默认版本</p>
<pre>$ rvm 2.0.0 --default</pre>
<p>同样，也可以用其他版本号，前提是你有用 rvm install 安装过那个版本</p>
<p>这个时候你可以测试是否正确</p>
<pre>
$ ruby -v
ruby 2.0.0p247 (2013-06-27 revision 41674) [x86_64-darwin13.0.0]

$ gem -v
2.1.6</pre>
<p>这有可能是因为 Ruby 的默认源使用的是 cocoapods.org，国内访问这个网址有时候会有问题，网上的一种解决方案是将远替换成 ruby-china 的，替换方式如下：</p>
<pre>$ gem source -r https://rubygems.org/
$ gem source -a https://gems.ruby-china.org</pre>
<p>要想验证是否替换成功了，可以执行：</p>
<pre>$ gem sources -l  </pre>
<p>正常的输出结果：</p>
<pre>*** CURRENT SOURCES ***

https://ruby.taobao.org</pre>　

<p>请确保只有 gems.ruby-china.org</p>
<pre>$ gem install rails</pre>
<p><strong>如果你使用 Gemfile 和 Bundle (例如：Rails 项目)</strong></p>
<p>你可以用 Bundler 的 Gem 源代码镜像命令。</p>
<pre>$ bundle config mirror.https://rubygems.org https://gems.ruby-china.org</pre>
<p>这样你不用改你的 Gemfile 的 source。</p>
<pre>source 'https://rubygems.org/'
gem 'rails', '4.1.0'
...　</pre>
</div>