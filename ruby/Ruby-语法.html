<div class="article-intro" id="content">
<h1>Ruby <span class="color_h1">语法</span></h1>
<p>让我们编写一个简单的 Ruby 程序。所有的 Ruby 文件扩展名都是 <b>.rb</b>。所以，把下面的源代码放在 test.rb 文件中。</p>
<div class="example">
<h2 class="example">实例</h2>
<div class="example_code">
<div class="hl-main"><span class="hl-comment">#</span><span class="hl-comment">!/usr/bin/ruby -w</span><span class="hl-comment"></span><span class="hl-code">
</span><span class="hl-identifier">puts</span><span class="hl-code"> </span><span class="hl-quotes">"</span><span class="hl-string">Hello, Ruby!</span><span class="hl-quotes">"</span><span class="hl-code">;</span></div>
</div>
<br/><a class="showbtn" href="/try/showrb.php?filename=HelloRuby" target="_blank">运行实例 »</a>
</div>
<p>在这里，假设您的 /usr/bin 目录下已经有可用的 Ruby 解释器。现在，尝试运行这个程序，如下所示：</p>
<pre class="prettyprint">
$ ruby test.rb
</pre>
<p>这将会产生下面的结果：</p>
<pre>
Hello, Ruby!
</pre>
<p>您已经看到了一个简单的 Ruby 程序，现在让我们看看一些 Ruby 语法相关的基本概念：</p>
<h2 class="tutheader">Ruby 程序中的空白</h2>
<p>在 Ruby 代码中的空白字符，如空格和制表符一般会被忽略，除非当它们出现在字符串中时才不会被忽略。然而，有时候它们用于解释模棱两可的语句。当启用 -w 选项时，这种解释会产生警告。</p>
<p><b>实例：</b></p>
<pre class="prettyprint">
a + b 被解释为 a+b （这是一个局部变量）
a  +b 被解释为 a(+b) （这是一个方法调用）
</pre>
<h2 class="tutheader">Ruby 程序中的行尾</h2>
<p>Ruby 把分号和换行符解释为语句的结尾。但是，如果 Ruby 在行尾遇到运算符，比如 +、- 或反斜杠，它们表示一个语句的延续。</p>
<h2 class="tutheader">Ruby 标识符</h2>
<p>标识符是变量、常量和方法的名称。Ruby 标识符是大小写敏感的。这意味着 Ram 和 RAM 在 Ruby 中是两个不同的标识符。</p>
<p>Ruby 标识符的名称可以包含字母、数字和下划线字符（ _ ）。</p>
<h2 class="tutheader">保留字</h2>
<p>下表列出了 Ruby 中的保留字。这些保留字不能作为常量或变量的名称。但是，它们可以作为方法名。</p>
<table class="reference">
<tr><td>BEGIN</td><td>do</td><td>next</td><td>then</td></tr>
<tr><td>END</td><td>else</td><td>nil</td><td>true</td></tr>
<tr><td>alias</td><td>elsif</td><td>not</td><td>undef</td></tr>
<tr><td>and</td><td>end</td><td>or</td><td>unless</td></tr>
<tr><td>begin</td><td>ensure</td><td>redo</td><td>until</td></tr>
<tr><td>break</td><td>false</td><td>rescue</td><td>when</td></tr>
<tr><td>case</td><td>for</td><td>retry</td><td>while</td></tr>
<tr><td>class</td><td>if</td><td>return</td><td>while</td></tr>
<tr><td>def</td><td>in</td><td>self</td><td>__FILE__</td></tr>
<tr><td>defined?</td><td>module</td><td>super</td><td>__LINE__</td></tr>
</table>
<br>
<h2 class="tutheader">Ruby 中的 Here Document</h2>
<p>"Here Document" 是指建立多行字符串。在 &lt;&lt; 之后，您可以指定一个字符串或标识符来终止字符串，且当前行之后直到终止符为止的所有行是字符串的值。</p>
<p>如果终止符用引号括起，引号的类型决定了面向行的字符串类型。请注意&lt;&lt; 和终止符之间必须没有空格。</p>
<p>下面是不同的实例：</p>
<div class="example">
<h2 class="example">实例</h2>
<div class="example_code">
<div class="hl-main"><span class="hl-comment">#</span><span class="hl-comment">!/usr/bin/ruby -w</span><span class="hl-comment"></span><span class="hl-code">
</span><span class="hl-comment">#</span><span class="hl-comment"> -*- coding : utf-8 -*-</span><span class="hl-comment"></span><span class="hl-code">
</span><span class="hl-identifier">print</span><span class="hl-code"> &lt;&lt;</span><span class="hl-identifier">EOF</span><span class="hl-code">
    这是第一种方式创建</span><span class="hl-identifier">here</span><span class="hl-code"> </span><span class="hl-identifier">document</span><span class="hl-code"> 。
    多行字符串。
</span><span class="hl-identifier">EOF</span><span class="hl-code">
</span><span class="hl-identifier">print</span><span class="hl-code"> &lt;&lt;</span><span class="hl-quotes">"</span><span class="hl-string">EOF</span><span class="hl-quotes">"</span><span class="hl-code">;                </span><span class="hl-comment">#</span><span class="hl-comment"> 与上面相同</span><span class="hl-comment"></span><span class="hl-code">
    这是第二种方式创建</span><span class="hl-identifier">here</span><span class="hl-code"> </span><span class="hl-identifier">document</span><span class="hl-code"> 。
    多行字符串。
</span><span class="hl-identifier">EOF</span><span class="hl-code">
</span><span class="hl-identifier">print</span><span class="hl-code"> &lt;&lt;`</span><span class="hl-identifier">EOC</span><span class="hl-code">`                 </span><span class="hl-comment">#</span><span class="hl-comment"> 执行命令</span><span class="hl-comment"></span><span class="hl-code">
</span><span class="hl-identifier">echo</span><span class="hl-code"> </span><span class="hl-identifier">hi</span><span class="hl-code"> </span><span class="hl-identifier">there</span><span class="hl-code">
</span><span class="hl-identifier">echo</span><span class="hl-code"> </span><span class="hl-identifier">lo</span><span class="hl-code"> </span><span class="hl-identifier">there</span><span class="hl-code">
</span><span class="hl-identifier">EOC</span><span class="hl-code">
</span><span class="hl-identifier">print</span><span class="hl-code"> &lt;&lt;</span><span class="hl-quotes">"</span><span class="hl-string">foo</span><span class="hl-quotes">"</span><span class="hl-code">, &lt;&lt;</span><span class="hl-quotes">"</span><span class="hl-string">bar</span><span class="hl-quotes">"</span><span class="hl-code"> </span><span class="hl-comment">#</span><span class="hl-comment"> 您可以把它们进行堆叠</span><span class="hl-comment"></span><span class="hl-code">
</span><span class="hl-identifier">I</span><span class="hl-code"> </span><span class="hl-identifier">said</span><span class="hl-code"> </span><span class="hl-identifier">foo</span><span class="hl-code">.
</span><span class="hl-identifier">foo</span><span class="hl-code">
</span><span class="hl-identifier">I</span><span class="hl-code"> </span><span class="hl-identifier">said</span><span class="hl-code"> </span><span class="hl-identifier">bar</span><span class="hl-code">.
</span><span class="hl-identifier">bar</span></div>
</div>
<br/><a class="showbtn" href="/try/runcode.php?filename=heredoc&amp;type=ruby" target="_blank">运行实例 »</a>
</div>
<p>这将产生以下结果：</p>
<pre>
这是第一种方式创建here document 。
多行字符串。
这是第二种方式创建here document 。
多行字符串。
hi there
lo there
I said foo.
I said bar.
</pre>
<h2 class="tutheader">Ruby <i>BEGIN</i> 语句</h2>
<h3>语法</h3>
<pre>
BEGIN {
   code
}
</pre>
<p>声明 <i>code</i> 会在程序运行之前被调用。</p>
<h3>实例</h3>
<div class="example">
<div class="example_code">
<div class="hl-main"><span class="hl-comment">#</span><span class="hl-comment">!/usr/bin/ruby</span><span class="hl-comment"></span><span class="hl-code">
</span><span class="hl-identifier">puts</span><span class="hl-code"> </span><span class="hl-quotes">"</span><span class="hl-string">这是主 Ruby 程序</span><span class="hl-quotes">"</span><span class="hl-code">
</span><span class="hl-reserved">BEGIN</span><span class="hl-code"> {
   </span><span class="hl-identifier">puts</span><span class="hl-code"> </span><span class="hl-quotes">"</span><span class="hl-string">初始化 Ruby 程序</span><span class="hl-quotes">"</span><span class="hl-code">
}</span></div>
</div>
</div>
<p>这将产生以下结果：</p>
<pre>
初始化 Ruby 程序
这是主 Ruby 程序
</pre>
<h2 class="tutheader">Ruby <i>END</i> 语句</h2>
<h3>语法</h3>
<pre>
END {
   code
}
</pre>
<p>声明 <i>code</i> 会在程序的结尾被调用。</p>
<div class="example">
<h2 class="example">实例</h2>
<div class="example_code">
<div class="hl-main"><span class="hl-comment">#</span><span class="hl-comment">!/usr/bin/ruby</span><span class="hl-comment"></span><span class="hl-code">
</span><span class="hl-identifier">puts</span><span class="hl-code"> </span><span class="hl-quotes">"</span><span class="hl-string">这是主 Ruby 程序</span><span class="hl-quotes">"</span><span class="hl-code">
</span><span class="hl-reserved">END</span><span class="hl-code"> {
   </span><span class="hl-identifier">puts</span><span class="hl-code"> </span><span class="hl-quotes">"</span><span class="hl-string">停止 Ruby 程序</span><span class="hl-quotes">"</span><span class="hl-code">
}
</span><span class="hl-reserved">BEGIN</span><span class="hl-code"> {
   </span><span class="hl-identifier">puts</span><span class="hl-code"> </span><span class="hl-quotes">"</span><span class="hl-string">初始化 Ruby 程序</span><span class="hl-quotes">"</span><span class="hl-code">
}</span></div>
</div>
</div>
<p>这将产生以下结果：</p>
<pre>
初始化 Ruby 程序
这是主 Ruby 程序
停止 Ruby 程序
</pre>
<h2 class="tutheader">Ruby 注释</h2>
<p>注释会对 Ruby 解释器隐藏一行，或者一行的一部分，或者若干行。您可以在行首使用字符（ # ）：</p>
<div class="example">
<div class="example_code">
<div class="hl-main"><span class="hl-comment">#</span><span class="hl-comment"> 我是注释，请忽略我。</span><span class="hl-comment"></span></div>
</div>
</div>
<p>或者，注释可以跟着语句或表达式的同一行的后面：</p>
<div class="example">
<div class="example_code">
<div class="hl-main"><span class="hl-identifier">name</span><span class="hl-code"> = </span><span class="hl-quotes">"</span><span class="hl-string">Madisetti</span><span class="hl-quotes">"</span><span class="hl-code"> </span><span class="hl-comment">#</span><span class="hl-comment"> 这也是注释</span><span class="hl-comment"></span></div>
</div>
</div>
<p>您可以注释多行，如下所示：</p>
<div class="example">
<div class="example_code">
<div class="hl-main"><span class="hl-comment">#</span><span class="hl-comment"> 这是注释。</span><span class="hl-comment"></span><span class="hl-code">
</span><span class="hl-comment">#</span><span class="hl-comment"> 这也是注释。</span><span class="hl-comment"></span><span class="hl-code">
</span><span class="hl-comment">#</span><span class="hl-comment"> 这也是注释。</span><span class="hl-comment"></span><span class="hl-code">
</span><span class="hl-comment">#</span><span class="hl-comment"> 这还是注释。</span><span class="hl-comment"></span></div>
</div>
</div>
<p>下面是另一种形式。这种块注释会对解释器隐藏 =begin/=end 之间的行：</p>
<div class="example">
<div class="example_code">
<div class="hl-main"><span class="hl-comment">=begin</span><span class="hl-comment">
这是注释。
这也是注释。
这也是注释。
这还是注释。
</span><span class="hl-comment">=end</span></div>
</div>
</div>
</br></div>