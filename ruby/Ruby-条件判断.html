<div class="article-intro" id="content">
<h1>Ruby <span class="color_h1">判断</span></h1>
<p>Ruby 提供了几种很常见的条件结构。在这里，我们将解释所有的条件语句和 Ruby 中可用的修饰符。</p>
<h2 class="tutheader">Ruby <i>if...else</i> 语句</h2>
<div class="example">
<h2 class="example">语法</h2>
<div class="example_code">
<div class="hl-main"><span class="hl-reserved">if</span><span class="hl-code"> </span><span class="hl-identifier">conditional</span><span class="hl-code"> </span><span class="hl-brackets">[</span><span class="hl-reserved">then</span><span class="hl-brackets">]</span><span class="hl-code">
</span><span class="hl-identifier">code</span><span class="hl-code">...
</span><span class="hl-brackets">[</span><span class="hl-reserved">elsif</span><span class="hl-code"> </span><span class="hl-identifier">conditional</span><span class="hl-code"> </span><span class="hl-brackets">[</span><span class="hl-reserved">then</span><span class="hl-brackets">]</span><span class="hl-code">
</span><span class="hl-identifier">code</span><span class="hl-code">...</span><span class="hl-brackets">]</span><span class="hl-code">...
</span><span class="hl-brackets">[</span><span class="hl-reserved">else</span><span class="hl-code">
</span><span class="hl-identifier">code</span><span class="hl-code">...</span><span class="hl-brackets">]</span><span class="hl-code">
</span><span class="hl-reserved">end</span></div>
</div>
</div>
<p><i>if</i> 表达式用于条件执行。值 <i>false</i> 和 <i>nil</i> 为假，其他值都为真。请注意，Ruby 使用 elsif，不是使用 else if 和 elif。</p>
<p>如果 <i>conditional</i> 为真，则执行 <i>code</i>。如果 <i>conditional</i> 不为真，则执行 else 子句中指定的 <i>code</i>。</p><p>
通常我们省略保留字 then 。若想在一行内写出完整的 if 式，则必须以 then 隔开条件式和程式区块。如下所示:</p>
<div class="example">
<div class="example_code">
<div class="hl-main"><span class="hl-reserved">if</span><span class="hl-code"> </span><span class="hl-identifier">a</span><span class="hl-code"> == </span><span class="hl-number">4</span><span class="hl-code"> </span><span class="hl-reserved">then</span><span class="hl-code"> </span><span class="hl-identifier">a</span><span class="hl-code"> = </span><span class="hl-number">7</span><span class="hl-code"> </span><span class="hl-reserved">end</span></div>
</div>
</div>
<div class="example">
<h2 class="example">实例</h2>
<div class="example_code">
<div class="hl-main"><span class="hl-comment">#</span><span class="hl-comment">!/usr/bin/ruby</span><span class="hl-comment"></span><span class="hl-code">
</span><span class="hl-comment">#</span><span class="hl-comment"> -*- coding: UTF-8 -*-</span><span class="hl-comment"></span><span class="hl-code">
</span><span class="hl-identifier">x</span><span class="hl-code">=</span><span class="hl-number">1</span><span class="hl-code">
</span><span class="hl-reserved">if</span><span class="hl-code"> </span><span class="hl-identifier">x</span><span class="hl-code"> &gt; </span><span class="hl-number">2</span><span class="hl-code">
</span><span class="hl-identifier">puts</span><span class="hl-code"> </span><span class="hl-quotes">"</span><span class="hl-string">x 大于 2</span><span class="hl-quotes">"</span><span class="hl-code">
</span><span class="hl-reserved">elsif</span><span class="hl-code"> </span><span class="hl-identifier">x</span><span class="hl-code"> &lt;= </span><span class="hl-number">2</span><span class="hl-code"> </span><span class="hl-reserved">and</span><span class="hl-code"> </span><span class="hl-identifier">x</span><span class="hl-code">!=</span><span class="hl-number">0</span><span class="hl-code">
</span><span class="hl-identifier">puts</span><span class="hl-code"> </span><span class="hl-quotes">"</span><span class="hl-string">x 是 1</span><span class="hl-quotes">"</span><span class="hl-code">
</span><span class="hl-reserved">else</span><span class="hl-code">
</span><span class="hl-identifier">puts</span><span class="hl-code"> </span><span class="hl-quotes">"</span><span class="hl-string">无法得知 x 的值</span><span class="hl-quotes">"</span><span class="hl-code">
</span><span class="hl-reserved">end</span></div>
</div><br/>
<a class="tryitbtn" href="/try/runcode.php?filename=if_demo&amp;type=ruby" target="_blank">尝试一下 »</a>
</div>
<p>以上实例输出结果：</p>
<pre>
x 是 1
</pre>
<h2 class="tutheader">Ruby <i>if</i> 修饰符</h2>
<div class="example">
<h2 class="example">语法</h2>
<div class="example_code">
<div class="hl-main"><span class="hl-identifier">code</span><span class="hl-code"> </span><span class="hl-reserved">if</span><span class="hl-code"> </span><span class="hl-identifier">condition</span></div>
</div>
</div>
<p>if修饰词组表示当 if 右边之条件成立时才执行 if 左边的式子。即如果 <i>conditional</i> 为真，则执行 <i>code</i>。</p>
<div class="example">
<h2 class="example">实例</h2>
<div class="example_code">
<div class="hl-main"><span class="hl-comment">#</span><span class="hl-comment">!/usr/bin/ruby</span><span class="hl-comment"></span><span class="hl-code">
</span><span class="hl-var">$debug</span><span class="hl-code">=</span><span class="hl-number">1</span><span class="hl-code">
</span><span class="hl-identifier">print</span><span class="hl-code"> </span><span class="hl-quotes">"</span><span class="hl-string">debug</span><span class="hl-special">\n</span><span class="hl-quotes">"</span><span class="hl-code"> </span><span class="hl-reserved">if</span><span class="hl-code"> </span><span class="hl-var">$debug</span></div>
</div><br/>
<a class="tryitbtn" href="/try/runcode.php?filename=if_demo2&amp;type=ruby" target="_blank">尝试一下 »</a>
</div>
<p>以上实例输出结果：</p>
<pre>
debug
</pre>
<h2 class="tutheader">Ruby <i>unless</i> 语句</h2>
<div class="example">
<h2 class="example">语法</h2>
<div class="example_code">
<div class="hl-main"><span class="hl-reserved">unless</span><span class="hl-code"> </span><span class="hl-identifier">conditional</span><span class="hl-code"> </span><span class="hl-brackets">[</span><span class="hl-reserved">then</span><span class="hl-brackets">]</span><span class="hl-code">
</span><span class="hl-identifier">code</span><span class="hl-code">
</span><span class="hl-brackets">[</span><span class="hl-reserved">else</span><span class="hl-code">
</span><span class="hl-identifier">code</span><span class="hl-code"> </span><span class="hl-brackets">]</span><span class="hl-code">
</span><span class="hl-reserved">end</span></div>
</div>
</div>
<p>unless式和 if式作用相反，即如果 <i>conditional</i> 为假，则执行 <i>code</i>。如果 <i>conditional</i> 为真，则执行 else 子句中指定的 <i>code</i>。</p>
<div class="example">
<h2 class="example">实例</h2>
<div class="example_code">
<div class="hl-main"><span class="hl-comment">#</span><span class="hl-comment">!/usr/bin/ruby</span><span class="hl-comment"></span><span class="hl-code">
</span><span class="hl-comment">#</span><span class="hl-comment"> -*- coding: UTF-8 -*-</span><span class="hl-comment"></span><span class="hl-code">
</span><span class="hl-identifier">x</span><span class="hl-code">=</span><span class="hl-number">1</span><span class="hl-code">
</span><span class="hl-reserved">unless</span><span class="hl-code"> </span><span class="hl-identifier">x</span><span class="hl-code">&gt;</span><span class="hl-number">2</span><span class="hl-code">
</span><span class="hl-identifier">puts</span><span class="hl-code"> </span><span class="hl-quotes">"</span><span class="hl-string">x 小于 2</span><span class="hl-quotes">"</span><span class="hl-code">
</span><span class="hl-reserved">else</span><span class="hl-code">
</span><span class="hl-identifier">puts</span><span class="hl-code"> </span><span class="hl-quotes">"</span><span class="hl-string">x 大于 2</span><span class="hl-quotes">"</span><span class="hl-code">
</span><span class="hl-reserved">end</span></div>
</div><br/>
<a class="tryitbtn" href="/try/runcode.php?filename=unless_demo&amp;type=ruby" target="_blank">尝试一下 »</a>
</div>
<p>以上实例输出结果为：</p>
<pre>
x 小于 2
</pre>
<h2 class="tutheader">Ruby <i>unless</i> 修饰符</h2>
<div class="example">
<h2 class="example">语法</h2>
<div class="example_code">
<div class="hl-main"><span class="hl-identifier">code</span><span class="hl-code"> </span><span class="hl-reserved">unless</span><span class="hl-code"> </span><span class="hl-identifier">conditional</span></div>
</div>
</div>
<p>如果 <i>conditional</i> 为假，则执行 <i>code</i>。</p>
<div class="example">
<h2 class="example">实例</h2>
<div class="example_code">
<div class="hl-main"><span class="hl-comment">#</span><span class="hl-comment">!/usr/bin/ruby</span><span class="hl-comment"></span><span class="hl-code">
</span><span class="hl-comment">#</span><span class="hl-comment"> -*- coding: UTF-8 -*-</span><span class="hl-comment"></span><span class="hl-code">
</span><span class="hl-var">$var</span><span class="hl-code"> =  </span><span class="hl-number">1</span><span class="hl-code">
</span><span class="hl-identifier">print</span><span class="hl-code"> </span><span class="hl-quotes">"</span><span class="hl-string">1 -- 这一行输出</span><span class="hl-special">\n</span><span class="hl-quotes">"</span><span class="hl-code"> </span><span class="hl-reserved">if</span><span class="hl-code"> </span><span class="hl-var">$var</span><span class="hl-code">
</span><span class="hl-identifier">print</span><span class="hl-code"> </span><span class="hl-quotes">"</span><span class="hl-string">2 -- 这一行不输出</span><span class="hl-special">\n</span><span class="hl-quotes">"</span><span class="hl-code"> </span><span class="hl-reserved">unless</span><span class="hl-code"> </span><span class="hl-var">$var</span><span class="hl-code">
</span><span class="hl-var">$var</span><span class="hl-code"> = </span><span class="hl-reserved">false</span><span class="hl-code">
</span><span class="hl-identifier">print</span><span class="hl-code"> </span><span class="hl-quotes">"</span><span class="hl-string">3 -- 这一行输出</span><span class="hl-special">\n</span><span class="hl-quotes">"</span><span class="hl-code"> </span><span class="hl-reserved">unless</span><span class="hl-code"> </span><span class="hl-var">$var</span></div>
</div><br/>
<a class="tryitbtn" href="/try/runcode.php?filename=unless_demo2&amp;type=ruby" target="_blank">尝试一下 »</a>
</div>
<p>以上实例输出结果：</p>
<pre>
1 -- 这一行输出
3 -- 这一行输出
</pre>
<h2 class="tutheader">Ruby <i>case</i> 语句</h2>
<div class="example">
<h2 class="example">语法</h2>
<div class="example_code">
<div class="hl-main"><span class="hl-reserved">case</span><span class="hl-code"> </span><span class="hl-identifier">expression</span><span class="hl-code">
</span><span class="hl-brackets">[</span><span class="hl-reserved">when</span><span class="hl-code"> </span><span class="hl-identifier">expression</span><span class="hl-code"> </span><span class="hl-brackets">[</span><span class="hl-code">, </span><span class="hl-identifier">expression</span><span class="hl-code"> ...</span><span class="hl-brackets">]</span><span class="hl-code"> </span><span class="hl-brackets">[</span><span class="hl-reserved">then</span><span class="hl-brackets">]</span><span class="hl-code">
</span><span class="hl-identifier">code</span><span class="hl-code"> </span><span class="hl-brackets">]</span><span class="hl-code">...
</span><span class="hl-brackets">[</span><span class="hl-reserved">else</span><span class="hl-code">
</span><span class="hl-identifier">code</span><span class="hl-code"> </span><span class="hl-brackets">]</span><span class="hl-code">
</span><span class="hl-reserved">end</span></div>
</div>
</div>
<p>case先对一个 <i>expression</i> 进行匹配判断，然后根据匹配结果进行分支选择。</p>
<p>它使用 <b>===</b>运算符比较 <b>when</b> 指定的 <i>expression</i>，若一致的话就执行 <b>when</b> 部分的内容。</p>
<p>
通常我们省略保留字 then 。若想在一行内写出完整的 when 式，则必须以 then 隔开条件式和程式区块。如下所示:</p>
<div class="example">
<div class="example_code">
<div class="hl-main"><span class="hl-reserved">when</span><span class="hl-code"> </span><span class="hl-identifier">a</span><span class="hl-code"> == </span><span class="hl-number">4</span><span class="hl-code"> </span><span class="hl-reserved">then</span><span class="hl-code"> </span><span class="hl-identifier">a</span><span class="hl-code"> = </span><span class="hl-number">7</span><span class="hl-code"> </span><span class="hl-reserved">end</span></div>
</div>
</div>
<p>因此：</p>
<div class="example">
<div class="example_code">
<div class="hl-main"><span class="hl-reserved">case</span><span class="hl-code"> </span><span class="hl-identifier">expr0</span><span class="hl-code">
</span><span class="hl-reserved">when</span><span class="hl-code"> </span><span class="hl-identifier">expr1</span><span class="hl-code">, </span><span class="hl-identifier">expr2</span><span class="hl-code">
</span><span class="hl-identifier">stmt1</span><span class="hl-code">
</span><span class="hl-reserved">when</span><span class="hl-code"> </span><span class="hl-identifier">expr3</span><span class="hl-code">, </span><span class="hl-identifier">expr4</span><span class="hl-code">
</span><span class="hl-identifier">stmt2</span><span class="hl-code">
</span><span class="hl-reserved">else</span><span class="hl-code">
</span><span class="hl-identifier">stmt3</span><span class="hl-code">
</span><span class="hl-reserved">end</span></div>
</div>
</div>
<p>基本上类似于：</p>
<div class="example">
<div class="example_code">
<div class="hl-main"><span class="hl-identifier">_tmp</span><span class="hl-code"> = </span><span class="hl-identifier">expr0</span><span class="hl-code">
</span><span class="hl-reserved">if</span><span class="hl-code"> </span><span class="hl-identifier">expr1</span><span class="hl-code"> === </span><span class="hl-identifier">_tmp</span><span class="hl-code"> || </span><span class="hl-identifier">expr2</span><span class="hl-code"> === </span><span class="hl-identifier">_tmp</span><span class="hl-code">
</span><span class="hl-identifier">stmt1</span><span class="hl-code">
</span><span class="hl-reserved">elsif</span><span class="hl-code"> </span><span class="hl-identifier">expr3</span><span class="hl-code"> === </span><span class="hl-identifier">_tmp</span><span class="hl-code"> || </span><span class="hl-identifier">expr4</span><span class="hl-code"> === </span><span class="hl-identifier">_tmp</span><span class="hl-code">
</span><span class="hl-identifier">stmt2</span><span class="hl-code">
</span><span class="hl-reserved">else</span><span class="hl-code">
</span><span class="hl-identifier">stmt3</span><span class="hl-code">
</span><span class="hl-reserved">end</span></div>
</div>
</div>
<div class="example">
<h2 class="example">实例</h2>
<div class="example_code">
<div class="hl-main"><span class="hl-comment">#</span><span class="hl-comment">!/usr/bin/ruby</span><span class="hl-comment"></span><span class="hl-code">
</span><span class="hl-comment">#</span><span class="hl-comment"> -*- coding: UTF-8 -*-</span><span class="hl-comment"></span><span class="hl-code">
</span><span class="hl-var">$age</span><span class="hl-code"> =  </span><span class="hl-number">5</span><span class="hl-code">
</span><span class="hl-reserved">case</span><span class="hl-code"> </span><span class="hl-var">$age</span><span class="hl-code">
</span><span class="hl-reserved">when</span><span class="hl-code"> </span><span class="hl-number">0</span><span class="hl-code"> .. </span><span class="hl-number">2</span><span class="hl-code">
</span><span class="hl-identifier">puts</span><span class="hl-code"> </span><span class="hl-quotes">"</span><span class="hl-string">婴儿</span><span class="hl-quotes">"</span><span class="hl-code">
</span><span class="hl-reserved">when</span><span class="hl-code"> </span><span class="hl-number">3</span><span class="hl-code"> .. </span><span class="hl-number">6</span><span class="hl-code">
</span><span class="hl-identifier">puts</span><span class="hl-code"> </span><span class="hl-quotes">"</span><span class="hl-string">小孩</span><span class="hl-quotes">"</span><span class="hl-code">
</span><span class="hl-reserved">when</span><span class="hl-code"> </span><span class="hl-number">7</span><span class="hl-code"> .. </span><span class="hl-number">12</span><span class="hl-code">
</span><span class="hl-identifier">puts</span><span class="hl-code"> </span><span class="hl-quotes">"</span><span class="hl-string">child</span><span class="hl-quotes">"</span><span class="hl-code">
</span><span class="hl-reserved">when</span><span class="hl-code"> </span><span class="hl-number">13</span><span class="hl-code"> .. </span><span class="hl-number">18</span><span class="hl-code">
</span><span class="hl-identifier">puts</span><span class="hl-code"> </span><span class="hl-quotes">"</span><span class="hl-string">少年</span><span class="hl-quotes">"</span><span class="hl-code">
</span><span class="hl-reserved">else</span><span class="hl-code">
</span><span class="hl-identifier">puts</span><span class="hl-code"> </span><span class="hl-quotes">"</span><span class="hl-string">其他年龄段的</span><span class="hl-quotes">"</span><span class="hl-code">
</span><span class="hl-reserved">end</span></div>
</div><br/>
<a class="tryitbtn" href="/try/runcode.php?filename=case_demo&amp;type=ruby" target="_blank">尝试一下 »</a>
</div>
<p>以上实例输出结果为：</p>
<pre>
小孩
</pre>
<p>当case的"表达式"部分被省略时，将计算第一个when条件部分为真的表达式。</p>
<div class="example">
<div class="example_code">
<div class="hl-main"><span class="hl-identifier">foo</span><span class="hl-code"> = </span><span class="hl-reserved">false</span><span class="hl-code">
</span><span class="hl-identifier">bar</span><span class="hl-code"> = </span><span class="hl-reserved">true</span><span class="hl-code">
</span><span class="hl-identifier">quu</span><span class="hl-code"> = </span><span class="hl-reserved">false</span><span class="hl-code">
</span><span class="hl-reserved">case</span><span class="hl-code">
</span><span class="hl-reserved">when</span><span class="hl-code"> </span><span class="hl-identifier">foo</span><span class="hl-code"> </span><span class="hl-reserved">then</span><span class="hl-code"> </span><span class="hl-identifier">puts</span><span class="hl-code"> </span><span class="hl-quotes">'</span><span class="hl-string">foo is true</span><span class="hl-quotes">'</span><span class="hl-code">
</span><span class="hl-reserved">when</span><span class="hl-code"> </span><span class="hl-identifier">bar</span><span class="hl-code"> </span><span class="hl-reserved">then</span><span class="hl-code"> </span><span class="hl-identifier">puts</span><span class="hl-code"> </span><span class="hl-quotes">'</span><span class="hl-string">bar is true</span><span class="hl-quotes">'</span><span class="hl-code">
</span><span class="hl-reserved">when</span><span class="hl-code"> </span><span class="hl-identifier">quu</span><span class="hl-code"> </span><span class="hl-reserved">then</span><span class="hl-code"> </span><span class="hl-identifier">puts</span><span class="hl-code"> </span><span class="hl-quotes">'</span><span class="hl-string">quu is true</span><span class="hl-quotes">'</span><span class="hl-code">
</span><span class="hl-reserved">end</span><span class="hl-code">
</span><span class="hl-comment">#</span><span class="hl-comment"> 显示 "bar is true"</span><span class="hl-comment"></span></div>
</div>
</div>
</div>